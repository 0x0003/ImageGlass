!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("ig-ui",[],n):"object"==typeof exports?exports["ig-ui"]=n():e["ig-ui"]=n()}(this,(()=>(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n);var t=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,u)}l((r=r.apply(e,n||[])).next())}))},r=function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(l){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(t=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],r=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},o=function(e){try{return document.querySelector(e)}catch(e){}return null},a=function(e,n){return new Promise((function(t){setTimeout((function(){return t(n)}),e)}))},i=function(){function e(){this.eventHandlers={}}return e.prototype.addEvent=function(e,n){this.eventHandlers[e]=n},e.prototype.removeEvent=function(e){delete this.eventHandlers[e]},e.prototype.startListening=function(){var e,n=this;null===(e=window.chrome.webview)||void 0===e||e.addEventListener("message",(function(e){var t,r,o=e.data,a=null!==(t=null==o?void 0:o.Name)&&void 0!==t?t:"",i=null!==(r=null==o?void 0:o.Data)&&void 0!==r?r:"",u=n.eventHandlers[a],l=!!u;console.info("Received event '".concat(a,"' (handler=").concat(l,") with data:"),i),l&&u(a,i)}))},e}(),u=function(e,n){_webview.addEvent(e,n)},l=function(e,n){var t;null===(t=window.chrome.webview)||void 0===t||t.postMessage({name:e,data:n})},c=function(e){queryAll(".tab-page").forEach((function(e){return e.classList.remove("active")}));var n=query('.tab-page[tab="'.concat(e,'"]'));null==n||n.classList.add("active"),queryAll('input[type="radio"]').forEach((function(e){return e.checked=!1}));var t=query('input[type="radio"][value="'.concat(e,'"]'));t&&(t.checked=!0)},s=function(){for(var e in _pageSettings.lang)if(Object.prototype.hasOwnProperty.call(_pageSettings.lang,e))for(var n=_pageSettings.lang[e],t=0,r=queryAll('[data-lang="'.concat(e,'"]'));t<r.length;t++){r[t].innerText=n}},f=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,u)}l((r=r.apply(e,n||[])).next())}))},d=function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(l){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(t=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],r=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},g=function(e){var n=new Date(1e3*e),t=n.getUTCMinutes().toString(),r=n.getUTCSeconds().toString(),o=n.getUTCMilliseconds().toString();return t.length<2&&(t="0".concat(t)),r.length<2&&(r="0".concat(r)),"".concat(t,":").concat(r,".").concat(o)},v=function(e){for(var n=query("#Cmb_LanguageList");n.options.length;)n.remove(0);Array.isArray(e)&&e.length>0&&(_pageSettings.langList=e),_pageSettings.langList.forEach((function(e){var t="".concat(e.Metadata.LocalName," (").concat(e.Metadata.EnglishName,")");e.FileName&&0!==e.FileName.length||(t=e.Metadata.EnglishName);var r=new Option(t,e.FileName);n.add(r)}))},p=function(){var e=+query('[name="SlideshowInterval"]').value||5,n=+query('[name="SlideshowIntervalTo"]').value||5,t=g(e),r=g(n),o=query('[name="UseRandomIntervalForSlideshow"]').checked;query("#Lbl_SlideshowInterval").innerText=o?"".concat(t," - ").concat(r):t},h=function(){var e=query('[name="UseRandomIntervalForSlideshow"]').checked;query("#Lbl_SlideshowIntervalFrom").hidden=!e,query("#Section_SlideshowIntervalTo").hidden=!e},y=function(){var e=query("#Cmb_LanguageList").value,n=_pageSettings.langList.find((function(n){return n.FileName===e}));n&&(query("#Section_LanguageContributors").innerText=n.Metadata.Author)},w=function(){var e,n,t,r;for(var o in function(){var e=function(e){if(!Object.prototype.hasOwnProperty.call(_pageSettings.enums,e))return"continue";for(var n=_pageSettings.enums[e],t=function(t){n.forEach((function(n){var r=new Option("".concat(n),n);r.setAttribute("data-lang","_.".concat(e,"._").concat(n)),t.add(r)}))},r=0,o=queryAll('select[data-enum="'.concat(e,'"]'));r<o.length;r++)t(o[r])};for(var n in _pageSettings.enums)e(n)}(),_pageSettings.config)if(Object.prototype.hasOwnProperty.call(_pageSettings.config,o)){var a=_pageSettings.config[o];if("string"==typeof a||"number"==typeof a||"boolean"==typeof a){var i=query('[name="'.concat(o,'"]'));if(i){var u=i.tagName.toLowerCase();if("select"===u)i.value=a.toString();else if("input"===u){var l=i.getAttribute("type").toLowerCase(),c=i;if("radio"===l||"checkbox"===l)c.checked=Boolean(a);else if("color"===l){var s=a.toString()||"#00000000";c.value=s.substring(0,s.length-2)}else c.value=a.toString()}}}}query("#Lnk_StartupDir").innerText=_pageSettings.startUpDir||"(unknown)",query("#Lnk_ConfigDir").innerText=_pageSettings.configDir||"(unknown)",query("#Lnk_UserConfigFile").innerText=_pageSettings.userConfigFilePath||"(unknown)",query("#Cmb_MouseWheel_Scroll").value=(null===(e=_pageSettings.config.MouseWheelActions)||void 0===e?void 0:e.Scroll)||"DoNothing",query("#Cmb_MouseWheel_CtrlAndScroll").value=(null===(n=_pageSettings.config.MouseWheelActions)||void 0===n?void 0:n.CtrlAndScroll)||"DoNothing",query("#Cmb_MouseWheel_ShiftAndScroll").value=(null===(t=_pageSettings.config.MouseWheelActions)||void 0===t?void 0:t.ShiftAndScroll)||"DoNothing",query("#Cmb_MouseWheel_AltAndScroll").value=(null===(r=_pageSettings.config.MouseWheelActions)||void 0===r?void 0:r.AltAndScroll)||"DoNothing",h(),p(),v(),y()};return window._webview=new i,_webview.startListening(),window.query=o,window.queryAll=function(e){try{return Array.from(document.querySelectorAll(e))}catch(e){}return[]},window.on=u,window.post=l,window.postAsync=function(e,n){return t(void 0,void 0,void 0,(function(){var t,o,i;return r(this,(function(r){switch(r.label){case 0:t=!1,o=null,u(e,(function(n,r){n===e&&(t=!0,o=r)})),null===(i=window.chrome.webview)||void 0===i||i.postMessage({name:e,data:n}),r.label=1;case 1:return t?[3,3]:[4,a(100)];case 2:return r.sent(),[3,1];case 3:return[2,o]}}))}))},window._pageSettings||(window._pageSettings={config:{},lang:{},langList:[],enums:{ImageOrderBy:[],ImageOrderType:[],ColorProfileOption:[],AfterEditAppAction:[],ImageInterpolation:[],MouseWheelAction:[],MouseWheelEvent:[],MouseClickEvent:[],BackdropStyle:[],ToolbarItemModelType:[]},startUpDir:"",configDir:"",userConfigFilePath:""}),_pageSettings.setSidebarActiveMenu=c,_pageSettings.loadLanguage=s,_pageSettings.loadSettings=w,_pageSettings.loadLanguageList=v,function(){for(var e=Array.from(document.querySelectorAll('input[name="nav"]')),n=0;n<e.length;n++){e[n].addEventListener("change",(function(e){var n=e.target.value;c(n)}),!1)}}(),c("image"),w(),s(),o("#BtnOK").addEventListener("click",(function(){return l("BtnOK")}),!1),o("#BtnCancel").addEventListener("click",(function(){return l("BtnCancel")}),!1),o("#BtnApply").addEventListener("click",(function(){return l("BtnApply")}),!1),query('[name="UseRandomIntervalForSlideshow"]').addEventListener("input",(function(){return h()}),!1),query('[name="SlideshowInterval"]').addEventListener("input",(function(){return p()}),!1),query('[name="SlideshowIntervalTo"]').addEventListener("input",(function(){return p()}),!1),query("#Cmb_LanguageList").addEventListener("change",(function(){return y()}),!1),query("#Btn_RefreshLanguageList").addEventListener("click",(function(){return f(void 0,void 0,void 0,(function(){var e;return d(this,(function(n){switch(n.label){case 0:return[4,postAsync("Btn_RefreshLanguageList")];case 1:return e=n.sent(),v(e),[2]}}))}))}),!1),query("#Lnk_InstallLanguage").addEventListener("click",(function(){return post("Lnk_InstallLanguage")}),!1),query("#Lnk_GetMoreLanguage").addEventListener("click",(function(){return post("Lnk_GetMoreLanguage")}),!1),n})()));