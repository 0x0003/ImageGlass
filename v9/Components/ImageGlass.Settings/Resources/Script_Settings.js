!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ig-ui",[],t):"object"==typeof exports?exports["ig-ui"]=t():e["ig-ui"]=t()}(this,(()=>(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t);var n=function(){function e(){this.eventHandlers={}}return e.prototype.addEvent=function(e,t){this.eventHandlers[e]=t},e.prototype.removeEvent=function(e){delete this.eventHandlers[e]},e.prototype.startListening=function(){var e,t=this;null===(e=window.chrome.webview)||void 0===e||e.addEventListener("message",(function(e){var n,o,a=e.data,r=null!==(n=null==a?void 0:a.Name)&&void 0!==n?n:"",i=null!==(o=null==a?void 0:a.Data)&&void 0!==o?o:"",l=t.eventHandlers[r],u=!!l;console.info("Received event '".concat(r,"' (handler=").concat(u,") with data:"),i),u&&l(r,i)}))},e}(),o=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((o=o.apply(e,t||[])).next())}))},a=function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&l[0]?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,o=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],o=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},r=function(e,t,n){if(n||2===arguments.length)for(var o,a=0,r=t.length;a<r;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))},i=function(e,t){return new Promise((function(n){setTimeout((function(){return n(t)}),e)}))},l=function(e){for(var t={},n=queryAll('[tab="'.concat(e,'"] input[name]')),o=queryAll('[tab="'.concat(e,'"] select[name]')),a=0,i=r(r([],n,!0),o,!0);a<i.length;a++){var l=i[a],u=l.name,c="";l.name.startsWith("_")||l.checkValidity()&&(c="checkbox"===l.type?l.checked:"number"===l.type?+l.value:l.value)!==_pageSettings.config[u]&&(t[u]=c)}return t},u=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},c=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((o=o.apply(e,t||[])).next())}))},s=function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&l[0]?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,o=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],o=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},d=function(e,t){_webview.addEvent(e,t)};const g=function(){function e(){}return e.load=function(){var e=function(e){if(!Object.prototype.hasOwnProperty.call(_pageSettings.lang,e))return"continue";var t=_pageSettings.lang[e];queryAll('[lang-text="'.concat(e,'"]')).forEach((function(e){e.innerText=t})),queryAll('[lang-title="'.concat(e,'"]')).forEach((function(e){e.title=t}))};for(var t in _pageSettings.lang)e(t)},e}();var f=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((o=o.apply(e,t||[])).next())}))},h=function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&l[0]?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,o=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],o=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};const v=function(){function e(){}return e.loadSettings=function(){e.loadThemeList(),e.loadThemeListStatus(),e.handleBackgroundColorChanged(),e.handleSlideshowBackgroundColorChanged()},e.loadThemeListStatus=function(){var e=query('[name="DarkTheme"]').value,t=query('[name="LightTheme"]').value,n=query('[name="_DarkThemeOptions"][value="'.concat(e,'"]')),o=query('[name="_LightThemeOptions"][value="'.concat(t,'"]'));n&&(n.checked=!0),o&&(o.checked=!0)},e.addEvents=function(){var t=this;query("#Lnk_ResetBackgroundColor").addEventListener("click",e.resetBackgroundColor,!1),query("#Lnk_ResetSlideshowBackgroundColor").addEventListener("click",e.resetSlideshowBackgroundColor,!1),query("#Btn_BackgroundColor").addEventListener("click",(function(){return f(t,void 0,void 0,(function(){var t,n;return h(this,(function(o){switch(o.label){case 0:return t=query('[name="BackgroundColor"]'),[4,postAsync("Btn_BackgroundColor",t.value)];case 1:return(n=o.sent())&&(t.value=n,e.handleBackgroundColorChanged()),[2]}}))}))}),!1),query("#Btn_SlideshowBackgroundColor").addEventListener("click",(function(){return f(t,void 0,void 0,(function(){var t,n;return h(this,(function(o){switch(o.label){case 0:return t=query('[name="SlideshowBackgroundColor"]'),[4,postAsync("Btn_SlideshowBackgroundColor",t.value)];case 1:return(n=o.sent())&&(t.value=n,e.handleSlideshowBackgroundColorChanged()),[2]}}))}))}),!1),query("#Btn_InstallTheme").addEventListener("click",(function(){return f(t,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return[4,postAsync("Btn_InstallTheme")];case 1:return t=n.sent(),e.loadThemeList(t),[2]}}))}))}),!1),query("#Btn_RefreshThemeList").addEventListener("click",(function(){return f(t,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return[4,postAsync("Btn_RefreshThemeList")];case 1:return t=n.sent(),e.loadThemeList(t),[2]}}))}))}),!1),query("#Btn_OpenThemeFolder").addEventListener("click",(function(){return post("Btn_OpenThemeFolder")}),!1)},e.exportSettings=function(){var e=l("appearance");return e.DarkTheme=query('[name="DarkTheme"]').value,e.DarkTheme===_pageSettings.config.DarkTheme&&delete e.DarkTheme,e.LightTheme=query('[name="LightTheme"]').value,e.LightTheme===_pageSettings.config.LightTheme&&delete e.LightTheme,e},e.loadThemeList=function(t){var n=this;Array.isArray(t)&&t.length>0&&(_pageSettings.themeList=t);for(var o=_pageSettings.themeList||[],a=query("#List_ThemeList"),r="",i=0,l=o;i<l.length;i++){var u=l[i];r+='\n        <li>\n          <div class="theme-item">\n            <div class="theme-preview">\n              <div class="theme-preview-img" title="'.concat(u.FolderPath,'">\n                <img src="').concat(u.PreviewImage,'" alt="').concat(u.Info.Name,'" onerror="this.hidden = true;" />\n                <span class="theme-mode ').concat(u.IsDarkMode?"theme-dark":"theme-light",'"\n                  lang-title="FrmSettings.Tab.Appearance.').concat(u.IsDarkMode?"_DarkTheme":"_LightTheme",'">\n                  ').concat(u.IsDarkMode?"🌙":"☀️",'\n                </span>\n              </div>\n            </div>\n            <div class="theme-info">\n              <div class="theme-heading" title="').concat(u.Info.Name," - v").concat(u.Info.Version,'">\n                <span class="theme-name">').concat(u.Info.Name,'</span>\n                <span class="theme-version">').concat(u.Info.Version,'</span>\n              </div>\n              <div class="theme-description" title="').concat(u.Info.Description,'">').concat(u.Info.Description,'</div>\n              <div class="theme-author">\n                <span class="me-4" title="').concat(u.Info.Author,'">\n                  <span lang-text="FrmSettings.Tab.Appearance._Author">[Author]</span>:\n                  ').concat(u.Info.Author||"?",'\n                </span>\n                <span class="me-4" title="').concat(u.Info.Website,'">\n                  <span lang-text="_._Website">[Website]</span>:\n                  ').concat(u.Info.Website||"?",'\n                </span>\n                <span title="').concat(u.Info.Email,'">\n                  <span lang-text="_._Email">[Email]</span>:\n                  ').concat(u.Info.Email||"?",'\n                </span>\n              </div>\n              <div class="theme-actions">\n                <label lang-title="FrmSettings.Tab.Appearance._UseThemeForDarkMode">\n                  <input type="radio" name="_DarkThemeOptions" value="').concat(u.FolderName,'" />\n                  <span>\n                    <span>🌙</span>\n                    <span lang-text="FrmSettings.Tab.Appearance._DarkTheme">[Dark]</span> \n                  </span>\n                </label>\n                <label lang-title="FrmSettings.Tab.Appearance._UseThemeForLightMode">\n                  <input type="radio" name="_LightThemeOptions" value="').concat(u.FolderName,'" />\n                  <span>\n                    <span>☀️</span>\n                    <span lang-text="FrmSettings.Tab.Appearance._LightTheme">[Light]</span>\n                  </span>\n                </label>\n\n                <button type="button" class="ms-3 px-1"\n                  lang-title="_._Delete"\n                  ').concat(_pageSettings.defaultThemeDir===u.FolderPath?'style="visibility: hidden !important;"':"",'\n                  data-delete-theme="').concat(u.FolderPath,'">\n                  ❌\n                </button>\n              </div>\n            </div>\n          </div>\n        </li>')}a.innerHTML=r,g.load(),e.loadThemeListStatus(),queryAll('[name="_DarkThemeOptions"]').forEach((function(e){e.addEventListener("change",(function(e){var t=e.target.value;query('[name="DarkTheme"]').value=t}),!1)})),queryAll('[name="_LightThemeOptions"]').forEach((function(e){e.addEventListener("change",(function(e){var t=e.target.value;query('[name="LightTheme"]').value=t}),!1)})),queryAll("[data-delete-theme]").forEach((function(t){t.addEventListener("click",(function(t){return f(n,void 0,void 0,(function(){var n,o;return h(this,(function(a){switch(a.label){case 0:return n=t.target.getAttribute("data-delete-theme"),[4,postAsync("Delete_Theme_Pack",n)];case 1:return o=a.sent(),e.loadThemeList(o),[2]}}))}))}),!1)}))},e.resetBackgroundColor=function(){var t="light"!==document.documentElement.getAttribute("color-mode")?_pageSettings.config.DarkTheme:_pageSettings.config.LightTheme,n=_pageSettings.themeList.find((function(e){return e.FolderName===t}));if(n){var o=n.BgColor||"#00000000";query('[name="BackgroundColor"]').value=o,e.handleBackgroundColorChanged()}},e.resetSlideshowBackgroundColor=function(){query('[name="SlideshowBackgroundColor"]').value="#000000",e.handleSlideshowBackgroundColorChanged()},e.handleBackgroundColorChanged=function(){var e=query('[name="BackgroundColor"]').value;e&&(query("#Btn_BackgroundColor > .color-display").style.setProperty("--color-picker-value",e),query("#Lbl_BackgroundColorValue").innerText=e)},e.handleSlideshowBackgroundColorChanged=function(){var e=query('[name="SlideshowBackgroundColor"]').value;e&&(query("#Btn_SlideshowBackgroundColor > .color-display").style.setProperty("--color-picker-value",e),query("#Lbl_SlideshowBackgroundColorValue").innerText=e)},e}();const p=function(){function e(){}return e.addEvents=function(){for(var t=Array.from(document.querySelectorAll('input[name="nav"]')),n=0;n<t.length;n++){t[n].addEventListener("change",(function(t){var n=t.target.value;e.setActiveMenu(n)}),!1)}},e.setActiveMenu=function(e){e||(e="general");var t=query('.tab-page[tab="'.concat(e,'"]'));if(t){queryAll(".tab-page").forEach((function(e){return e.classList.remove("active")})),t.classList.add("active"),queryAll('input[type="radio"]').forEach((function(e){return e.checked=!1}));var n=query('input[type="radio"][value="'.concat(e,'"]'));n&&(n.checked=!0),"appearance"===e&&v.loadThemeListStatus(),post("Sidebar_Changed",e)}},e}();const m=function(){function e(){}return Object.defineProperty(e,"isOriginalAutoUpdateEnabled",{get:function(){return"0"!==_pageSettings.config.AutoUpdate},enumerable:!1,configurable:!0}),e.loadSettings=function(){query("#Lnk_StartupDir").title=_pageSettings.startUpDir||"(unknown)",query("#Lnk_ConfigDir").title=_pageSettings.configDir||"(unknown)",query("#Lnk_UserConfigFile").title=_pageSettings.userConfigFilePath||"(unknown)",query('[name="AutoUpdate"]').checked=e.isOriginalAutoUpdateEnabled},e.addEvents=function(){query("#Lnk_StartupDir").addEventListener("click",(function(){return post("Lnk_StartupDir",_pageSettings.startUpDir)}),!1),query("#Lnk_ConfigDir").addEventListener("click",(function(){return post("Lnk_ConfigDir",_pageSettings.configDir)}),!1),query("#Lnk_UserConfigFile").addEventListener("click",(function(){return post("Lnk_UserConfigFile",_pageSettings.userConfigFilePath)}),!1)},e.exportSettings=function(){var t=l("general");return!0===t.AutoUpdate!==e.isOriginalAutoUpdateEnabled?t.AutoUpdate=t.AutoUpdate?(new Date).toISOString():"0":delete t.AutoUpdate,t},e}();var y=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((o=o.apply(e,t||[])).next())}))},b=function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&l[0]?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,o=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],o=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};const S=function(){function e(){}return e.loadSettings=function(){var t=_pageSettings.config.ColorProfile||"";t.includes(".")&&(query('[name="ColorProfile"]').value="Custom",query("#Lnk_CustomColorProfile").innerText=t),e.handleColorProfileChanged(),e.handleUseEmbeddedThumbnailOptionsChanged()},e.addEvents=function(){var t=this;query("#Btn_BrowseColorProfile").addEventListener("click",(function(){return y(t,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return[4,postAsync("Btn_BrowseColorProfile")];case 1:return e=t.sent(),query("#Lnk_CustomColorProfile").innerText=e,[2]}}))}))}),!1),query("#Lnk_CustomColorProfile").addEventListener("click",(function(){var e=query("#Lnk_CustomColorProfile").innerText.trim();post("Lnk_CustomColorProfile",e)}),!1),query('[name="ColorProfile"]').addEventListener("change",e.handleColorProfileChanged,!1),query('[name="UseEmbeddedThumbnailRawFormats"]').addEventListener("input",e.handleUseEmbeddedThumbnailOptionsChanged,!1),query('[name="UseEmbeddedThumbnailOtherFormats"]').addEventListener("input",e.handleUseEmbeddedThumbnailOptionsChanged,!1)},e.exportSettings=function(){var e=l("image");e.ImageBoosterCacheCount=+(e.ImageBoosterCacheCount||0),e.ImageBoosterCacheCount===_pageSettings.config.ImageBoosterCacheCount&&delete e.ImageBoosterCacheCount;var t=_pageSettings.config.ColorProfile;return"Custom"===e.ColorProfile&&(e.ColorProfile=query("#Lnk_CustomColorProfile").innerText.trim()),e.ColorProfile&&e.ColorProfile!==t||delete e.ColorProfile,e},e.handleColorProfileChanged=function(){var e="Custom"===query('[name="ColorProfile"]').value;query("#Btn_BrowseColorProfile").hidden=!e,query("#Section_CustomColorProfile").hidden=!e},e.handleUseEmbeddedThumbnailOptionsChanged=function(){var e=query('[name="UseEmbeddedThumbnailRawFormats"]').checked,t=query('[name="UseEmbeddedThumbnailOtherFormats"]').checked,n=e||t;query("#Section_EmbeddedThumbnailSize").hidden=!n},e}();const _=function(){function e(){}return e.loadSettings=function(){e.handleUseRandomIntervalForSlideshowChanged(),e.handleSlideshowIntervalsChanged()},e.addEvents=function(){query('[name="UseRandomIntervalForSlideshow"]').addEventListener("input",e.handleUseRandomIntervalForSlideshowChanged,!1),query('[name="SlideshowInterval"]').addEventListener("input",e.handleSlideshowIntervalsChanged,!1),query('[name="SlideshowIntervalTo"]').addEventListener("input",e.handleSlideshowIntervalsChanged,!1)},e.exportSettings=function(){return l("slideshow")},e.handleSlideshowIntervalsChanged=function(){var t=query('[name="SlideshowInterval"]'),n=query('[name="SlideshowIntervalTo"]');t.max=n.value,n.min=t.value;var o=+t.value||5,a=+n.value||5,r=e.toTimeString(o),i=e.toTimeString(a),l=query('[name="UseRandomIntervalForSlideshow"]').checked;query("#Lbl_SlideshowInterval").innerText=l?"".concat(r," - ").concat(i):r},e.handleUseRandomIntervalForSlideshowChanged=function(){var e=query('[name="UseRandomIntervalForSlideshow"]').checked;query("#Lbl_SlideshowIntervalFrom").hidden=!e,query("#Section_SlideshowIntervalTo").hidden=!e},e.toTimeString=function(e){var t=new Date(1e3*e),n=t.getUTCMinutes().toString(),o=t.getUTCSeconds().toString(),a=t.getUTCMilliseconds().toString();return n.length<2&&(n="0".concat(n)),o.length<2&&(o="0".concat(o)),"".concat(n,":").concat(o,".").concat(a)},e}();const L=function(){function e(){}return e.loadSettings=function(){var e,t,n,o;query("#Cmb_MouseWheel_Scroll").value=(null===(e=_pageSettings.config.MouseWheelActions)||void 0===e?void 0:e.Scroll)||"DoNothing",query("#Cmb_MouseWheel_CtrlAndScroll").value=(null===(t=_pageSettings.config.MouseWheelActions)||void 0===t?void 0:t.CtrlAndScroll)||"DoNothing",query("#Cmb_MouseWheel_ShiftAndScroll").value=(null===(n=_pageSettings.config.MouseWheelActions)||void 0===n?void 0:n.ShiftAndScroll)||"DoNothing",query("#Cmb_MouseWheel_AltAndScroll").value=(null===(o=_pageSettings.config.MouseWheelActions)||void 0===o?void 0:o.AltAndScroll)||"DoNothing"},e.addEvents=function(){query("#Btn_ResetMouseWheelAction").addEventListener("click",e.resetDefaultMouseWheelActions,!1)},e.exportSettings=function(){var e,t,n,o,a=l("mouse_keyboard"),r=query("#Cmb_MouseWheel_Scroll").value,i=query("#Cmb_MouseWheel_CtrlAndScroll").value,u=query("#Cmb_MouseWheel_ShiftAndScroll").value,c=query("#Cmb_MouseWheel_AltAndScroll").value,s={};return r!==(null===(e=_pageSettings.config.MouseWheelActions)||void 0===e?void 0:e.Scroll)&&(s.Scroll=r),i!==(null===(t=_pageSettings.config.MouseWheelActions)||void 0===t?void 0:t.CtrlAndScroll)&&(s.CtrlAndScroll=i),u!==(null===(n=_pageSettings.config.MouseWheelActions)||void 0===n?void 0:n.ShiftAndScroll)&&(s.ShiftAndScroll=u),c!==(null===(o=_pageSettings.config.MouseWheelActions)||void 0===o?void 0:o.AltAndScroll)&&(s.AltAndScroll=c),Object.keys(s).length>0?a.MouseWheelActions=s:delete a.MouseWheelActions,a},e.resetDefaultMouseWheelActions=function(){query("#Cmb_MouseWheel_Scroll").value="Zoom",query("#Cmb_MouseWheel_CtrlAndScroll").value="PanVertically",query("#Cmb_MouseWheel_ShiftAndScroll").value="PanHorizontally",query("#Cmb_MouseWheel_AltAndScroll").value="BrowseImages"},e}();var w=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((o=o.apply(e,t||[])).next())}))},k=function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&l[0]?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,o=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],o=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};const C=function(){function e(){}return e.loadSettings=function(){e.handleLanguageChanged()},e.addEvents=function(){query("#Cmb_LanguageList").removeEventListener("change",e.handleLanguageChanged,!1),query("#Btn_RefreshLanguageList").removeEventListener("click",e.onBtn_RefreshLanguageList,!1),query("#Lnk_InstallLanguage").removeEventListener("click",e.onLnk_InstallLanguage,!1),query("#Cmb_LanguageList").addEventListener("change",e.handleLanguageChanged,!1),query("#Btn_RefreshLanguageList").addEventListener("click",e.onBtn_RefreshLanguageList,!1),query("#Lnk_InstallLanguage").addEventListener("click",e.onLnk_InstallLanguage,!1)},e.onBtn_RefreshLanguageList=function(){return w(this,void 0,void 0,(function(){var t;return k(this,(function(n){switch(n.label){case 0:return[4,postAsync("Btn_RefreshLanguageList")];case 1:return t=n.sent(),e.loadLanguageList(t),[2]}}))}))},e.onLnk_InstallLanguage=function(){return w(this,void 0,void 0,(function(){var t;return k(this,(function(n){switch(n.label){case 0:return[4,postAsync("Lnk_InstallLanguage")];case 1:return t=n.sent(),e.loadLanguageList(t),[2]}}))}))},e.exportSettings=function(){return l("language")},e.handleLanguageChanged=function(){var e=query("#Cmb_LanguageList").value,t=_pageSettings.langList.find((function(t){return t.FileName===e}));t&&(query("#Section_LanguageContributors").innerText=t.Metadata.Author)},e.loadLanguageList=function(t){for(var n=query("#Cmb_LanguageList");n.options.length;)n.remove(0);Array.isArray(t)&&t.length>0&&(_pageSettings.langList=t),_pageSettings.langList.forEach((function(e){var t="".concat(e.Metadata.LocalName," (").concat(e.Metadata.EnglishName,")");e.FileName&&0!==e.FileName.length||(t=e.Metadata.EnglishName);var o=new Option(t,e.FileName);n.add(o)})),n.value=_pageSettings.config.Language,e.handleLanguageChanged()},e}();const E=function(){function e(){}return e.loadSettings=function(){},e.addEvents=function(){},e.exportSettings=function(){return l("edit")},e}();const A=function(){function e(){}return e.loadSettings=function(){var e=_pageSettings.config.ZoomLevels||[];query('[name="ZoomLevels"]').value=e.join("; ")},e.addEvents=function(){query('[name="ZoomLevels"]').addEventListener("input",e.handleZoomLevelsChanged,!1),query('[name="ZoomLevels"]').addEventListener("blur",e.handleZoomLevelsBlur,!1)},e.exportSettings=function(){var t,n,o=l("viewer");if(o.ZoomLevels=e.getZoomLevels(),query('[name="ZoomLevels"]').checkValidity()){var a=null===(t=_pageSettings.config.ZoomLevels)||void 0===t?void 0:t.toString();(null===(n=o.ZoomLevels)||void 0===n?void 0:n.toString())===a&&delete o.ZoomLevels}else delete o.ZoomLevels;return o},e.handleZoomLevelsChanged=function(){var t=query('[name="ZoomLevels"]');e.getZoomLevels().some((function(e){return!Number.isFinite(e)}))?t.setCustomValidity("Value contains invalid characters. Only number, semi-colon are allowed."):t.setCustomValidity("")},e.handleZoomLevelsBlur=function(){var t=query('[name="ZoomLevels"]');t.checkValidity()&&(t.value=e.getZoomLevels().join("; "))},e.getZoomLevels=function(){return query('[name="ZoomLevels"]').value.split(";").map((function(e){return e.trim()})).filter(Boolean).map((function(e){return parseFloat(e)}))},e}();const T=function(){function e(){}return e.loadSettings=function(){},e.addEvents=function(){},e.exportSettings=function(){return l("toolbar")},e}();const q=function(){function e(){}return e.loadSettings=function(){},e.addEvents=function(){},e.exportSettings=function(){return l("gallery")},e}();const x=function(){function e(){}return e.loadSettings=function(){},e.addEvents=function(){},e.exportSettings=function(){return l("file_assocs")},e}();var B=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{u(o.next(e))}catch(e){r(e)}}function l(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((o=o.apply(e,t||[])).next())}))},I=function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&l[0]?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,o=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],o=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};const D=function(){function e(){}return e.loadSettings=function(){e.loadToolList()},e.addEvents=function(){var e=this;query("#Btn_AddTool").addEventListener("click",(function(){return B(e,void 0,void 0,(function(){var e;return I(this,(function(t){switch(t.label){case 0:return[4,(n="#Dialog_AddOrEditTool",void 0===r&&(r={}),o(void 0,void 0,void 0,(function(){var e;return a(this,(function(t){return(e=query(n)).addEventListener("click",(function(e){return o(void 0,void 0,void 0,(function(){var t,n;return a(this,(function(o){switch(o.label){case 0:return t=e.target,(n=t.getBoundingClientRect()).left>e.clientX||n.right<e.clientX||n.top>e.clientY||n.bottom<e.clientY?(t.classList.add("ani-shaking"),[4,i(500)]):[3,2];case 1:o.sent(),t.classList.remove("ani-shaking"),o.label=2;case 2:return[2]}}))}))}),!1),Object.keys(r).forEach((function(e){query('[name="_'.concat(e,'"]')).value=r[e]})),e.showModal(),[2,e]}))})))];case 1:return e=t.sent(),console.log(e),[2]}var n,r}))}))}),!1)},e.exportSettings=function(){var e=l("tools"),t=JSON.stringify(_pageSettings.toolList||[]),n=queryAll("#Table_ToolList > tbody > tr");return e.Tools=n.map((function(e){var t=e.getAttribute("data-tool-id"),n=e.getAttribute("data-tool-name"),o="true"===e.getAttribute("data-tool-integrated");e.getAttribute("data-tool-hotkey");return{ToolId:t,ToolName:n,IsIntegrated:o,Executable:e.getAttribute("data-tool-executable"),Arguments:e.getAttribute("data-tool-arguments")}})),JSON.stringify(e.Tools)===t&&delete e.Tools,e},e.loadToolList=function(t){var n=this;Array.isArray(t)&&t.length>0&&(_pageSettings.toolList=t);for(var o=_pageSettings.toolList||[],a=query("#Table_ToolList > tbody"),r="",i=0,l=o;i<l.length;i++){var c=l[i],s='<i lang-text="_._Empty"></i>';c.Arguments&&(s="<code>".concat(u(c.Arguments),"</code>")),r+='\n        <tr data-tool-id="'.concat(c.ToolId,'"\n          data-tool-name="').concat(c.ToolName,'"\n          data-tool-integrated="').concat(c.IsIntegrated,'"\n          data-tool-executable="').concat(c.Executable,'"\n          data-tool-arguments="').concat(c.Arguments,'">\n          <td class="cell-counter"></td>\n          <td class="cell-sticky text-nowrap">').concat(c.ToolId,'</td>\n          <td class="text-nowrap">').concat(c.ToolName,'</td>\n          <td lang-text="_.').concat(c.IsIntegrated?"_Yes":"_No",'"></td>\n          <td>\n            <kbd>Ctrl+S</kbd>\n          </td>\n          <td class="text-nowrap">\n            <code>').concat(u(c.Executable),'</code>\n          </td>\n          <td class="text-nowrap" style="--cell-border-right-color: transparent;">').concat(s,'</td>\n          <td class="cell-sticky-right text-nowrap" width="1" style="border-left: 0;">\n            <button type="button" class="px-1" lang-title="_._Edit" data-action="edit">✏️</button>\n            ').concat("Tool_ExifGlass"!==c.ToolId?'\n      <button type="button" class="px-1 ms-1" lang-title="_._Delete" data-action="delete">❌</button>\n    ':"","\n          </td>\n        </tr>\n      ")}a.innerHTML=r,g.load(),queryAll("#Table_ToolList button[data-action]").forEach((function(t){t.addEventListener("click",(function(t){return B(n,void 0,void 0,(function(){var n,o,a,r;return I(this,(function(i){switch(i.label){case 0:return n=t.target.getAttribute("data-action"),o=t.target.closest("tr"),a=o.getAttribute("data-tool-id"),"delete"!==n?[3,1]:(o.remove(),[3,3]);case 1:return"edit"!==n?[3,3]:[4,postAsync("Tool_Edit",a)];case 2:r=i.sent(),e.loadToolList(r),i.label=3;case 3:return[2]}}))}))}),!1)}))},e}();const M=function(){function e(){}return e.loadSettings=function(){},e.addEvents=function(){},e.exportSettings=function(){return l("layout")},e}();var P=function(){return P=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},P.apply(this,arguments)};const O=function(){function e(){}return e.load=function(){for(var t in e.loadSelectBoxEnums(),C.loadLanguageList(),_pageSettings.config)if(Object.prototype.hasOwnProperty.call(_pageSettings.config,t)){var n=_pageSettings.config[t];if("string"==typeof n||"number"==typeof n||"boolean"==typeof n){var o=query('[name="'.concat(t,'"]'));if(o){var a=o.tagName.toLowerCase();if("select"===a)o.value=n.toString();else if("input"===a){var r=o.getAttribute("type").toLowerCase(),i=o;if("radio"===r||"checkbox"===r)i.checked=Boolean(n);else if("color"===r){var l=n.toString()||"#00000000";i.value=l.substring(0,l.length-2)}else i.value=n.toString()}}}}m.loadSettings(),S.loadSettings(),_.loadSettings(),E.loadSettings(),A.loadSettings(),T.loadSettings(),q.loadSettings(),C.loadSettings(),L.loadSettings(),x.loadSettings(),D.loadSettings(),C.loadSettings(),v.loadSettings()},e.addEventsForFooter=function(){query("#BtnCancel").addEventListener("click",(function(){return post("BtnCancel")}),!1),query("#BtnOK").addEventListener("click",(function(){var t=e.getAllSettings(),n=JSON.stringify(t);e.updateInitSettings(t),post("BtnOK",n)}),!1),query("#BtnApply").addEventListener("click",(function(){var t=e.getAllSettings(),n=JSON.stringify(t);e.updateInitSettings(t),post("BtnApply",n)}),!1)},e.getAllSettings=function(){return P(P(P(P(P(P(P(P(P(P(P(P(P({},m.exportSettings()),S.exportSettings()),_.exportSettings()),E.exportSettings()),A.exportSettings()),T.exportSettings()),q.exportSettings()),M.exportSettings()),L.exportSettings()),x.exportSettings()),D.exportSettings()),C.exportSettings()),v.exportSettings())},e.updateInitSettings=function(e){Object.keys(e).forEach((function(t){_pageSettings.config.hasOwnProperty(t)&&(_pageSettings.config[t]=e[t])}))},e.loadSelectBoxEnums=function(){var e=function(e){if(!Object.prototype.hasOwnProperty.call(_pageSettings.enums,e))return"continue";for(var t=_pageSettings.enums[e],n=function(n){t.forEach((function(t){var o=new Option("".concat(t),t);o.setAttribute("lang-text","_.".concat(e,"._").concat(t)),n.add(o)}))},o=0,a=queryAll('select[data-enum="'.concat(e,'"]'));o<a.length;o++){n(a[o])}};for(var t in _pageSettings.enums)e(t)},e}();return window._webview=new n,_webview.startListening(),window.query=function(e){try{return document.querySelector(e)}catch(e){}return null},window.queryAll=function(e){try{return Array.from(document.querySelectorAll(e))}catch(e){}return[]},window.on=d,window.post=function(e,t){var n;null===(n=window.chrome.webview)||void 0===n||n.postMessage({name:e,data:t})},window.postAsync=function(e,t){return c(void 0,void 0,void 0,(function(){var n,o,a;return s(this,(function(r){switch(r.label){case 0:n=!1,o=null,d(e,(function(t,a){t===e&&(n=!0,o=a,_webview.removeEvent(e))})),null===(a=window.chrome.webview)||void 0===a||a.postMessage({name:e,data:t}),r.label=1;case 1:return n?[3,3]:[4,i(100)];case 2:return r.sent(),[3,1];case 3:return[2,o]}}))}))},window._pageSettings||(window._pageSettings={initTab:"tools",config:{},lang:{},langList:[],toolList:[{ToolId:"Tool_ExifGlass",ToolName:"ExifGlass - EXIF metadata viewer",Executable:"D:\\_GITHUB\\@d2phap\\ExifGlass\\Source\\ExifGlass\\bin\\x64\\Debug\\net7.0\\ExifGlass.exe",Arguments:"",IsIntegrated:!0},{ToolId:"Tool_DemoApp",ToolName:"Demo app",Executable:"D:\\_GITHUB\\@imageglass\\ImageGlass.Tools\\Source\\DemoApp\\bin\\Debug\\net7.0-windows\\DemoApp.exe",Arguments:"",IsIntegrated:!0}],themeList:[],enums:{ImageOrderBy:[],ImageOrderType:[],ColorProfileOption:[],AfterEditAppAction:[],ImageInterpolation:[],MouseWheelAction:[],MouseWheelEvent:[],MouseClickEvent:[],BackdropStyle:[],ToolbarItemModelType:[]},startUpDir:"",configDir:"",userConfigFilePath:"",defaultThemeDir:""}),_pageSettings.setSidebarActiveMenu=p.setActiveMenu,_pageSettings.loadLanguage=g.load,_pageSettings.loadSettings=O.load,_pageSettings.loadLanguageList=C.loadLanguageList,p.addEvents(),O.load(),g.load(),O.addEventsForFooter(),m.addEvents(),S.addEvents(),_.addEvents(),E.addEvents(),A.addEvents(),T.addEvents(),q.addEvents(),C.addEvents(),L.addEvents(),x.addEvents(),D.addEvents(),C.addEvents(),v.addEvents(),p.setActiveMenu(_pageSettings.initTab),t})()));