{"version":3,"file":"FrmSettings.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,QAAS,GAAIH,GACM,iBAAZC,QACdA,QAAQ,SAAWD,IAEnBD,EAAK,SAAWC,GACjB,CATD,CASGK,MAAM,I,mBCRT,IAAIC,EAAsB,CCA1BA,EAAyBL,IACH,oBAAXM,QAA0BA,OAAOC,aAC1CC,OAAOC,eAAeT,EAASM,OAAOC,YAAa,CAAEG,MAAO,WAE7DF,OAAOC,eAAeT,EAAS,aAAc,CAAEU,OAAO,GAAO,G,YCJ/C,MAAMC,EAInBC,cACE,IAAK,MAAMC,KAAWC,cAAcC,KAAM,CACxC,IAAKP,OAAOQ,UAAUC,eAAeC,KAAKJ,cAAcC,KAAMF,GAC5D,SAGF,MAAMM,EAAYL,cAAcC,KAAKF,GAErCO,SAAS,eAAeP,OAAaQ,SAAQC,IAC3CA,EAAGC,UAAYJ,CAAS,IAG1BC,SAAS,gBAAgBP,OAAaQ,SAAQC,IAC5CA,EAAGE,MAAQL,CAAS,IAGtBC,SAAS,eAAeP,OAAaQ,SAAQC,IAC3C,IAAIG,EAAON,EAEX,IAAK,IAAIO,EAAI,EAAGA,EAAIJ,EAAGK,kBAAmBD,IACxCD,EAAOA,EAAKG,WAAW,IAAIF,KAAMJ,EAAGO,SAASC,KAAKJ,GAAGK,WAGvDT,EAAGU,UAAYP,CAAI,G,CAGzB,ECtBK,MAAMQ,EAAQ,CAAIC,EAAcC,IAAyB,IAAIC,SAASC,IAC3EC,YAAW,IAAMD,EAAQF,IAAYD,EAAK,IAO/BK,EAA6BC,IACxC,MAAMC,EAA8B,CAAC,EAG/BC,EAAS,IAFEtB,SAA2B,SAASoB,sBACnCpB,SAA4B,SAASoB,qBAGvD,IAAK,MAAMlB,KAAMoB,EAAQ,CACvB,MAAMC,EAAarB,EAAGsB,KACtB,IAAIC,EAAyC,GACzCvB,EAAGsB,KAAKE,WAAW,MAClBxB,EAAGyB,kBAKNF,EADc,aAAZvB,EAAG0B,KACU1B,EAAwB2B,QAGpB,WAAZ3B,EAAG0B,MACK1B,EAAGZ,MAIJY,EAAGZ,MAGfmC,IAAgB/B,cAAcoC,OAAOP,KACvCF,EAAOE,GAAcE,G,CAIzB,OAAOJ,CAAM,EAOFU,EAAc1B,GAClBA,EACJ2B,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UASNC,EAAkBC,MAC7BC,EACAC,EACArB,EAA4B,CAAC,EAC7BsB,EACAC,KACA,IAAIC,GAAW,EACf,MAAMC,EAAWC,MAAyBN,GAyC1C,IAxCAK,EAASE,UAAUC,OAAO,iBAAkB,gBAC5CH,EAASE,UAAUE,IAAI,WAAWR,KAGlCI,EAASK,iBAAiB,SAASX,MAAOY,IACxC,MAAM5C,EAAK4C,EAAEC,OACPC,EAAO9C,EAAG+C,yBAGZD,EAAKE,KAAOJ,EAAEK,SACbH,EAAKI,MAAQN,EAAEK,SACfH,EAAKK,IAAMP,EAAEQ,SACbN,EAAKO,OAAST,EAAEQ,WAEnBpD,EAAGwC,UAAUE,IAAI,qBACX/B,EAAM,KACZX,EAAGwC,UAAUC,OAAO,e,IAErB,GAGHH,EAASK,iBAAiB,SAAS,IAAMN,GAAW,IAAM,GAG1DE,MAAuB,GAAGN,YAAmBU,iBAAiB,UAAUX,MAAOY,IACzER,SAAgBtB,QAAQC,QAAQqB,EAASQ,GAAG,IAGlDU,QAAQC,IAAI1C,GACZ3B,OAAOsE,KAAK3C,GAAMd,SAAQ0D,IACxB,MAAMC,EAAUnB,MAAwB,GAAGN,aAAoBwB,OAC3DC,IAASA,EAAQtE,MAAQyB,EAAK4C,GAAI,IAIpCtB,SAAcrB,QAAQC,QAAQoB,EAAOG,IAGzCA,EAASqB,aAEDtB,SACA1B,EAAM,KAGd,OAAO2B,CAAQ,EAgCJsB,EAAmB5B,MAC9B6B,EACAC,EACAC,KAEA,MAAMC,EAAOzB,MAAMsB,GACnB,IAAII,EAAS,GAGb,IAAK,MAAMR,KAAOK,EAChBG,GAAU,8CAEDR,gHAEHjE,cAAc0E,MAAMC,qCAM5BF,GAAU,8GAIVD,EAAKtD,UAAYuD,EACjB5E,EAAS+E,OAGTtE,SAA4B,GAAG+D,yBAAkC9D,SAAQC,IACvEA,EAAG2C,iBAAiB,SAASX,UAC3B,MAAMqC,EAASrE,EAAGsE,aAAa,eAE/B,GAAe,WAAXD,EAAqB,CACvB,MAAME,EAAevE,EAAGwE,QAAQ,gBAChCD,GAAc9B,eACR3B,QAAQC,QAAQgD,EAASM,G,MAE5B,GAAe,QAAXA,EAAkB,CACzB,MAAMI,OAlDkBzC,gBACT0C,UAAkB,oBAiDZC,GACrB,GAAe,OAAXF,EAAiB,OAErBb,EAAiBC,EAAY,IAAIC,EAASW,GAASV,SAC7CjD,QAAQC,QAAQgD,EAASM,G,KAEhC,EAAM,GACT,ECnKSO,EAAK,CAACtD,EAAcuD,KAC/BC,SAASC,SAASzD,EAAMuD,EAAQ,EChCnB,MAAMG,EAInB1F,sBACE0F,EAAcC,gBACdD,EAAcE,sBACdF,EAAcG,+BACdH,EAAcI,uCAChB,CAMA9F,6BACE,MAAM+F,EAAY9C,MAAwB,sBAAsBnD,MAC1DkG,EAAa/C,MAAwB,uBAAuBnD,MAE5DmG,EAAShD,MAAwB,qCAAqC8C,OACtEG,EAAUjD,MAAwB,sCAAsC+C,OAC1EC,IAAQA,EAAO5D,SAAU,GACzB6D,IAASA,EAAQ7D,SAAU,EACjC,CAMArC,mBACEiD,MAAM,6BAA6BI,iBAAiB,QAASqC,EAAcS,sBAAsB,GACjGlD,MAAM,sCAAsCI,iBAAiB,QAASqC,EAAcU,+BAA+B,GAEnHnD,MAAM,wBAAwBI,iBAAiB,SAASX,UACtD,MAAM2D,EAAUpD,MAAwB,4BAClCqD,QAAmBlB,UAAkB,sBAAuBiB,EAAQvG,OAEtEwG,IACFD,EAAQvG,MAAQwG,EAChBZ,EAAcG,+B,IAEf,GACH5C,MAAM,iCAAiCI,iBAAiB,SAASX,UAC/D,MAAM2D,EAAUpD,MAAwB,qCAClCqD,QAAmBlB,UAAkB,+BAAgCiB,EAAQvG,OAE/EwG,IACFD,EAAQvG,MAAQwG,EAChBZ,EAAcI,wC,IAEf,GAEH7C,MAAM,qBAAqBI,iBAAiB,SAASX,UACnD,MAAM6D,QAAqBnB,UAAoB,oBAC/CM,EAAcC,cAAcY,EAAa,IACxC,GAEHtD,MAAM,yBAAyBI,iBAAiB,SAASX,UACvD,MAAM6D,QAAqBnB,UAAoB,wBAC/CM,EAAcC,cAAcY,EAAa,IACxC,GAEHtD,MAAM,wBAAwBI,iBAAiB,SAAS,IAAMmD,KAAK,yBAAwB,EAC7F,CAMAxG,wBACE,MAAMyG,EAAW9E,EAA0B,cAc3C,OAXA8E,EAASC,UAAYzD,MAAwB,sBAAsBnD,MAC/D2G,EAASC,YAAcxG,cAAcoC,OAAOoE,kBACvCD,EAASC,UAIlBD,EAASE,WAAa1D,MAAwB,uBAAuBnD,MACjE2G,EAASE,aAAezG,cAAcoC,OAAOqE,mBACxCF,EAASE,WAGXF,CACT,CAMQzG,qBAAqB4G,GACvBC,MAAMC,QAAQF,IAASA,EAAKG,OAAS,IACvC7G,cAAc8G,UAAYJ,GAE5B,MAAMI,EAAY9G,cAAc8G,WAAa,GAEvCtC,EAAOzB,MAAwB,mBACrC,IAAI0B,EAAS,GAEb,IAAK,MAAMsC,KAAMD,EAAW,CA4D1BrC,GA3De,oJAIiCsC,EAAGC,2CAC7BD,EAAGE,sBAAsBF,EAAGG,KAAKC,mFACnBJ,EAAGK,WAAa,aAAe,4EACdL,EAAGK,WAAa,aAAe,sCACtEL,EAAGK,WAAa,KAAO,kKAKOL,EAAGG,KAAKC,WAAWJ,EAAGG,KAAKG,uDAClCN,EAAGG,KAAKC,4DACLJ,EAAGG,KAAKG,6FAEAN,EAAGG,KAAKI,gBAAgBP,EAAGG,KAAKI,0GAE1CP,EAAGG,KAAKK,wHAEhCR,EAAGG,KAAKK,QAAU,2EAEMR,EAAGG,KAAKM,kGAEhCT,EAAGG,KAAKM,SAAW,8DAERT,EAAGG,KAAKO,4FAEnBV,EAAGG,KAAKO,OAAS,8PAKmCV,EAAGW,iEAErD1H,cAAc0E,MAAMiD,wTAK+BZ,EAAGW,iEAEtD1H,cAAc0E,MAAMkD,2RAOtB5H,cAAc6H,kBAAoBd,EAAGC,WAAa,yCAA2C,4CAC1ED,EAAGC,mCACtBhH,cAAc0E,MAAMC,8G,CAUpCH,EAAKtD,UAAYuD,EACjB5E,EAAS+E,OACTY,EAAcE,sBAEdpF,SAA2B,8BAA8BC,SAAQC,IAC/DA,EAAG2C,iBAAiB,UAAWC,IAC7B,MAAM0E,EAAa1E,EAAEC,OAA4BzD,MACjDmD,MAAwB,sBAAsBnD,MAAQkI,CAAS,IAC9D,EAAM,IAGXxH,SAA2B,+BAA+BC,SAAQC,IAChEA,EAAG2C,iBAAiB,UAAWC,IAC7B,MAAM0E,EAAa1E,EAAEC,OAA4BzD,MACjDmD,MAAwB,uBAAuBnD,MAAQkI,CAAS,IAC/D,EAAM,IAGXxH,SAA4B,uBAAuBC,SAAQC,IACzDA,EAAG2C,iBAAiB,SAASX,MAAOY,IAClC,MAAM2E,EAAY3E,EAAEC,OAA6ByB,aAAa,qBAExDuB,QAAqBnB,UAAoB,oBAAqB6C,GACpEvC,EAAcC,cAAcY,EAAa,IACxC,EAAM,GAEb,CAMQvG,8BACN,MACMkI,EADqE,UAAxDC,SAASC,gBAAgBpD,aAAa,cACnB9E,cAAcoC,OAAOoE,UAAYxG,cAAcoC,OAAOqE,WACtF0B,EAAQnI,cAAc8G,UAAUsB,MAAKxH,GAAKA,EAAE8G,aAAeM,IACjE,IAAKG,EAAO,OAEZ,MAAME,EAAWF,EAAMG,SAAW,YAElCvF,MAAwB,4BAA4BnD,MAAQyI,EAC5D7C,EAAcG,8BAChB,CAMQ7F,uCACNiD,MAAwB,qCAAqCnD,MAAQ,UACrE4F,EAAcI,uCAChB,CAMQ9F,sCACN,MAAMuI,EAAWtF,MAAwB,4BAA4BnD,MAChEyI,IAELtF,MAAwB,yCAAyCwF,MAAMC,YAAY,uBAAwBH,GAC3GtF,MAAM,6BAA6BtC,UAAY4H,EACjD,CAMQvI,+CACN,MAAMuI,EAAWtF,MAAwB,qCAAqCnD,MACzEyI,IAELtF,MAAwB,kDAAkDwF,MAAMC,YAAY,uBAAwBH,GACpHtF,MAAM,sCAAsCtC,UAAY4H,EAC1D,EChPa,MAAMI,EAInB3I,mBAEE,MAAM4I,EAAW/B,MAAMgC,KAAKV,SAASW,iBAAiB,sBACtD,IAAK,IAAIhI,EAAI,EAAGA,EAAI8H,EAAS7B,OAAQjG,IAAK,CACzB8H,EAAS9H,GAEjBuC,iBAAiB,UAAWC,IACjC,MAAMyF,EAAiBzF,EAAEC,OAA4BzD,MACrD6I,EAAQK,cAAcD,EAAc,IACnC,E,CAEP,CAMA/I,qBAAqBiJ,GACnBA,IAAgB,UAEhB,MAAMC,EAAYjG,MAAM,kBAAkBgG,OAC1C,IAAKC,EAAW,OAGI1I,SAAS,aACjBC,SAAQC,GAAMA,EAAGwC,UAAUC,OAAO,YAG9C+F,EAAUhG,UAAUE,IAAI,UAGJ5C,SAAS,uBACjBC,SAASS,GAA2BA,EAAKmB,SAAU,IAC/D,MAAM8G,EAAUlG,MAAM,8BAA8BgG,OAChDE,IAASA,EAAQ9G,SAAU,GAEX,eAAhB4G,GACFvD,EAAcE,sBAIhBY,KAAK,kBAAmByC,EAC1B,EC9Ca,MAAMG,EACAC,yCACjB,MAA2C,MAApCnJ,cAAcoC,OAAOgH,UAC9B,CAKAtJ,sBACEiD,MAAM,mBAAmBrC,MAAQV,cAAcqJ,YAAc,YAC7DtG,MAAM,kBAAkBrC,MAAQV,cAAcsJ,WAAa,YAC3DvG,MAAM,uBAAuBrC,MAAQV,cAAcuJ,oBAAsB,YAGzExG,MAAwB,uBAAuBZ,QAAU+G,EAAWC,2BACtE,CAMArJ,mBACEiD,MAAM,mBAAmBI,iBAAiB,SAAS,IAAMmD,KAAK,iBAAkBtG,cAAcqJ,cAAa,GAC3GtG,MAAM,kBAAkBI,iBAAiB,SAAS,IAAMmD,KAAK,gBAAiBtG,cAAcsJ,aAAY,GACxGvG,MAAM,uBAAuBI,iBAAiB,SAAS,IAAMmD,KAAK,qBAAsBtG,cAAcuJ,sBAAqB,EAC7H,CAMAzJ,wBACE,MAAMyG,EAAW9E,EAA0B,WAa3C,OAVuD,IAAxB8E,EAAS6C,aACTF,EAAWC,4BACxC5C,EAAS6C,WAAa7C,EAAS6C,YAC3B,IAAII,MAAOC,cACX,WAGGlD,EAAS6C,WAGX7C,CACT,EC9Ca,MAAMmD,EAInB5J,sBACE,MAAM6J,EAAgB3J,cAAcoC,OAAOwH,cAA0B,GACjED,EAAaE,SAAS,OACxB9G,MAAyB,yBAAyBnD,MAAQ,SAC1DmD,MAAM,2BAA2BtC,UAAYkJ,GAG/CD,EAASI,4BACTJ,EAASK,0CACX,CAMAjK,mBACEiD,MAAM,2BAA2BI,iBAAiB,SAASX,UACzD,MAAMwH,QAAwB9E,UAAkB,0BAChDnC,MAAM,2BAA2BtC,UAAYuJ,CAAe,IAC3D,GAEHjH,MAAM,2BAA2BI,iBAAiB,SAAS,KACzD,MAAM6G,EAAkBjH,MAAM,2BAA2BtC,UAAUwJ,OACnE3D,KAAK,yBAA0B0D,EAAgB,IAC9C,GAEHjH,MAAM,yBAAyBI,iBAAiB,SAAUuG,EAASI,2BAA2B,GAE9F/G,MAAM,2CAA2CI,iBAAiB,QAASuG,EAASK,0CAA0C,GAC9HhH,MAAM,6CAA6CI,iBAAiB,QAASuG,EAASK,0CAA0C,EAClI,CAMAjK,wBACE,MAAMyG,EAAW9E,EAA0B,SAG3C8E,EAAS2D,yBAA2B3D,EAAS2D,wBAA0B,GACnE3D,EAAS2D,yBAA2BlK,cAAcoC,OAAO8H,+BACpD3D,EAAS2D,uBAKlB,MAAMC,EAAuBnK,cAAcoC,OAAOwH,aAQlD,MAP8B,WAA1BrD,EAASqD,eACXrD,EAASqD,aAAe7G,MAAM,2BAA2BtC,UAAUwJ,QAEhE1D,EAASqD,cAAgBrD,EAASqD,eAAiBO,UAC/C5D,EAASqD,aAGXrD,CACT,CAMAzG,mCACE,MACMsK,EAAsC,WAD3BrH,MAAyB,yBACRnD,MAElCmD,MAAM,2BAA2BsH,QAAUD,EAC3CrH,MAAM,+BAA+BsH,QAAUD,CACjD,CAMAtK,kDACE,MAAMwK,EAAevH,MAAwB,2CAA2CZ,QAClFoI,EAAkBxH,MAAwB,6CAA6CZ,QACvFqI,EAAkBF,GAAgBC,EAExCxH,MAAM,kCAAkCsH,QAAUG,CACpD,ECpFa,MAAMC,EAInB3K,sBACE2K,EAAaC,6CACbD,EAAaE,iCACf,CAMA7K,mBACEiD,MAAM,0CAA0CI,iBAAiB,QAASsH,EAAaC,4CAA4C,GACnI3H,MAAM,8BAA8BI,iBAAiB,QAASsH,EAAaE,iCAAiC,GAC5G5H,MAAM,gCAAgCI,iBAAiB,QAASsH,EAAaE,iCAAiC,EAChH,CAMA7K,wBACE,OAAO2B,EAA0B,YACnC,CAMQ3B,yCACN,MAAM8K,EAAS7H,MAAwB,8BACjC8H,EAAO9H,MAAwB,gCAErC6H,EAAOE,IAAMD,EAAKjL,MAClBiL,EAAKE,IAAMH,EAAOhL,MAElB,MAAMoL,GAAgBJ,EAAOhL,OAAS,EAChCqL,GAAcJ,EAAKjL,OAAS,EAC5BsL,EAAmBT,EAAaU,aAAaH,GAC7CI,EAAiBX,EAAaU,aAAaF,GAE3CI,EAAoBtI,MAAwB,0CAA0CZ,QAG1FY,MAAM,0BAA0BtC,UAD9B4K,EAC0C,GAAGH,OAAsBE,IAGzBF,CAEhD,CAMQpL,oDACN,MAAMuL,EAAoBtI,MAAwB,0CAA0CZ,QAE5FY,MAAM,8BAA8BsH,QAAUgB,EAC9CtI,MAAM,gCAAgCsH,QAAUgB,CAClD,CAMQvL,oBAAoBwL,GAC1B,MAAMC,EAAK,IAAI/B,KAAoB,IAAf8B,GACpB,IAAIE,EAAUD,EAAGE,gBAAgBC,WAC7BC,EAAUJ,EAAGK,gBAAgBF,WACjC,MAAMG,EAAYN,EAAGO,qBAAqBJ,WAK1C,OAHIF,EAAQ3E,OAAS,IAAG2E,EAAU,IAAIA,KAClCG,EAAQ9E,OAAS,IAAG8E,EAAU,IAAIA,KAE/B,GAAGH,KAAWG,KAAWE,GAClC,EC9Ea,MAAME,EAInBjM,sBACEiD,MAAyB,0BAA0BnD,MAAQI,cAAcoC,OAAO4J,mBAAmBC,QAAU,YAC7GlJ,MAAyB,iCAAiCnD,MAAQI,cAAcoC,OAAO4J,mBAAmBE,eAAiB,YAC3HnJ,MAAyB,kCAAkCnD,MAAQI,cAAcoC,OAAO4J,mBAAmBG,gBAAkB,YAC7HpJ,MAAyB,gCAAgCnD,MAAQI,cAAcoC,OAAO4J,mBAAmBI,cAAgB,WAC3H,CAMAtM,mBACEiD,MAAM,8BAA8BI,iBAAiB,QAAS4I,EAAiBM,+BAA+B,EAChH,CAMAvM,wBACE,MAAMyG,EAAW9E,EAA0B,kBAGrC6K,EAAsBvJ,MAAyB,0BAA0BnD,MACzE2M,EAA6BxJ,MAAyB,iCAAiCnD,MACvF4M,EAA8BzJ,MAAyB,kCAAkCnD,MACzF6M,EAA4B1J,MAAyB,gCAAgCnD,MAErF8M,EAA4C,CAAC,EAqBnD,OApBIJ,IAAwBtM,cAAcoC,OAAO4J,mBAAmBC,SAClES,EAAkBT,OAASK,GAEzBC,IAA+BvM,cAAcoC,OAAO4J,mBAAmBE,gBACzEQ,EAAkBR,cAAgBK,GAEhCC,IAAgCxM,cAAcoC,OAAO4J,mBAAmBG,iBAC1EO,EAAkBP,eAAiBK,GAEjCC,IAA8BzM,cAAcoC,OAAO4J,mBAAmBI,eACxEM,EAAkBN,aAAeK,GAG/B/M,OAAOsE,KAAK0I,GAAmB7F,OAAS,EAC1CN,EAASyF,kBAAoBU,SAGtBnG,EAASyF,kBAGXzF,CACT,CAMQzG,uCACNiD,MAAyB,0BAA0BnD,MAAQ,OAC3DmD,MAAyB,iCAAiCnD,MAAQ,gBAClEmD,MAAyB,kCAAkCnD,MAAQ,kBACnEmD,MAAyB,gCAAgCnD,MAAQ,cACnE,EChEa,MAAM+M,EAInB7M,sBACE6M,EAAYC,uBACd,CAMA9M,mBACEiD,MAAM,qBAAqB8J,oBAAoB,SAAUF,EAAYC,uBAAuB,GAC5F7J,MAAM,4BAA4B8J,oBAAoB,QAASF,EAAYG,2BAA2B,GACtG/J,MAAM,wBAAwB8J,oBAAoB,QAASF,EAAYI,uBAAuB,GAE9FhK,MAAM,qBAAqBI,iBAAiB,SAAUwJ,EAAYC,uBAAuB,GACzF7J,MAAM,4BAA4BI,iBAAiB,QAASwJ,EAAYG,2BAA2B,GACnG/J,MAAM,wBAAwBI,iBAAiB,QAASwJ,EAAYI,uBAAuB,EAC7F,CAGQjN,yCACN,MAAMkN,QAAoB9H,UAAuB,2BACjDyH,EAAYM,iBAAiBD,EAC/B,CAGQlN,qCACN,MAAMkN,QAAoB9H,UAAuB,uBACjDyH,EAAYM,iBAAiBD,EAC/B,CAMAlN,wBACE,OAAO2B,EAA0B,WACnC,CAMQ3B,+BACN,MAAMoN,EAAenK,MAAyB,qBAAqBnD,MAC7DK,EAAOD,cAAcmN,SAAS/E,MAAKxH,GAAKA,EAAEwM,WAAaF,IACxDjN,IAEL8C,MAAM,iCAAiCtC,UAAYR,EAAKoN,SAAS9F,OACnE,CAOAzH,wBAAwB4G,GACtB,MAAM4G,EAAWvK,MAAyB,qBAG1C,KAAOuK,EAASC,QAAQ1G,QAAQyG,EAASrK,OAAO,GAE5C0D,MAAMC,QAAQF,IAASA,EAAKG,OAAS,IACvC7G,cAAcmN,SAAWzG,GAG3B1G,cAAcmN,SAAS5M,SAAQN,IAC7B,IAAIuN,EAAc,GAAGvN,EAAKoN,SAASI,cAAcxN,EAAKoN,SAASK,eAC1DzN,EAAKmN,UAAqC,IAAzBnN,EAAKmN,SAASvG,SAClC2G,EAAcvN,EAAKoN,SAASK,aAG9B,MAAMC,EAAW,IAAIC,OAAOJ,EAAavN,EAAKmN,UAC9CE,EAASpK,IAAIyK,EAAS,IAGxBL,EAAS1N,MAAQI,cAAcoC,OAAOvC,SACtC8M,EAAYC,uBACd,EClFa,MAAMiB,EAInB/N,sBACA,CAMAA,mBACA,CAMAA,wBACE,OAAO2B,EAA0B,OACnC,ECpBa,MAAMqM,EAInBhO,sBACE,MAAMiO,EAAa/N,cAAcoC,OAAO4L,YAA0B,GAClEjL,MAA2B,uBAAuBnD,MAAQmO,EAAWE,KAAK,KAC5E,CAMAnO,mBACEiD,MAAM,uBAAuBI,iBAAiB,QAAS2K,EAAUI,yBAAyB,GAC1FnL,MAAM,uBAAuBI,iBAAiB,OAAQ2K,EAAUK,sBAAsB,EACxF,CAMArO,wBACE,MAAMyG,EAAW9E,EAA0B,UAK3C,GAFA8E,EAASyH,WAAaF,EAAUM,gBAE5BrL,MAA2B,uBAAuBd,gBAAiB,CACrE,MAAMoM,EAAuBrO,cAAcoC,OAAO4L,YAAYtC,WACxD4C,EAAkB/H,EAASyH,YAAYtC,WAEzC4C,IAAoBD,UACf9H,EAASyH,U,aAIXzH,EAASyH,WAGlB,OAAOzH,CACT,CAMQzG,iCACN,MAAMU,EAAKuC,MAA2B,uBACvB+K,EAAUM,gBAGdG,MAAK3N,IAAM4N,OAAOC,SAAS7N,KACpCJ,EAAGkO,kBAAkB,2EAGrBlO,EAAGkO,kBAAkB,GAEzB,CAMQ5O,8BACN,MAAMU,EAAKuC,MAA2B,uBACjCvC,EAAGyB,kBAERzB,EAAGZ,MAAQkO,EAAUM,gBAAgBH,KAAK,MAC5C,CAMQnO,uBAKN,OAJWiD,MAA2B,uBACpBnD,MAAM+O,MAAM,KAAKC,KAAIhO,GAAKA,EAAEqJ,SAAQ4E,OAAOC,SAC1DF,KAAIhO,GAAKmO,WAAWnO,IAGzB,ECjFa,MAAMoO,EAInBlP,sBACA,CAMAA,mBACA,CAMAA,wBACE,OAAO2B,EAA0B,UACnC,ECpBa,MAAMwN,EAInBnP,sBACA,CAMAA,mBACA,CAMAA,wBACE,OAAO2B,EAA0B,UACnC,ECpBa,MAAMyN,EAInBpP,sBACA,CAMAA,mBACA,CAMAA,wBACE,OAAO2B,EAA0B,cACnC,ECXF,MAAqB0N,EACXrP,wBAA0B,IAKlCA,sBACEqP,EAASC,cACX,CAMAtP,mBACEiD,MAAM,gBAAgBI,iBAAiB,SAASX,UAC9C,MAAM6M,EAAc,CAClBC,OAAQ,GACRC,SAAU,GACVC,WAAY,GACZC,UAAWzP,cAAc0P,WACzBC,QAAS,GACTC,cAAc,SAGVrN,EAAgB,wBAAyB,SAAU8M,GAAa7M,UACpE2M,EAASU,yBACTV,EAASW,iCAEH1L,EAAiB,qCAAsCiL,EAAYM,SACvE,IAAMR,EAASW,4BAA2B,IAG9C,MAAMC,EAAOZ,EAASa,wBACtBb,EAASc,kBAAkBF,EAAKT,OAAQS,EAAK,IAC5C,EACL,CAMAjQ,wBACE,MAAMyG,EAAW9E,EAA0B,SACrCyO,EAAuBC,KAAKC,UAAUpQ,cAAcqQ,UAAY,IAEtE9J,EAAS+J,MAAQnB,EAASoB,qBAO1B,OANwBJ,KAAKC,UAAU7J,EAAS+J,SAExBJ,UACf3J,EAAS+J,MAGX/J,CACT,CAMQzG,oBAAoB4G,GAC1B,MAAM2J,EAAoB3J,GAAQ1G,cAAcqQ,UAAY,GAEtDG,EAAUzN,MAAwB,2BACxC,IAAI0N,EAAY,GAChB,MAAMC,EAAgB,mHAEhB1Q,cAAc0E,MAAMC,gCAI1B,IAAK,MAAM3D,KAAQqP,EAAU,CAC3B,IAAIM,EAAO,+BACP3P,EAAKyO,YACPkB,EAAO,SAAStO,EAAWrB,EAAKyO,qBAGlC,MAAMmB,EAAoB,qFAEkC,IAAtB5P,EAAK4O,aAAwB,UAAY,yDAgC/Ea,GA3Be,+BACOzP,EAAKsO,sCACLtO,EAAKuO,8CACCvO,EAAK4O,kDACL5O,EAAKwO,+CACNxO,EAAKyO,6CACNzO,EAAK2O,SAAW,IAAI1B,KAAKkB,EAAS0B,gHAElB7P,EAAKsO,kDACjBtO,EAAKuO,oDACLqB,iIAKhBvO,EAAWrB,EAAKwO,0HAEgDmB,oNAGpE3Q,cAAc0E,MAAMoM,4CAEN,mBAAhB9P,EAAKsO,OAA8BoB,EAAgB,4C,CAQ7DF,EAAQtP,UAAYuP,EACpB5Q,EAAS+E,OAETtE,SAA4B,uCAAuCC,SAAQC,IACzEA,EAAG2C,iBAAiB,SAASX,MAAOY,IAClC,MAAMyB,EAAUzB,EAAEC,OAA4ByB,aAAa,eACrDiM,EAAQ3N,EAAEC,OAA4B2B,QAAQ,MAC9CgM,EAASD,EAAKjM,aAAa,gBAElB,WAAXD,EACFkM,EAAK9N,SAEa,SAAX4B,GACPsK,EAAS8B,SAASD,E,IAEnB,EAAM,GAEb,CAMQlR,4BAsBN,OArBcQ,SAA8B,gCACrBsO,KAAIpO,IAUlB,CACL8O,OAVa9O,EAAGsE,aAAa,iBAAmB,GAWhDyK,SAVe/O,EAAGsE,aAAa,mBAAqB,GAWpD8K,aAViE,SAA5CpP,EAAGsE,aAAa,wBAWrC0K,WAVqBhP,EAAGsE,aAAa,yBAA2B,GAWhE2K,UAVoBjP,EAAGsE,aAAa,wBAA0B,GAW9D6K,SATiBnP,EAAGsE,aAAa,sBAAwB,IAC5B6J,MAAMQ,EAAS0B,kBAAkBhC,OAAOC,YAa3E,CAOQhP,sBAAsBkR,GAC5B,MAAMD,EAAOhO,MAA2B,oCAAoCiO,OAGtEE,GADaH,EAAKjM,aAAa,sBAAwB,IAC9B6J,MAAMQ,EAAS0B,kBAAkBhC,OAAOC,SAEvE,IAAIiB,EAAc,CAChBT,OAAQ0B,EACRzB,SAAUwB,EAAKjM,aAAa,mBAAqB,GACjD0K,WAAYuB,EAAKjM,aAAa,yBAA2B,GACzD2K,UAAWsB,EAAKjM,aAAa,wBAA0B,GACvD8K,aAA4D,SAA9CmB,EAAKjM,aAAa,wBAChC6K,QAASuB,SAIL3O,EAAgB,wBAAyB,OAAQwN,GAAMvN,UAC3DO,MAAwB,0BAA0BZ,QAAU4N,EAAKH,eAAgB,EACjFT,EAASU,yBACTV,EAASW,iCAEH1L,EAAiB,qCAAsC2L,EAAKJ,SAChE,IAAMR,EAASW,4BAA2B,IAG9CC,EAAOZ,EAASa,wBAChBb,EAASc,kBAAkBe,EAAQjB,EACrC,CAMQjQ,+BAWN,MAToB,CAClBwP,OAAQvM,MAAwB,0CAA0CnD,MAAMqK,OAChFsF,SAAUxM,MAAwB,4CAA4CnD,MAAMqK,OACpFuF,WAAYzM,MAAwB,8CAA8CnD,MAAMqK,OACxFwF,UAAW1M,MAAwB,6CAA6CnD,MAAMqK,OACtF0F,QAAS,GACTC,aAAc7M,MAAwB,gDAAgDZ,QAI1F,CAOQrC,yBAAyBqR,EAAmBpB,GAClD,IAAKA,EAAKT,SAAWS,EAAKR,WAAaQ,EAAKP,WAAY,OACxD,MAAMa,EAAWlB,EAASoB,qBACpBa,EAAYf,EAASgB,WAAUzQ,GAAKA,EAAE0O,SAAW6B,KAGpC,IAAfC,EACFf,EAASe,GAAarB,EAItBM,EAASiB,KAAKvB,GAGhBZ,EAASC,aAAaiB,EACxB,CAGQvQ,gCACNiD,MAAM,wBAAwB8J,oBAAoB,QAASsC,EAASW,0BAA0B,GAC9F/M,MAAM,wBAAwBI,iBAAiB,QAASgM,EAASW,0BAA0B,GAE3F/M,MAAM,uBAAuB8J,oBAAoB,QAASsC,EAASW,0BAA0B,GAC7F/M,MAAM,uBAAuBI,iBAAiB,QAASgM,EAASW,0BAA0B,GAE1F/M,MAAM,kBAAkB8J,oBAAoB,QAASsC,EAASoC,+BAA+B,GAC7FxO,MAAM,kBAAkBI,iBAAiB,QAASgM,EAASoC,+BAA+B,EAC5F,CAGQzR,kCACN,IAAI0R,EAAazO,MAAwB,wBAAwBnD,OAAS,GAC1E4R,EAAaA,EAAWvH,OAExB,IAAI0G,EAAO5N,MAAwB,uBAAuBnD,OAAS,GACnE+Q,EAAOA,EAAK1G,OAAOnJ,WAAW,SAAU,6BAExCiC,MAAM,wBAAwBtC,UAAY,CAAC+Q,EAAYb,GAAM9B,OAAOC,SAASb,KAAK,IACpF,CAGQnO,6CACN,MAAM2R,OdhJoBjP,OAAO+K,SAIXrI,UAAoB,iBAAkBqI,GAAW,CAAC,GAAG,Gc4InDmE,IAAoB,GACvCD,EAAU5K,SAEf9D,MAAwB,wBAAwBnD,MAAQ6R,EAAU,GACpE,E,UClRa,MAAME,EAInB7R,sBACA,CAMAA,mBACA,CAMAA,wBACE,OAAO2B,EAA0B,SACnC,ECRa,MAAMmQ,EAInB9R,cACE8R,EAASC,qBACTlF,EAAYM,mBAIZ,IAAK,MAAM6E,KAAa9R,cAAcoC,OAAQ,CAC5C,IAAK1C,OAAOQ,UAAUC,eAAeC,KAAKJ,cAAcoC,OAAQ0P,GAC9D,SAGF,MAAM/P,EAAc/B,cAAcoC,OAAO0P,GAMzC,KAH0C,iBAAhB/P,GACE,iBAAhBA,GACgB,kBAAhBA,GACK,SAIjB,MAAMvB,EAAKuC,MAAM,UAAU+O,OAC3B,IAAKtR,EAAI,SAIT,MAAMuR,EAAUvR,EAAGuR,QAAQC,cAC3B,GAAgB,WAAZD,EACDvR,EAAyBZ,MAAQmC,EAAY2J,gBAE3C,GAAgB,UAAZqG,EAAqB,CAC5B,MAAME,EAAYzR,EAAGsE,aAAa,QAAQkN,cACpC9N,EAAU1D,EAEhB,GAAkB,UAAdyR,GAAuC,aAAdA,EAC3B/N,EAAQ/B,QAAU2M,QAAQ/M,QAEvB,GAAkB,UAAdkQ,EAAuB,CAC9B,MAAM5J,EAAWtG,EAAY2J,YAAc,YAG3CxH,EAAQtE,MAAQyI,EAAS6J,UAAU,EAAG7J,EAASxB,OAAS,E,MAGxD3C,EAAQtE,MAAQmC,EAAY2J,U,EAOlCxC,EAAWiJ,eACXzI,EAASyI,eACT1H,EAAa0H,eACbtE,EAAQsE,eACRrE,EAAUqE,eACVnD,EAAWmD,eACXlD,EAAWkD,eACXxF,EAAYwF,eACZpG,EAAiBoG,eACjBjD,EAAciD,eACd,iBACAxF,EAAYwF,eACZ3M,EAAc2M,cAChB,CAMArS,4BACEiD,MAAM,cAAcI,iBAAiB,SAAS,IAAMmD,KAAK,eAAc,GAEvEvD,MAAM,UAAUI,iBAAiB,SAAS,KACxC,MAAMiP,EAAcR,EAASS,iBAC7BT,EAASU,mBAAmBF,GAE5B9L,KAAK,QAAS8L,GAAa,EAAK,IAC/B,GAEHrP,MAAM,aAAaI,iBAAiB,SAAS,KAC3C,MAAMiP,EAAcR,EAASS,iBAC7BT,EAASU,mBAAmBF,GAE5B9L,KAAK,WAAY8L,GAAa,EAAK,IAClC,EACL,CAMAtS,wBAiBE,MAhBsC,IACjCoJ,EAAWqJ,oBACX7I,EAAS6I,oBACT9H,EAAa8H,oBACb1E,EAAQ0E,oBACRzE,EAAUyE,oBACVvD,EAAWuD,oBACXtD,EAAWsD,oBACXZ,EAAUY,oBACVxG,EAAiBwG,oBACjBrD,EAAcqD,oBACd,sBACA5F,EAAY4F,oBACZ/M,EAAc+M,iBAIrB,CAMAzS,0BAA0B0S,GACJ9S,OAAOsE,KAAKwO,GAEpBjS,SAAQ0D,IACdjE,cAAcoC,OAAOjC,eAAe8D,KACtCjE,cAAcoC,OAAO6B,GAAOuO,EAAYvO,G,GAG9C,CAMQnE,4BAEN,IAAK,MAAM2S,KAAYzS,cAAc0S,MAAO,CAC1C,IAAKhT,OAAOQ,UAAUC,eAAeC,KAAKJ,cAAc0S,MAAOD,GAC7D,SAGF,MAAME,EAAW3S,cAAc0S,MAAMD,GAC/BG,EAAYtS,SAA4B,qBAAqBmS,OAEnE,IAAK,MAAMjS,KAAMoS,EACfD,EAASpS,SAAQ0D,IACf,MAAM0J,EAAW,IAAIC,OAAO,GAAG3J,IAAOA,GACtC0J,EAASkF,aAAa,YAAa,KAAKJ,MAAaxO,KAErDzD,EAAG0C,IAAIyK,EAAS,G,CAIxB,E,OCjJFmF,OAAOxN,SAAW,ICnBX,MACEyN,cAAuD,CAAC,EAE/DxN,SAASzD,EAAcuD,GACrB/F,KAAKyT,cAAcjR,GAAQuD,CAC7B,CAEA2N,YAAYlR,UACHxC,KAAKyT,cAAcjR,EAC5B,CAEAmR,iBAEEH,OAAOI,OAAOC,SAAShQ,iBAAiB,WAAW,EAAG9B,WACpD,MAAM+R,EAAQ/R,GAAM8F,MAAQ,GACtBkM,EAAQhS,GAAMiS,MAAQ,GACtBjO,EAAU/F,KAAKyT,cAAcK,GAC7BG,IAAelO,EAErBvB,QAAQ0P,KAAK,mBAAmBJ,eAAmBG,gBAA0BF,GAExEE,GACLlO,EAAQ+N,EAAOC,EAAM,GAEzB,GDJF/N,SAAS2N,iBAITH,OAAO/P,MhBpBgCN,IACrC,IACE,OAAOwF,SAASwL,cAAchR,E,CAEhC,MAAM,CAEN,OAAO,IAAI,EgBebqQ,OAAOxS,ShBRmCmC,IACxC,IACE,OAAOkE,MAAMgC,KAAKV,SAASW,iBAAiBnG,G,CAE9C,MAAM,CAEN,MAAO,EAAE,EgBGXqQ,OAAO1N,GAAKA,EACZ0N,OAAOxM,KhBea,CAACxE,EAAcT,EAAYqS,KAC7C,MAAMC,EAAWD,EAA8BvD,KAAKC,UAAU/O,GAAQA,EAGtEyR,OAAOI,OAAOC,SAASS,YAAY,CAAE9R,OAAMT,KAAMsS,GAAU,EgBlB7Db,OAAO5N,UhB2BkB1C,MAAoBV,EAAcT,EAAYqS,KACrE,IAAIG,GAAY,EACZlS,EAAY,KAEhByD,EAAGtD,GAAM,CAACgS,EAAWC,KACfD,IAAchS,IAElB+R,GAAY,EACZlS,EAASoS,EACTzO,SAAS0N,YAAYlR,GAAK,IAG5B,MAAM6R,EAAWD,EAA8BvD,KAAKC,UAAU/O,GAAQA,EAMtE,IAHAyR,OAAOI,OAAOC,SAASS,YAAY,CAAE9R,OAAMT,KAAMsS,KAGzCE,SACA1S,EAAM,KAGd,OAAOQ,CAAM,EgB/CVmR,OAAO9S,gBACV8S,OAAO9S,cAAgB,CACrBgU,QAAS,QACT5R,OAAQ,CAAC,EACTnC,KAAM,CAAC,EACPkN,SAAU,GACVkD,SAAU,CACR,CACEf,OAAQ,iBACRC,SAAU,mCACVC,WAAY,6FACZC,UAAW,SACXG,cAAc,GAEhB,CACEN,OAAQ,eACRC,SAAU,WACVC,WAAY,uGACZC,UAAW,SACXG,cAAc,IAGlB9I,UAAW,GACX4L,MAAO,CACLuB,aAAc,GACdC,eAAgB,GAChBC,mBAAoB,GACpBC,mBAAoB,GACpBC,mBAAoB,GACpBC,iBAAkB,GAClBC,gBAAiB,GACjBC,gBAAiB,GACjBC,cAAe,GACfC,qBAAsB,IAExBhQ,MAAO,CACLC,OAAQ,GACRmM,KAAM,GACNnJ,KAAM,GACNC,IAAK,IAEPyB,WAAY,GACZC,UAAW,GACXC,mBAAoB,GACpB1B,gBAAiB,GACjB6H,WAAY,KAGhB1P,cAAc2U,qBAAuBlM,EAAQK,cAC7C9I,cAAc4U,aAAe/U,EAAS+E,KACtC5E,cAAcmS,aAAeP,EAAShN,KACtC5E,cAAciN,iBAAmBN,EAAYM,iBAI7CxE,EAAQoM,YAGRjD,EAAShN,OACT/E,EAAS+E,OAGTgN,EAASkD,qBACT5L,EAAW2L,YACXnL,EAASmL,YACTpK,EAAaoK,YACbhH,EAAQgH,YACR/G,EAAU+G,YACV7F,EAAW6F,YACX5F,EAAW4F,YACXlI,EAAYkI,YACZ9I,EAAiB8I,YACjB3F,EAAc2F,YACd,cACAlI,EAAYkI,YACZrP,EAAcqP,YAGdpM,EAAQK,cAAc9I,cAAcgU,S","sources":["webpack://ig-ui/webpack/universalModuleDefinition","webpack://ig-ui/webpack/bootstrap","webpack://ig-ui/webpack/runtime/make namespace object","webpack://ig-ui/./src/FrmSettings/Language.ts","webpack://ig-ui/./src/helpers/index.ts","webpack://ig-ui/./src/helpers/globalHelpers.ts","webpack://ig-ui/./src/FrmSettings/TabAppearance.ts","webpack://ig-ui/./src/FrmSettings/Sidebar.ts","webpack://ig-ui/./src/FrmSettings/TabGeneral.ts","webpack://ig-ui/./src/FrmSettings/TabImage.ts","webpack://ig-ui/./src/FrmSettings/TabSlideshow.ts","webpack://ig-ui/./src/FrmSettings/TabMouseKeyboard.ts","webpack://ig-ui/./src/FrmSettings/TabLanguage.ts","webpack://ig-ui/./src/FrmSettings/TabEdit.ts","webpack://ig-ui/./src/FrmSettings/TabViewer.ts","webpack://ig-ui/./src/FrmSettings/TabToolbar.ts","webpack://ig-ui/./src/FrmSettings/TabGallery.ts","webpack://ig-ui/./src/FrmSettings/TabFileAssocs.ts","webpack://ig-ui/./src/FrmSettings/TabTools.ts","webpack://ig-ui/./src/FrmSettings/TabLayout.ts","webpack://ig-ui/./src/FrmSettings/Settings.ts","webpack://ig-ui/./src/FrmSettings.ts","webpack://ig-ui/./src/helpers/webview.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ig-ui\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ig-ui\"] = factory();\n\telse\n\t\troot[\"ig-ui\"] = factory();\n})(this, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\r\nexport default class Language {\r\n  /**\r\n   * Loads language.\r\n   */\r\n  static load() {\r\n    for (const langKey in _pageSettings.lang) {\r\n      if (!Object.prototype.hasOwnProperty.call(_pageSettings.lang, langKey)) {\r\n        continue;\r\n      }\r\n  \r\n      const langValue = _pageSettings.lang[langKey];\r\n  \r\n      queryAll(`[lang-text=\"${langKey}\"]`).forEach(el => {\r\n        el.innerText = langValue;\r\n      });\r\n\r\n      queryAll(`[lang-title=\"${langKey}\"]`).forEach(el => {\r\n        el.title = langValue;\r\n      });\r\n\r\n      queryAll(`[lang-html=\"${langKey}\"]`).forEach(el => {\r\n        let html = langValue;\r\n\r\n        for (let i = 0; i < el.childElementCount; i++) {\r\n          html = html.replaceAll(`{${i}}`, el.children.item(i).outerHTML);\r\n        }\r\n\r\n        el.innerHTML = html;\r\n      });\r\n    }\r\n  }\r\n}\r\n","import Language from '@/FrmSettings/Language';\r\n\r\n\r\n/**\r\n * Pauses the thread for a period\r\n * @param time Duration to pause in millisecond\r\n * @param data Data to return after resuming\r\n * @returns a promise\r\n */\r\nexport const pause = <T>(time: number, data?: T): Promise<T> => new Promise((resolve) => {\r\n  setTimeout(() => resolve(data as T), time);\r\n});\r\n\r\n\r\n/**\r\n * Gets the settings that are changed by user (`_pageSettings.config`) from the input tab.\r\n */\r\nexport const getChangedSettingsFromTab = (tab: string) => {\r\n  const result: Record<string, any> = {};\r\n  const inputEls = queryAll<HTMLInputElement>(`[tab=\"${tab}\"] input[name]`);\r\n  const selectEls = queryAll<HTMLSelectElement>(`[tab=\"${tab}\"] select[name]`);\r\n  const allEls = [...inputEls, ...selectEls];\r\n\r\n  for (const el of allEls) {\r\n    const configName = el.name;\r\n    let configValue: boolean | number | string = '';\r\n    if (el.name.startsWith('_')) continue;\r\n    if (!el.checkValidity()) continue;\r\n\r\n\r\n    // bool value\r\n    if (el.type === 'checkbox') {\r\n      configValue = (el as HTMLInputElement).checked;\r\n    }\r\n    // number value\r\n    else if (el.type === 'number') {\r\n      configValue = +el.value;\r\n    }\r\n    // string value\r\n    else {\r\n      configValue = el.value;\r\n    }\r\n\r\n    if (configValue !== _pageSettings.config[configName]) {\r\n      result[configName] = configValue;\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n\r\n/**\r\n * Escapes HTML characters.\r\n */\r\nexport const escapeHtml = (html: string) => {\r\n  return html\r\n    .replace(/&/g, '&amp;') // &\r\n    .replace(/</g, '&lt;') // <\r\n    .replace(/>/g, '&gt;') // >\r\n    .replace(/\"/g, '&quot;'); // \"\r\n};\r\n\r\n\r\n/**\r\n * Opens modal dialog and return value.\r\n * @param selector Dialog selector.\r\n * @param data The data to pass to the dialog.\r\n */\r\nexport const openModalDialog = async (\r\n  selector: string,\r\n  purpose: 'create' | 'edit',\r\n  data: Record<string, any> = {},\r\n  onOpen?: (el: HTMLDialogElement) => any,\r\n  onSubmit?: (e: SubmitEvent) => any) => {\r\n  let isClosed = false;\r\n  const dialogEl = query<HTMLDialogElement>(selector);\r\n  dialogEl.classList.remove('dialog--create', 'dialog--edit');\r\n  dialogEl.classList.add(`dialog--${purpose}`);\r\n\r\n  // add shaking effect when clicking outside of dialog\r\n  dialogEl.addEventListener('click', async (e) => {\r\n    const el = e.target as HTMLDialogElement;\r\n    const rect = el.getBoundingClientRect();\r\n\r\n    // click on backdrop\r\n    if (rect.left > e.clientX\r\n      || rect.right < e.clientX\r\n      || rect.top > e.clientY\r\n      || rect.bottom < e.clientY) {\r\n      // shake the modal for 500ms\r\n      el.classList.add('ani-shaking');\r\n      await pause(500);\r\n      el.classList.remove('ani-shaking');\r\n    }\r\n  }, false);\r\n\r\n  // on close\r\n  dialogEl.addEventListener('close', () => isClosed = true, false);\r\n\r\n  // on submit\r\n  query<HTMLFormElement>(`${selector} > form`).addEventListener('submit', async (e) => {\r\n    if (onSubmit) await Promise.resolve(onSubmit(e));\r\n  });\r\n\r\n  console.log(data);\r\n  Object.keys(data).forEach(key => {\r\n    const inputEl = query<HTMLInputElement>(`${selector} [name=\"_${key}\"]`);\r\n    if (inputEl) inputEl.value = data[key];\r\n  });\r\n\r\n  // on open\r\n  if (onOpen) await Promise.resolve(onOpen(dialogEl));\r\n\r\n  // open modal dialog\r\n  dialogEl.showModal();\r\n\r\n  while (!isClosed) {\r\n    await pause(100);\r\n  }\r\n\r\n  return dialogEl;\r\n};\r\n\r\n\r\n/**\r\n * Open file picker.\r\n */\r\nexport const openFilePicker = async (options?: {\r\n  multiple?: boolean,\r\n  filter?: string,\r\n}) => {\r\n  const filePaths = await postAsync<string[]>('OpenFilePicker', options || {}, true);\r\n\r\n  return filePaths;\r\n};\r\n\r\n\r\n/**\r\n * Open hotkey picker.\r\n */\r\nexport const openHotkeyPicker = async (): Promise<string | null> => {\r\n  const hotkey = await postAsync<string>('OpenHotkeyPicker');\r\n\r\n  return hotkey;\r\n};\r\n\r\n\r\n/**\r\n * Renders hotkey list\r\n * @param ulSelector CSS selector of the list element\r\n * @param hotkeys Hotkey list to render\r\n */\r\nexport const renderHotkeyList = async (\r\n  ulSelector: string,\r\n  hotkeys: string[],\r\n  onChange: (action: 'delete' | 'add') => any,\r\n) => {\r\n  const ulEl = query(ulSelector);\r\n  let ulHtml = '';\r\n\r\n  // load list of hotkeys\r\n  for (const key of hotkeys) {\r\n    ulHtml += `\r\n    <li class=\"hotkey-item\">\r\n      <kbd>${key}</kbd>\r\n      <button type=\"button\" class=\"btn--icon\" lang-title=\"_._Delete\" data-action=\"delete\">\r\n        ${_pageSettings.icons.Delete}\r\n      </button>\r\n    </li>`;\r\n  }\r\n\r\n  // load 'Add hotkey' button\r\n  ulHtml += `<li>\r\n    <button type=\"button\" lang-title=\"_._AddHotkey\" data-action=\"add\">[Add hotkey…]</button>\r\n  </li>`;\r\n\r\n  ulEl.innerHTML = ulHtml;\r\n  Language.load();\r\n\r\n  // add event listerner for 'Delete' hotkey\r\n  queryAll<HTMLButtonElement>(`${ulSelector} button[data-action]`).forEach(el => {\r\n    el.addEventListener('click', async () => {\r\n      const action = el.getAttribute('data-action');\r\n\r\n      if (action === 'delete') {\r\n        const hotkeyItemEl = el.closest('.hotkey-item');\r\n        hotkeyItemEl?.remove();\r\n        await Promise.resolve(onChange(action));\r\n      }\r\n      else if (action === 'add') {\r\n        const hotkey = await openHotkeyPicker();\r\n        if (hotkey === null) return;\r\n\r\n        renderHotkeyList(ulSelector, [...hotkeys, hotkey], onChange);\r\n        await Promise.resolve(onChange(action));\r\n      }\r\n    }, false);\r\n  });\r\n};\r\n","import { pause } from '.';\r\nimport { WebviewEventHandlerFn } from './webview';\r\n\r\n\r\n/**\r\n * Gets the first matched element with the query selector.\r\n */\r\nexport const query = <T = HTMLElement>(selector: string): T | null => {\r\n  try {\r\n    return document.querySelector(selector) as T;\r\n  }\r\n  catch {}\r\n\r\n  return null;\r\n};\r\n\r\n\r\n/**\r\n * Gets all matched elements with the query selector.\r\n */\r\nexport const queryAll = <T = HTMLElement>(selector: string) => {\r\n  try {\r\n    return Array.from(document.querySelectorAll(selector)) as T[];\r\n  }\r\n  catch {}\r\n\r\n  return [];\r\n};\r\n\r\n\r\n/**\r\n * Add event listerner from backend.\r\n * @param name Event name\r\n * @param handler Function to handle the event\r\n */\r\nexport const on = (name: string, handler: WebviewEventHandlerFn) => {\r\n  _webview.addEvent(name, handler);\r\n};\r\n\r\n\r\n/**\r\n * Send an event to backend.\r\n * @param name Event name\r\n * @param data Data to send to backend, it will be converted to JSON string.\r\n */\r\nexport const post = (name: string, data?: any, autoConvertToJson?: boolean) => {\r\n  const msgData = (autoConvertToJson ?? false) ? JSON.stringify(data) : data;\r\n\r\n  // @ts-ignore\r\n  window.chrome.webview?.postMessage({ name, data: msgData });\r\n};\r\n\r\n\r\n/**\r\n * Send an event to backend and wait for the returned data.\r\n * @param name Event name\r\n * @param data Data to send to backend, it will be converted to JSON string.\r\n */\r\nexport const postAsync = async <T = unknown>(name: string, data?: any, autoConvertToJson?: boolean) => {\r\n  let hasResult = false;\r\n  let result: T = null;\r\n\r\n  on(name, (eventName, eventData) => {\r\n    if (eventName !== name) return;\r\n\r\n    hasResult = true;\r\n    result = eventData;\r\n    _webview.removeEvent(name);\r\n  });\r\n\r\n  const msgData = (autoConvertToJson ?? false) ? JSON.stringify(data) : data;\r\n\r\n  // @ts-ignore\r\n  window.chrome.webview?.postMessage({ name, data: msgData });\r\n\r\n  // wait for the returned data\r\n  while (!hasResult) {\r\n    await pause(100);\r\n  }\r\n\r\n  return result;\r\n};\r\n","import { ITheme } from '@/@types/FrmSettings';\r\nimport { getChangedSettingsFromTab } from '@/helpers';\r\nimport Language from './Language';\r\n\r\nexport default class TabAppearance {\r\n  /**\r\n   * Loads settings for tab Appearance.\r\n   */\r\n  static loadSettings() {\r\n    TabAppearance.loadThemeList();\r\n    TabAppearance.loadThemeListStatus();\r\n    TabAppearance.handleBackgroundColorChanged();\r\n    TabAppearance.handleSlideshowBackgroundColorChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads theme list check status\r\n   */\r\n  static loadThemeListStatus() {\r\n    const darkTheme = query<HTMLInputElement>('[name=\"DarkTheme\"]').value;\r\n    const lightTheme = query<HTMLInputElement>('[name=\"LightTheme\"]').value;\r\n\r\n    const darkEl = query<HTMLInputElement>(`[name=\"_DarkThemeOptions\"][value=\"${darkTheme}\"]`);\r\n    const lightEl = query<HTMLInputElement>(`[name=\"_LightThemeOptions\"][value=\"${lightTheme}\"]`);\r\n    if (darkEl) darkEl.checked = true;\r\n    if (lightEl) lightEl.checked = true;\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Appearance.\r\n   */\r\n  static addEvents() {\r\n    query('#Lnk_ResetBackgroundColor').addEventListener('click', TabAppearance.resetBackgroundColor, false);\r\n    query('#Lnk_ResetSlideshowBackgroundColor').addEventListener('click', TabAppearance.resetSlideshowBackgroundColor, false);\r\n\r\n    query('#Btn_BackgroundColor').addEventListener('click', async () => {\r\n      const colorEL = query<HTMLInputElement>('[name=\"BackgroundColor\"]');\r\n      const colorValue = await postAsync<string>('Btn_BackgroundColor', colorEL.value);\r\n\r\n      if (colorValue) {\r\n        colorEL.value = colorValue;\r\n        TabAppearance.handleBackgroundColorChanged();\r\n      }\r\n    }, false);\r\n    query('#Btn_SlideshowBackgroundColor').addEventListener('click', async () => {\r\n      const colorEL = query<HTMLInputElement>('[name=\"SlideshowBackgroundColor\"]');\r\n      const colorValue = await postAsync<string>('Btn_SlideshowBackgroundColor', colorEL.value);\r\n\r\n      if (colorValue) {\r\n        colorEL.value = colorValue;\r\n        TabAppearance.handleSlideshowBackgroundColorChanged();\r\n      }\r\n    }, false);\r\n\r\n    query('#Btn_InstallTheme').addEventListener('click', async () => {\r\n      const newThemeList = await postAsync<ITheme[]>('Btn_InstallTheme');\r\n      TabAppearance.loadThemeList(newThemeList);\r\n    }, false);\r\n\r\n    query('#Btn_RefreshThemeList').addEventListener('click', async () => {\r\n      const newThemeList = await postAsync<ITheme[]>('Btn_RefreshThemeList');\r\n      TabAppearance.loadThemeList(newThemeList);\r\n    }, false);\r\n\r\n    query('#Btn_OpenThemeFolder').addEventListener('click', () => post('Btn_OpenThemeFolder'), false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('appearance');\r\n\r\n    // DarkTheme\r\n    settings.DarkTheme = query<HTMLInputElement>('[name=\"DarkTheme\"]').value;\r\n    if (settings.DarkTheme === _pageSettings.config.DarkTheme) {\r\n      delete settings.DarkTheme;\r\n    }\r\n\r\n    // LightTheme\r\n    settings.LightTheme = query<HTMLInputElement>('[name=\"LightTheme\"]').value;\r\n    if (settings.LightTheme === _pageSettings.config.LightTheme) {\r\n      delete settings.LightTheme;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads all themes into the list.\r\n   */\r\n  private static loadThemeList(list?: ITheme[]) {\r\n    if (Array.isArray(list) && list.length > 0) {\r\n      _pageSettings.themeList = list;\r\n    }\r\n    const themeList = _pageSettings.themeList || [];\r\n\r\n    const ulEl = query<HTMLTableElement>('#List_ThemeList');\r\n    let ulHtml = '';\r\n\r\n    for (const th of themeList) {\r\n      const liHtml = `\r\n        <li>\r\n          <div class=\"theme-item\">\r\n            <div class=\"theme-preview\">\r\n              <div class=\"theme-preview-img\" title=\"${th.FolderPath}\">\r\n                <img src=\"${th.PreviewImage}\" alt=\"${th.Info.Name}\" onerror=\"this.hidden = true;\" />\r\n                <span class=\"theme-mode ${th.IsDarkMode ? 'theme-dark' : 'theme-light'}\"\r\n                  lang-title=\"FrmSettings.Tab.Appearance.${th.IsDarkMode ? '_DarkTheme' : '_LightTheme'}\">\r\n                  ${th.IsDarkMode ? '🌙' : '☀️'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"theme-info\">\r\n              <div class=\"theme-heading\" title=\"${th.Info.Name} - v${th.Info.Version}\">\r\n                <span class=\"theme-name\">${th.Info.Name}</span>\r\n                <span class=\"theme-version\">${th.Info.Version}</span>\r\n              </div>\r\n              <div class=\"theme-description\" title=\"${th.Info.Description}\">${th.Info.Description}</div>\r\n              <div class=\"theme-author\">\r\n                <span class=\"me-4\" title=\"${th.Info.Author}\">\r\n                  <span lang-text=\"FrmSettings.Tab.Appearance._Author\">[Author]</span>:\r\n                  ${th.Info.Author || '?'}\r\n                </span>\r\n                <span class=\"me-4\" title=\"${th.Info.Website}\">\r\n                  <span lang-text=\"_._Website\">[Website]</span>:\r\n                  ${th.Info.Website || '?'}\r\n                </span>\r\n                <span title=\"${th.Info.Email}\">\r\n                  <span lang-text=\"_._Email\">[Email]</span>:\r\n                  ${th.Info.Email || '?'}\r\n                </span>\r\n              </div>\r\n              <div class=\"theme-actions\">\r\n                <label lang-title=\"FrmSettings.Tab.Appearance._UseThemeForDarkMode\">\r\n                  <input type=\"radio\" name=\"_DarkThemeOptions\" value=\"${th.FolderName}\" />\r\n                  <span>\r\n                    ${_pageSettings.icons.Moon}\r\n                    <span lang-text=\"FrmSettings.Tab.Appearance._DarkTheme\">[Dark]</span> \r\n                  </span>\r\n                </label>\r\n                <label lang-title=\"FrmSettings.Tab.Appearance._UseThemeForLightMode\">\r\n                  <input type=\"radio\" name=\"_LightThemeOptions\" value=\"${th.FolderName}\" />\r\n                  <span>\r\n                    ${_pageSettings.icons.Sun}\r\n                    <span lang-text=\"FrmSettings.Tab.Appearance._LightTheme\">[Light]</span>\r\n                  </span>\r\n                </label>\r\n\r\n                <button type=\"button\" class=\"btn--icon ms-3 px-1\"\r\n                  lang-title=\"_._Delete\"\r\n                  ${_pageSettings.defaultThemeDir === th.FolderPath ? 'style=\"visibility: hidden !important;\"' : ''}\r\n                  data-delete-theme=\"${th.FolderPath}\">\r\n                  ${_pageSettings.icons.Delete}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </li>`;\r\n\r\n      ulHtml += liHtml;\r\n    }\r\n\r\n    ulEl.innerHTML = ulHtml;\r\n    Language.load();\r\n    TabAppearance.loadThemeListStatus();\r\n\r\n    queryAll<HTMLInputElement>('[name=\"_DarkThemeOptions\"]').forEach(el => {\r\n      el.addEventListener('change', (e) => {\r\n        const themeName = (e.target as HTMLInputElement).value;\r\n        query<HTMLInputElement>('[name=\"DarkTheme\"]').value = themeName;\r\n      }, false);\r\n    });\r\n\r\n    queryAll<HTMLInputElement>('[name=\"_LightThemeOptions\"]').forEach(el => {\r\n      el.addEventListener('change', (e) => {\r\n        const themeName = (e.target as HTMLInputElement).value;\r\n        query<HTMLInputElement>('[name=\"LightTheme\"]').value = themeName;\r\n      }, false);\r\n    });\r\n\r\n    queryAll<HTMLButtonElement>('[data-delete-theme]').forEach(el => {\r\n      el.addEventListener('click', async (e) => {\r\n        const themeDir = (e.target as HTMLButtonElement).getAttribute('data-delete-theme');\r\n\r\n        const newThemeList = await postAsync<ITheme[]>('Delete_Theme_Pack', themeDir);\r\n        TabAppearance.loadThemeList(newThemeList);\r\n      }, false);\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Resets the background color to the current theme's background color.\r\n   */\r\n  private static resetBackgroundColor() {\r\n    const isDarkMode = document.documentElement.getAttribute('color-mode') !== 'light';\r\n    const currentThemeName = isDarkMode ? _pageSettings.config.DarkTheme : _pageSettings.config.LightTheme;\r\n    const theme = _pageSettings.themeList.find(i => i.FolderName === currentThemeName);\r\n    if (!theme) return;\r\n\r\n    const colorHex = theme.BgColor || '#00000000';\r\n\r\n    query<HTMLInputElement>('[name=\"BackgroundColor\"]').value = colorHex;\r\n    TabAppearance.handleBackgroundColorChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Reset slideshow background color to black\r\n   */\r\n  private static resetSlideshowBackgroundColor() {\r\n    query<HTMLInputElement>('[name=\"SlideshowBackgroundColor\"]').value = '#000000';\r\n    TabAppearance.handleSlideshowBackgroundColorChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Handles when `BackgroundColor` is changed.\r\n   */\r\n  private static handleBackgroundColorChanged() {\r\n    const colorHex = query<HTMLInputElement>('[name=\"BackgroundColor\"]').value;\r\n    if (!colorHex) return;\r\n\r\n    query<HTMLInputElement>('#Btn_BackgroundColor > .color-display').style.setProperty('--color-picker-value', colorHex);\r\n    query('#Lbl_BackgroundColorValue').innerText = colorHex;\r\n  }\r\n\r\n\r\n  /**\r\n   * Handles when `SlideshowBackgroundColor` is changed.\r\n   */\r\n  private static handleSlideshowBackgroundColorChanged() {\r\n    const colorHex = query<HTMLInputElement>('[name=\"SlideshowBackgroundColor\"]').value;\r\n    if (!colorHex) return;\r\n\r\n    query<HTMLInputElement>('#Btn_SlideshowBackgroundColor > .color-display').style.setProperty('--color-picker-value', colorHex);\r\n    query('#Lbl_SlideshowBackgroundColorValue').innerText = colorHex;\r\n  }\r\n}\r\n","import TabAppearance from './TabAppearance';\r\n\r\nexport default class Sidebar {\r\n  /**\r\n   * Adds click events to sidebar menu.\r\n   */\r\n  static addEvents() {\r\n    // navigation bar event\r\n    const navItems = Array.from(document.querySelectorAll('input[name=\"nav\"]'));\r\n    for (let i = 0; i < navItems.length; i++) {\r\n      const itemEl = navItems[i] as HTMLInputElement;\r\n\r\n      itemEl.addEventListener('change', (e) => {\r\n        const activeTabName = (e.target as HTMLInputElement).value;\r\n        Sidebar.setActiveMenu(activeTabName);\r\n      }, false);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Set the active menu for sidebar\r\n   */\r\n  static setActiveMenu(tabPageName: string) {\r\n    tabPageName ||= 'general';\r\n\r\n    const tabPageEl = query(`.tab-page[tab=\"${tabPageName}\"]`);\r\n    if (!tabPageEl) return;\r\n\r\n    // hide all tabs\r\n    const allTabPages = queryAll('.tab-page');\r\n    allTabPages.forEach(el => el.classList.remove('active'));\r\n\r\n    // show the selected tab\r\n    tabPageEl.classList.add('active');\r\n\r\n    // select the active nav item\r\n    const allNavItems = queryAll('input[type=\"radio\"]');\r\n    allNavItems.forEach((item: HTMLInputElement) => item.checked = false);\r\n    const navItem = query(`input[type=\"radio\"][value=\"${tabPageName}\"]`) as HTMLInputElement;\r\n    if (navItem) navItem.checked = true;\r\n\r\n    if (tabPageName === 'appearance') {\r\n      TabAppearance.loadThemeListStatus();\r\n    }\r\n\r\n    // update backend tab name\r\n    post('Sidebar_Changed', tabPageName);\r\n  }\r\n\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabGeneral {\r\n  private static get isOriginalAutoUpdateEnabled() {\r\n    return _pageSettings.config.AutoUpdate !== '0';\r\n  }\r\n\r\n  /**\r\n   * Loads settings for tab General.\r\n   */\r\n  static loadSettings() {\r\n    query('#Lnk_StartupDir').title = _pageSettings.startUpDir || '(unknown)';\r\n    query('#Lnk_ConfigDir').title = _pageSettings.configDir || '(unknown)';\r\n    query('#Lnk_UserConfigFile').title = _pageSettings.userConfigFilePath || '(unknown)';\r\n\r\n    // AutoUpdate is a string\r\n    query<HTMLInputElement>('[name=\"AutoUpdate\"]').checked = TabGeneral.isOriginalAutoUpdateEnabled;\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab General.\r\n   */\r\n  static addEvents() {\r\n    query('#Lnk_StartupDir').addEventListener('click', () => post('Lnk_StartupDir', _pageSettings.startUpDir), false);\r\n    query('#Lnk_ConfigDir').addEventListener('click', () => post('Lnk_ConfigDir', _pageSettings.configDir), false);\r\n    query('#Lnk_UserConfigFile').addEventListener('click', () => post('Lnk_UserConfigFile', _pageSettings.userConfigFilePath), false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('general');\r\n\r\n    // convert AutoUpdate back to string\r\n    const isNewAutoUpdateEnabled = settings.AutoUpdate === true;\r\n    if (isNewAutoUpdateEnabled !== TabGeneral.isOriginalAutoUpdateEnabled) {\r\n      settings.AutoUpdate = settings.AutoUpdate\r\n        ? new Date().toISOString()\r\n        : '0';\r\n    }\r\n    else {\r\n      delete settings.AutoUpdate;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabImage {\r\n  /**\r\n   * Loads settings for tab Image.\r\n   */\r\n  static loadSettings() {\r\n    const colorProfile = (_pageSettings.config.ColorProfile as string || '');\r\n    if (colorProfile.includes('.')) {\r\n      query<HTMLSelectElement>('[name=\"ColorProfile\"]').value = 'Custom';\r\n      query('#Lnk_CustomColorProfile').innerText = colorProfile;\r\n    }\r\n\r\n    TabImage.handleColorProfileChanged();\r\n    TabImage.handleUseEmbeddedThumbnailOptionsChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Add events for tab Image.\r\n   */\r\n  static addEvents() {\r\n    query('#Btn_BrowseColorProfile').addEventListener('click', async () => {\r\n      const profileFilePath = await postAsync<string>('Btn_BrowseColorProfile');\r\n      query('#Lnk_CustomColorProfile').innerText = profileFilePath;\r\n    }, false);\r\n  \r\n    query('#Lnk_CustomColorProfile').addEventListener('click', () => {\r\n      const profileFilePath = query('#Lnk_CustomColorProfile').innerText.trim();\r\n      post('Lnk_CustomColorProfile', profileFilePath);\r\n    }, false);\r\n  \r\n    query('[name=\"ColorProfile\"]').addEventListener('change', TabImage.handleColorProfileChanged, false);\r\n\r\n    query('[name=\"UseEmbeddedThumbnailRawFormats\"]').addEventListener('input', TabImage.handleUseEmbeddedThumbnailOptionsChanged, false);\r\n    query('[name=\"UseEmbeddedThumbnailOtherFormats\"]').addEventListener('input', TabImage.handleUseEmbeddedThumbnailOptionsChanged, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('image');\r\n\r\n    // ImageBoosterCacheCount\r\n    settings.ImageBoosterCacheCount = +(settings.ImageBoosterCacheCount || 0);\r\n    if (settings.ImageBoosterCacheCount === _pageSettings.config.ImageBoosterCacheCount) {\r\n      delete settings.ImageBoosterCacheCount;\r\n    }\r\n\r\n\r\n    // ColorProfile\r\n    const originalColorProfile = _pageSettings.config.ColorProfile;\r\n    if (settings.ColorProfile === 'Custom') {\r\n      settings.ColorProfile = query('#Lnk_CustomColorProfile').innerText.trim();\r\n    }\r\n    if (!settings.ColorProfile || settings.ColorProfile === originalColorProfile) {\r\n      delete settings.ColorProfile;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Handles when color profile option is changed.\r\n   */\r\n  static handleColorProfileChanged() {\r\n    const selectEl = query<HTMLSelectElement>('[name=\"ColorProfile\"]');\r\n    const useCustomProfile = selectEl.value === 'Custom';\r\n  \r\n    query('#Btn_BrowseColorProfile').hidden = !useCustomProfile;\r\n    query('#Section_CustomColorProfile').hidden = !useCustomProfile;\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle when the embedded thumbnail options are changed.\r\n   */\r\n  static handleUseEmbeddedThumbnailOptionsChanged() {\r\n    const enableForRaw = query<HTMLInputElement>('[name=\"UseEmbeddedThumbnailRawFormats\"]').checked;\r\n    const enableForOthers = query<HTMLInputElement>('[name=\"UseEmbeddedThumbnailOtherFormats\"]').checked;\r\n    const showSizeSection = enableForRaw || enableForOthers;\r\n  \r\n    query('#Section_EmbeddedThumbnailSize').hidden = !showSizeSection;\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabSlideshow {\r\n  /**\r\n   * Loads settings for tab Slideshow.\r\n   */\r\n  static loadSettings() {\r\n    TabSlideshow.handleUseRandomIntervalForSlideshowChanged();\r\n    TabSlideshow.handleSlideshowIntervalsChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Slideshow.\r\n   */\r\n  static addEvents() {\r\n    query('[name=\"UseRandomIntervalForSlideshow\"]').addEventListener('input', TabSlideshow.handleUseRandomIntervalForSlideshowChanged, false);\r\n    query('[name=\"SlideshowInterval\"]').addEventListener('input', TabSlideshow.handleSlideshowIntervalsChanged, false);\r\n    query('[name=\"SlideshowIntervalTo\"]').addEventListener('input', TabSlideshow.handleSlideshowIntervalsChanged, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('slideshow');\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle when slideshow intervals are changed.\r\n   */\r\n  private static handleSlideshowIntervalsChanged() {\r\n    const fromEl = query<HTMLInputElement>('[name=\"SlideshowInterval\"]');\r\n    const toEl = query<HTMLInputElement>('[name=\"SlideshowIntervalTo\"]');\r\n\r\n    fromEl.max = toEl.value;\r\n    toEl.min = fromEl.value;\r\n\r\n    const intervalFrom = +fromEl.value || 5;\r\n    const intervalTo = +toEl.value || 5;\r\n    const intervalFromText = TabSlideshow.toTimeString(intervalFrom);\r\n    const intervalToText = TabSlideshow.toTimeString(intervalTo);\r\n\r\n    const useRandomInterval = query<HTMLInputElement>('[name=\"UseRandomIntervalForSlideshow\"]').checked;\r\n\r\n    if (useRandomInterval) {\r\n      query('#Lbl_SlideshowInterval').innerText = `${intervalFromText} - ${intervalToText}`;\r\n    }\r\n    else {\r\n      query('#Lbl_SlideshowInterval').innerText = intervalFromText;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * handle when `UseRandomIntervalForSlideshow` is changed.\r\n   */\r\n  private static handleUseRandomIntervalForSlideshowChanged() {\r\n    const useRandomInterval = query<HTMLInputElement>('[name=\"UseRandomIntervalForSlideshow\"]').checked;\r\n  \r\n    query('#Lbl_SlideshowIntervalFrom').hidden = !useRandomInterval;\r\n    query('#Section_SlideshowIntervalTo').hidden = !useRandomInterval;\r\n  }\r\n\r\n\r\n  /**\r\n   * Formats total seconds to time format: `mm:ss.fff`.\r\n   */\r\n  private static toTimeString(totalSeconds: number) {\r\n    const dt = new Date(totalSeconds * 1000);\r\n    let minutes = dt.getUTCMinutes().toString();\r\n    let seconds = dt.getUTCSeconds().toString();\r\n    const msSeconds = dt.getUTCMilliseconds().toString();\r\n\r\n    if (minutes.length < 2) minutes = `0${minutes}`;\r\n    if (seconds.length < 2) seconds = `0${seconds}`;\r\n\r\n    return `${minutes}:${seconds}.${msSeconds}`;\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabMouseKeyboard {\r\n  /**\r\n   * Loads settings for tab Mouse & Keyboard.\r\n   */\r\n  static loadSettings() {\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_Scroll').value = _pageSettings.config.MouseWheelActions?.Scroll || 'DoNothing';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_CtrlAndScroll').value = _pageSettings.config.MouseWheelActions?.CtrlAndScroll || 'DoNothing';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_ShiftAndScroll').value = _pageSettings.config.MouseWheelActions?.ShiftAndScroll || 'DoNothing';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_AltAndScroll').value = _pageSettings.config.MouseWheelActions?.AltAndScroll || 'DoNothing';\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Mouse & Keyboard.\r\n   */\r\n  static addEvents() {\r\n    query('#Btn_ResetMouseWheelAction').addEventListener('click', TabMouseKeyboard.resetDefaultMouseWheelActions, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('mouse_keyboard');\r\n\r\n    // MouseWheelActions\r\n    const newWheelScrollValue = query<HTMLSelectElement>('#Cmb_MouseWheel_Scroll').value;\r\n    const newWheelCtrlAndScrollValue = query<HTMLSelectElement>('#Cmb_MouseWheel_CtrlAndScroll').value;\r\n    const newWheelShiftAndScrollValue = query<HTMLSelectElement>('#Cmb_MouseWheel_ShiftAndScroll').value;\r\n    const newWheelAltAndScrollValue = query<HTMLSelectElement>('#Cmb_MouseWheel_AltAndScroll').value;\r\n\r\n    const mouseWheelActions: Record<string, string> = {};\r\n    if (newWheelScrollValue !== _pageSettings.config.MouseWheelActions?.Scroll) {\r\n      mouseWheelActions.Scroll = newWheelScrollValue;\r\n    }\r\n    if (newWheelCtrlAndScrollValue !== _pageSettings.config.MouseWheelActions?.CtrlAndScroll) {\r\n      mouseWheelActions.CtrlAndScroll = newWheelCtrlAndScrollValue;\r\n    }\r\n    if (newWheelShiftAndScrollValue !== _pageSettings.config.MouseWheelActions?.ShiftAndScroll) {\r\n      mouseWheelActions.ShiftAndScroll = newWheelShiftAndScrollValue;\r\n    }\r\n    if (newWheelAltAndScrollValue !== _pageSettings.config.MouseWheelActions?.AltAndScroll) {\r\n      mouseWheelActions.AltAndScroll = newWheelAltAndScrollValue;\r\n    }\r\n\r\n    if (Object.keys(mouseWheelActions).length > 0) {\r\n      settings.MouseWheelActions = mouseWheelActions;\r\n    }\r\n    else {\r\n      delete settings.MouseWheelActions;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Resets the mouse wheel actions to the default settings.\r\n   */\r\n  private static resetDefaultMouseWheelActions() {\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_Scroll').value = 'Zoom';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_CtrlAndScroll').value = 'PanVertically';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_ShiftAndScroll').value = 'PanHorizontally';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_AltAndScroll').value = 'BrowseImages';\r\n  }\r\n}\r\n","import { ILanguage } from '@/@types/FrmSettings';\r\nimport { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabLanguage {\r\n  /**\r\n   * Loads settings for tab Language.\r\n   */\r\n  static loadSettings() {\r\n    TabLanguage.handleLanguageChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Language.\r\n   */\r\n  static addEvents() {\r\n    query('#Cmb_LanguageList').removeEventListener('change', TabLanguage.handleLanguageChanged, false);\r\n    query('#Btn_RefreshLanguageList').removeEventListener('click', TabLanguage.onBtn_RefreshLanguageList, false);\r\n    query('#Lnk_InstallLanguage').removeEventListener('click', TabLanguage.onLnk_InstallLanguage, false);\r\n\r\n    query('#Cmb_LanguageList').addEventListener('change', TabLanguage.handleLanguageChanged, false);\r\n    query('#Btn_RefreshLanguageList').addEventListener('click', TabLanguage.onBtn_RefreshLanguageList, false);\r\n    query('#Lnk_InstallLanguage').addEventListener('click', TabLanguage.onLnk_InstallLanguage, false);\r\n  }\r\n\r\n\r\n  private static async onBtn_RefreshLanguageList() {\r\n    const newLangList = await postAsync<ILanguage[]>('Btn_RefreshLanguageList');\r\n    TabLanguage.loadLanguageList(newLangList);\r\n  }\r\n\r\n\r\n  private static async onLnk_InstallLanguage() {\r\n    const newLangList = await postAsync<ILanguage[]>('Lnk_InstallLanguage');\r\n    TabLanguage.loadLanguageList(newLangList);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('language');\r\n  }\r\n\r\n\r\n  /**\r\n   * Handles when language is changed.\r\n   */\r\n  private static handleLanguageChanged() {\r\n    const langFileName = query<HTMLSelectElement>('#Cmb_LanguageList').value;\r\n    const lang = _pageSettings.langList.find(i => i.FileName === langFileName);\r\n    if (!lang) return;\r\n  \r\n    query('#Section_LanguageContributors').innerText = lang.Metadata.Author;\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads language list to select box.\r\n   * @param list If defined, it overrides `_pageSettings.langList`.\r\n   */\r\n  static loadLanguageList(list?: ILanguage[]) {\r\n    const selectEl = query<HTMLSelectElement>('#Cmb_LanguageList');\r\n\r\n    // clear current list\r\n    while (selectEl.options.length) selectEl.remove(0);\r\n\r\n    if (Array.isArray(list) && list.length > 0) {\r\n      _pageSettings.langList = list;\r\n    }\r\n\r\n    _pageSettings.langList.forEach(lang => {\r\n      let displayText = `${lang.Metadata.LocalName} (${lang.Metadata.EnglishName})`;\r\n      if (!lang.FileName || lang.FileName.length === 0) {\r\n        displayText = lang.Metadata.EnglishName;\r\n      }\r\n\r\n      const optionEl = new Option(displayText, lang.FileName);\r\n      selectEl.add(optionEl);\r\n    });\r\n\r\n    selectEl.value = _pageSettings.config.Language;\r\n    TabLanguage.handleLanguageChanged();\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabEdit {\r\n  /**\r\n   * Loads settings for tab Edit.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Edit.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('edit');\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabViewer {\r\n  /**\r\n   * Loads settings for tab Viewer.\r\n   */\r\n  static loadSettings() {\r\n    const zoomLevels = _pageSettings.config.ZoomLevels as number[] || [];\r\n    query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]').value = zoomLevels.join('; ');\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Viewer.\r\n   */\r\n  static addEvents() {\r\n    query('[name=\"ZoomLevels\"]').addEventListener('input', TabViewer.handleZoomLevelsChanged, false);\r\n    query('[name=\"ZoomLevels\"]').addEventListener('blur', TabViewer.handleZoomLevelsBlur, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('viewer');\r\n\r\n    // ZoomLevels\r\n    settings.ZoomLevels = TabViewer.getZoomLevels();\r\n\r\n    if (query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]').checkValidity()) {\r\n      const originalLevelsString = _pageSettings.config.ZoomLevels?.toString();\r\n      const newLevelsString = settings.ZoomLevels?.toString();\r\n\r\n      if (newLevelsString === originalLevelsString) {\r\n        delete settings.ZoomLevels;\r\n      }\r\n    }\r\n    else {\r\n      delete settings.ZoomLevels;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle when ZoomLevels is changed.\r\n   */\r\n  private static handleZoomLevelsChanged() {\r\n    const el = query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]');\r\n    const levels = TabViewer.getZoomLevels();\r\n\r\n    // validate\r\n    if (levels.some(i => !Number.isFinite(i))) {\r\n      el.setCustomValidity('Value contains invalid characters. Only number, semi-colon are allowed.');\r\n    }\r\n    else {\r\n      el.setCustomValidity('');\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle when the ZoomLevels box is blur.\r\n   */\r\n  private static handleZoomLevelsBlur() {\r\n    const el = query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]');\r\n    if (!el.checkValidity()) return;\r\n\r\n    el.value = TabViewer.getZoomLevels().join('; ');\r\n  }\r\n\r\n\r\n  /**\r\n   * Gets zoom levels\r\n   */\r\n  private static getZoomLevels() {\r\n    const el = query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]');\r\n    const levels = el.value.split(';').map(i => i.trim()).filter(Boolean)\r\n      .map(i => parseFloat(i));\r\n\r\n    return levels;\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabToolbar {\r\n  /**\r\n   * Loads settings for tab Toolbar.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Toolbar.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('toolbar');\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabGallery {\r\n  /**\r\n   * Loads settings for tab Gallery.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Gallery.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('gallery');\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabFileAssocs {\r\n  /**\r\n   * Loads settings for tab FileAssocs.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab FileAssocs.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('file_assocs');\r\n  }\r\n}\r\n","import { ITool } from '@/@types/FrmSettings';\r\nimport {\r\n  escapeHtml,\r\n  getChangedSettingsFromTab,\r\n  openFilePicker,\r\n  openModalDialog,\r\n  renderHotkeyList,\r\n} from '@/helpers';\r\nimport Language from './Language';\r\n\r\n\r\nexport default class TabTools {\r\n  private static HOTKEY_SEPARATOR = '#';\r\n\r\n  /**\r\n   * Loads settings for tab Tools.\r\n   */\r\n  static loadSettings() {\r\n    TabTools.loadToolList();\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Tools.\r\n   */\r\n  static addEvents() {\r\n    query('#Btn_AddTool').addEventListener('click', async () => {\r\n      const defaultTool = {\r\n        ToolId: '',\r\n        ToolName: '',\r\n        Executable: '',\r\n        Arguments: _pageSettings.FILE_MACRO,\r\n        Hotkeys: [],\r\n        IsIntegrated: false,\r\n      } as ITool;\r\n\r\n      await openModalDialog('#Dialog_AddOrEditTool', 'create', defaultTool, async () => {\r\n        TabTools.addEventsForToolDialog();\r\n        TabTools.updateToolCommandPreview();\r\n\r\n        await renderHotkeyList('#Dialog_AddOrEditTool .hotkey-list', defaultTool.Hotkeys,\r\n          () => TabTools.updateToolCommandPreview());\r\n      });\r\n\r\n      const tool = TabTools.getToolDialogFormData();\r\n      TabTools.setToolItemToList(tool.ToolId, tool);\r\n    }, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('tools');\r\n    const originalToolListJson = JSON.stringify(_pageSettings.toolList || []);\r\n\r\n    settings.Tools = TabTools.getToolListFromDom();\r\n    const newToolListJson = JSON.stringify(settings.Tools);\r\n\r\n    if (newToolListJson === originalToolListJson) {\r\n      delete settings.Tools;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads tool list but do not update `_pageSettings.toolList`.\r\n   */\r\n  private static loadToolList(list?: ITool[]) {\r\n    const toolList: ITool[] = list ?? _pageSettings.toolList ?? [];\r\n\r\n    const tbodyEl = query<HTMLTableElement>('#Table_ToolList > tbody');\r\n    let tbodyHtml = '';\r\n    const btnDeleteHtml = `\r\n      <button type=\"button\" class=\"btn--icon px-1 ms-1\" lang-title=\"_._Delete\" data-action=\"delete\">\r\n        ${_pageSettings.icons.Delete}\r\n      </button>\r\n    `;\r\n\r\n    for (const item of toolList) {\r\n      let args = '<i lang-text=\"_._Empty\"></i>';\r\n      if (item.Arguments) {\r\n        args = `<code>${escapeHtml(item.Arguments)}</code>`;\r\n      }\r\n\r\n      const chkIntegratedHtml = `\r\n        <label class=\"ig-checkbox\">\r\n          <input type=\"checkbox\" disabled ${item.IsIntegrated === true ? 'checked' : ''} />\r\n          <div></div>\r\n        </label>\r\n      `;\r\n\r\n      const trHtml = `\r\n        <tr data-tool-id=\"${item.ToolId}\"\r\n          data-tool-name=\"${item.ToolName}\"\r\n          data-tool-integrated=\"${item.IsIntegrated}\"\r\n          data-tool-executable=\"${item.Executable}\"\r\n          data-tool-arguments=\"${item.Arguments}\"\r\n          data-tool-hotkeys=\"${(item.Hotkeys || []).join(TabTools.HOTKEY_SEPARATOR)}\">\r\n          <td class=\"cell-counter\"></td>\r\n          <td class=\"cell-sticky text-nowrap\">${item.ToolId}</td>\r\n          <td class=\"text-nowrap\">${item.ToolName}</td>\r\n          <td class=\"text-center\">${chkIntegratedHtml}</td>\r\n          <td>\r\n            <kbd>Ctrl+S</kbd>\r\n          </td>\r\n          <td class=\"text-nowrap\">\r\n            <code>${escapeHtml(item.Executable)}</code>\r\n          </td>\r\n          <td class=\"text-nowrap\" style=\"--cell-border-right-color: transparent;\">${args}</td>\r\n          <td class=\"cell-sticky-right text-nowrap\" width=\"1\" style=\"border-left: 0;\">\r\n            <button type=\"button\" class=\"btn--icon px-1\" lang-title=\"_._Edit\" data-action=\"edit\">\r\n              ${_pageSettings.icons.Edit}\r\n            </button>\r\n            ${item.ToolId !== 'Tool_ExifGlass' ? btnDeleteHtml : ''}\r\n          </td>\r\n        </tr>\r\n      `;\r\n\r\n      tbodyHtml += trHtml;\r\n    }\r\n\r\n    tbodyEl.innerHTML = tbodyHtml;\r\n    Language.load();\r\n\r\n    queryAll<HTMLButtonElement>('#Table_ToolList button[data-action]').forEach(el => {\r\n      el.addEventListener('click', async (e) => {\r\n        const action = (e.target as HTMLInputElement).getAttribute('data-action');\r\n        const trEl = (e.target as HTMLInputElement).closest('tr');\r\n        const toolId = trEl.getAttribute('data-tool-id');\r\n\r\n        if (action === 'delete') {\r\n          trEl.remove();\r\n        }\r\n        else if (action === 'edit') {\r\n          TabTools.editTool(toolId);\r\n        }\r\n      }, false);\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Gets tool list from DOM.\r\n   */\r\n  private static getToolListFromDom() {\r\n    const trEls = queryAll<HTMLTableRowElement>('#Table_ToolList > tbody > tr');\r\n    const toolList = trEls.map(el => {\r\n      const toolId = el.getAttribute('data-tool-id') ?? '';\r\n      const toolName = el.getAttribute('data-tool-name') ?? '';\r\n      const toolIntegrated = el.getAttribute('data-tool-integrated') === 'true';\r\n      const toolExecutable = el.getAttribute('data-tool-executable') ?? '';\r\n      const toolArguments = el.getAttribute('data-tool-arguments') ?? '';\r\n\r\n      const hotkeysStr = el.getAttribute('data-tool-hotkeys') ?? '';\r\n      const toolHotkeys = hotkeysStr.split(TabTools.HOTKEY_SEPARATOR).filter(Boolean);\r\n\r\n      return {\r\n        ToolId: toolId,\r\n        ToolName: toolName,\r\n        IsIntegrated: toolIntegrated,\r\n        Executable: toolExecutable,\r\n        Arguments: toolArguments,\r\n        Hotkeys: toolHotkeys,\r\n      } as ITool;\r\n    });\r\n\r\n    return toolList;\r\n  }\r\n\r\n\r\n  /**\r\n   * Open modal dialog to edit the tool.\r\n   * @param toolId Tool id\r\n   */\r\n  private static async editTool(toolId: string) {\r\n    const trEl = query<HTMLTableRowElement>(`#Table_ToolList tr[data-tool-id=\"${toolId}\"]`);\r\n\r\n    const hotkeysStr = trEl.getAttribute('data-tool-hotkeys') || '';\r\n    const toolHotkeys = hotkeysStr.split(TabTools.HOTKEY_SEPARATOR).filter(Boolean);\r\n\r\n    let tool: ITool = {\r\n      ToolId: toolId,\r\n      ToolName: trEl.getAttribute('data-tool-name') || '',\r\n      Executable: trEl.getAttribute('data-tool-executable') || '',\r\n      Arguments: trEl.getAttribute('data-tool-arguments') || '',\r\n      IsIntegrated: trEl.getAttribute('data-tool-integrated') === 'true',\r\n      Hotkeys: toolHotkeys,\r\n    };\r\n\r\n    // open dialog\r\n    await openModalDialog('#Dialog_AddOrEditTool', 'edit', tool, async () => {\r\n      query<HTMLInputElement>('[name=\"_IsIntegrated\"]').checked = tool.IsIntegrated ?? false;\r\n      TabTools.addEventsForToolDialog();\r\n      TabTools.updateToolCommandPreview();\r\n\r\n      await renderHotkeyList('#Dialog_AddOrEditTool .hotkey-list', tool.Hotkeys,\r\n        () => TabTools.updateToolCommandPreview());\r\n    });\r\n\r\n    tool = TabTools.getToolDialogFormData();\r\n    TabTools.setToolItemToList(toolId, tool);\r\n  }\r\n\r\n\r\n  /**\r\n   * Gets tool data from the modal dialog.\r\n   */\r\n  private static getToolDialogFormData() {\r\n    // get data\r\n    const tool: ITool = {\r\n      ToolId: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_ToolId\"]').value.trim(),\r\n      ToolName: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_ToolName\"]').value.trim(),\r\n      Executable: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_Executable\"]').value.trim(),\r\n      Arguments: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_Arguments\"]').value.trim(),\r\n      Hotkeys: [], // query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_Hotkeys\"]').value.trim(),\r\n      IsIntegrated: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_IsIntegrated\"]').checked,\r\n    };\r\n\r\n    return tool;\r\n  }\r\n\r\n\r\n  /**\r\n   * Sets the tool item to the list.\r\n   * @param oldToolId If not found, the tool will be inserted into the list.\r\n   */\r\n  private static setToolItemToList(oldToolId: string, tool: ITool) {\r\n    if (!tool.ToolId || !tool.ToolName || !tool.Executable) return;\r\n    const toolList = TabTools.getToolListFromDom();\r\n    const toolIndex = toolList.findIndex(i => i.ToolId === oldToolId);\r\n\r\n    // edit\r\n    if (toolIndex !== -1) {\r\n      toolList[toolIndex] = tool;\r\n    }\r\n    // create\r\n    else {\r\n      toolList.push(tool);\r\n    }\r\n\r\n    TabTools.loadToolList(toolList);\r\n  }\r\n\r\n\r\n  private static addEventsForToolDialog() {\r\n    query('[name=\"_Executable\"]').removeEventListener('input', TabTools.updateToolCommandPreview, false);\r\n    query('[name=\"_Executable\"]').addEventListener('input', TabTools.updateToolCommandPreview, false);\r\n\r\n    query('[name=\"_Arguments\"]').removeEventListener('input', TabTools.updateToolCommandPreview, false);\r\n    query('[name=\"_Arguments\"]').addEventListener('input', TabTools.updateToolCommandPreview, false);\r\n\r\n    query('#btnBrowseTool').removeEventListener('click', TabTools.handleBtnBrowseToolClickEvent, false);\r\n    query('#btnBrowseTool').addEventListener('click', TabTools.handleBtnBrowseToolClickEvent, false);\r\n  }\r\n\r\n\r\n  private static updateToolCommandPreview() {\r\n    let executable = query<HTMLInputElement>('[name=\"_Executable\"]').value || '';\r\n    executable = executable.trim();\r\n\r\n    let args = query<HTMLInputElement>('[name=\"_Arguments\"]').value || '';\r\n    args = args.trim().replaceAll('<file>', '\"C:\\\\fake dir\\\\photo.jpg\"');\r\n\r\n    query('#Tool_CommandPreview').innerText = [executable, args].filter(Boolean).join(' ');\r\n  }\r\n\r\n\r\n  private static async handleBtnBrowseToolClickEvent() {\r\n    const filePaths = await openFilePicker() ?? [];\r\n    if (!filePaths.length) return;\r\n\r\n    query<HTMLInputElement>('[name=\"_Executable\"]').value = filePaths[0];\r\n  }\r\n\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabLayout {\r\n  /**\r\n   * Loads settings for tab Layout.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Layout.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('layout');\r\n  }\r\n}\r\n","import TabGeneral from './TabGeneral';\r\nimport TabImage from './TabImage';\r\nimport TabSlideshow from './TabSlideshow';\r\nimport TabMouseKeyboard from './TabMouseKeyboard';\r\nimport TabLanguage from './TabLanguage';\r\nimport TabEdit from './TabEdit';\r\nimport TabViewer from './TabViewer';\r\nimport TabToolbar from './TabToolbar';\r\nimport TabGallery from './TabGallery';\r\nimport TabFileAssocs from './TabFileAssocs';\r\nimport TabTools from './TabTools';\r\nimport TabAppearance from './TabAppearance';\r\nimport TabLayout from './TabLayout';\r\n\r\nexport default class Settings {\r\n  /**\r\n   * Loads settings.\r\n   */\r\n  static load() {\r\n    Settings.loadSelectBoxEnums();\r\n    TabLanguage.loadLanguageList();\r\n\r\n\r\n    // auto loads settings for String, Number, Boolean\r\n    for (const configKey in _pageSettings.config) {\r\n      if (!Object.prototype.hasOwnProperty.call(_pageSettings.config, configKey)) {\r\n        continue;\r\n      }\r\n\r\n      const configValue = _pageSettings.config[configKey];\r\n\r\n      // only auto load the settings if the value type is supported\r\n      const canAutoSet = typeof configValue === 'string'\r\n        || typeof configValue === 'number'\r\n        || typeof configValue === 'boolean';\r\n      if (!canAutoSet) continue;\r\n\r\n\r\n      // find the html element\r\n      const el = query(`[name=\"${configKey}\"]`);\r\n      if (!el) continue;\r\n\r\n\r\n      // check the tag name and type\r\n      const tagName = el.tagName.toLowerCase();\r\n      if (tagName === 'select') {\r\n        (el as HTMLSelectElement).value = configValue.toString();\r\n      }\r\n      else if (tagName === 'input') {\r\n        const inputType = el.getAttribute('type').toLowerCase();\r\n        const inputEl = el as HTMLInputElement;\r\n\r\n        if (inputType === 'radio' || inputType === 'checkbox') {\r\n          inputEl.checked = Boolean(configValue);\r\n        }\r\n        else if (inputType === 'color') {\r\n          const colorHex = configValue.toString() || '#00000000';\r\n\r\n          // remove alpha\r\n          inputEl.value = colorHex.substring(0, colorHex.length - 2);\r\n        }\r\n        else {\r\n          inputEl.value = configValue.toString();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    // load specific settings\r\n    TabGeneral.loadSettings();\r\n    TabImage.loadSettings();\r\n    TabSlideshow.loadSettings();\r\n    TabEdit.loadSettings();\r\n    TabViewer.loadSettings();\r\n    TabToolbar.loadSettings();\r\n    TabGallery.loadSettings();\r\n    TabLanguage.loadSettings();\r\n    TabMouseKeyboard.loadSettings();\r\n    TabFileAssocs.loadSettings();\r\n    TabTools.loadSettings();\r\n    TabLanguage.loadSettings();\r\n    TabAppearance.loadSettings();\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for the footer of setting.\r\n   */\r\n  static addEventsForFooter() {\r\n    query('#BtnCancel').addEventListener('click', () => post('BtnCancel'), false);\r\n\r\n    query('#BtnOK').addEventListener('click', () => {\r\n      const allSettings = Settings.getAllSettings();\r\n      Settings.updateInitSettings(allSettings);\r\n\r\n      post('BtnOK', allSettings, true);\r\n    }, false);\r\n\r\n    query('#BtnApply').addEventListener('click', () => {\r\n      const allSettings = Settings.getAllSettings();\r\n      Settings.updateInitSettings(allSettings);\r\n\r\n      post('BtnApply', allSettings, true);\r\n    }, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Gets all settings as an object.\r\n   */\r\n  static getAllSettings() {\r\n    const settings: Record<string, any> = {\r\n      ...TabGeneral.exportSettings(),\r\n      ...TabImage.exportSettings(),\r\n      ...TabSlideshow.exportSettings(),\r\n      ...TabEdit.exportSettings(),\r\n      ...TabViewer.exportSettings(),\r\n      ...TabToolbar.exportSettings(),\r\n      ...TabGallery.exportSettings(),\r\n      ...TabLayout.exportSettings(),\r\n      ...TabMouseKeyboard.exportSettings(),\r\n      ...TabFileAssocs.exportSettings(),\r\n      ...TabTools.exportSettings(),\r\n      ...TabLanguage.exportSettings(),\r\n      ...TabAppearance.exportSettings(),\r\n    };\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Updates the `_pageSettings.config`.\r\n   */\r\n  static updateInitSettings(newSettings: Record<string, any>) {\r\n    const settingKeys = Object.keys(newSettings);\r\n\r\n    settingKeys.forEach(key => {\r\n      if (_pageSettings.config.hasOwnProperty(key)) {\r\n        _pageSettings.config[key] = newSettings[key];\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads select box items.\r\n   */\r\n  private static loadSelectBoxEnums() {\r\n    // load enums\r\n    for (const enumName in _pageSettings.enums) {\r\n      if (!Object.prototype.hasOwnProperty.call(_pageSettings.enums, enumName)) {\r\n        continue;\r\n      }\r\n\r\n      const enumKeys = _pageSettings.enums[enumName];\r\n      const selectEls = queryAll<HTMLSelectElement>(`select[data-enum=\"${enumName}\"]`);\r\n\r\n      for (const el of selectEls) {\r\n        enumKeys.forEach(key => {\r\n          const optionEl = new Option(`${key}`, key);\r\n          optionEl.setAttribute('lang-text', `_.${enumName}._${key}`);\r\n\r\n          el.add(optionEl);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { Webview } from './helpers/webview';\r\nimport { query, queryAll, on, post, postAsync } from './helpers/globalHelpers';\r\n\r\nimport Sidebar from './FrmSettings/Sidebar';\r\nimport Language from './FrmSettings/Language';\r\nimport Settings from './FrmSettings/Settings';\r\n\r\nimport TabGeneral from './FrmSettings/TabGeneral';\r\nimport TabImage from './FrmSettings/TabImage';\r\nimport TabSlideshow from './FrmSettings/TabSlideshow';\r\nimport TabMouseKeyboard from './FrmSettings/TabMouseKeyboard';\r\nimport TabLanguage from './FrmSettings/TabLanguage';\r\nimport TabEdit from './FrmSettings/TabEdit';\r\nimport TabViewer from './FrmSettings/TabViewer';\r\nimport TabToolbar from './FrmSettings/TabToolbar';\r\nimport TabGallery from './FrmSettings/TabGallery';\r\nimport TabAppearance from './FrmSettings/TabAppearance';\r\nimport TabFileAssocs from './FrmSettings/TabFileAssocs';\r\nimport TabTools from './FrmSettings/TabTools';\r\n\r\n\r\n// initialize webview event listeners\r\nwindow._webview = new Webview();\r\n_webview.startListening();\r\n\r\n\r\n// export to global\r\nwindow.query = query;\r\nwindow.queryAll = queryAll;\r\nwindow.on = on;\r\nwindow.post = post;\r\nwindow.postAsync = postAsync;\r\n\r\nif (!window._pageSettings) {\r\n  window._pageSettings = {\r\n    initTab: 'tools',\r\n    config: {},\r\n    lang: {},\r\n    langList: [],\r\n    toolList: [\r\n      {\r\n        ToolId: 'Tool_ExifGlass',\r\n        ToolName: 'ExifGlass - EXIF metadata viewer',\r\n        Executable: 'D:\\\\_GITHUB\\\\@d2phap\\\\ExifGlass\\\\Source\\\\ExifGlass\\\\bin\\\\x64\\\\Debug\\\\net7.0\\\\ExifGlass.exe',\r\n        Arguments: '<file>',\r\n        IsIntegrated: true,\r\n      },\r\n      {\r\n        ToolId: 'Tool_DemoApp',\r\n        ToolName: 'Demo app',\r\n        Executable: 'D:\\\\_GITHUB\\\\@imageglass\\\\ImageGlass.Tools\\\\Source\\\\DemoApp\\\\bin\\\\Debug\\\\net7.0-windows\\\\DemoApp.exe',\r\n        Arguments: '<file>',\r\n        IsIntegrated: true,\r\n      },\r\n    ],\r\n    themeList: [],\r\n    enums: {\r\n      ImageOrderBy: [],\r\n      ImageOrderType: [],\r\n      ColorProfileOption: [],\r\n      AfterEditAppAction: [],\r\n      ImageInterpolation: [],\r\n      MouseWheelAction: [],\r\n      MouseWheelEvent: [],\r\n      MouseClickEvent: [],\r\n      BackdropStyle: [],\r\n      ToolbarItemModelType: [],\r\n    },\r\n    icons: {\r\n      Delete: '',\r\n      Edit: '',\r\n      Moon: '',\r\n      Sun: '',\r\n    },\r\n    startUpDir: '',\r\n    configDir: '',\r\n    userConfigFilePath: '',\r\n    defaultThemeDir: '',\r\n    FILE_MACRO: '',\r\n  };\r\n}\r\n_pageSettings.setSidebarActiveMenu = Sidebar.setActiveMenu;\r\n_pageSettings.loadLanguage = Language.load;\r\n_pageSettings.loadSettings = Settings.load;\r\n_pageSettings.loadLanguageList = TabLanguage.loadLanguageList;\r\n\r\n\r\n// sidebar\r\nSidebar.addEvents();\r\n\r\n// load settings\r\nSettings.load();\r\nLanguage.load();\r\n\r\n// add event listeners\r\nSettings.addEventsForFooter();\r\nTabGeneral.addEvents();\r\nTabImage.addEvents();\r\nTabSlideshow.addEvents();\r\nTabEdit.addEvents();\r\nTabViewer.addEvents();\r\nTabToolbar.addEvents();\r\nTabGallery.addEvents();\r\nTabLanguage.addEvents();\r\nTabMouseKeyboard.addEvents();\r\nTabFileAssocs.addEvents();\r\nTabTools.addEvents();\r\nTabLanguage.addEvents();\r\nTabAppearance.addEvents();\r\n\r\n// load the last open tab\r\nSidebar.setActiveMenu(_pageSettings.initTab);\r\n","\r\nexport type WebviewEventHandlerFn = (name: string, data?: any) => void;\r\n\r\nexport class Webview {\r\n  public eventHandlers: Record<string, WebviewEventHandlerFn> = {};\r\n\r\n  addEvent(name: string, handler: WebviewEventHandlerFn) {\r\n    this.eventHandlers[name] = handler;\r\n  }\r\n\r\n  removeEvent(name: string) {\r\n    delete this.eventHandlers[name];\r\n  }\r\n\r\n  startListening() {\r\n    // @ts-ignore\r\n    window.chrome.webview?.addEventListener('message', ({ data }) => {\r\n      const eName = data?.Name ?? '';\r\n      const eData = data?.Data ?? '';\r\n      const handler = this.eventHandlers[eName];\r\n      const hasHandler = !!handler;\r\n\r\n      console.info(`Received event '${eName}' (handler=${hasHandler}) with data:`, eData);\r\n\r\n      if (!hasHandler) return;\r\n      handler(eName, eData);\r\n    });\r\n  }\r\n}\r\n"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","Symbol","toStringTag","Object","defineProperty","value","Language","static","langKey","_pageSettings","lang","prototype","hasOwnProperty","call","langValue","queryAll","forEach","el","innerText","title","html","i","childElementCount","replaceAll","children","item","outerHTML","innerHTML","pause","time","data","Promise","resolve","setTimeout","getChangedSettingsFromTab","tab","result","allEls","configName","name","configValue","startsWith","checkValidity","type","checked","config","escapeHtml","replace","openModalDialog","async","selector","purpose","onOpen","onSubmit","isClosed","dialogEl","query","classList","remove","add","addEventListener","e","target","rect","getBoundingClientRect","left","clientX","right","top","clientY","bottom","console","log","keys","key","inputEl","showModal","renderHotkeyList","ulSelector","hotkeys","onChange","ulEl","ulHtml","icons","Delete","load","action","getAttribute","hotkeyItemEl","closest","hotkey","postAsync","openHotkeyPicker","on","handler","_webview","addEvent","TabAppearance","loadThemeList","loadThemeListStatus","handleBackgroundColorChanged","handleSlideshowBackgroundColorChanged","darkTheme","lightTheme","darkEl","lightEl","resetBackgroundColor","resetSlideshowBackgroundColor","colorEL","colorValue","newThemeList","post","settings","DarkTheme","LightTheme","list","Array","isArray","length","themeList","th","FolderPath","PreviewImage","Info","Name","IsDarkMode","Version","Description","Author","Website","Email","FolderName","Moon","Sun","defaultThemeDir","themeName","themeDir","currentThemeName","document","documentElement","theme","find","colorHex","BgColor","style","setProperty","Sidebar","navItems","from","querySelectorAll","activeTabName","setActiveMenu","tabPageName","tabPageEl","navItem","TabGeneral","isOriginalAutoUpdateEnabled","AutoUpdate","startUpDir","configDir","userConfigFilePath","Date","toISOString","TabImage","colorProfile","ColorProfile","includes","handleColorProfileChanged","handleUseEmbeddedThumbnailOptionsChanged","profileFilePath","trim","ImageBoosterCacheCount","originalColorProfile","useCustomProfile","hidden","enableForRaw","enableForOthers","showSizeSection","TabSlideshow","handleUseRandomIntervalForSlideshowChanged","handleSlideshowIntervalsChanged","fromEl","toEl","max","min","intervalFrom","intervalTo","intervalFromText","toTimeString","intervalToText","useRandomInterval","totalSeconds","dt","minutes","getUTCMinutes","toString","seconds","getUTCSeconds","msSeconds","getUTCMilliseconds","TabMouseKeyboard","MouseWheelActions","Scroll","CtrlAndScroll","ShiftAndScroll","AltAndScroll","resetDefaultMouseWheelActions","newWheelScrollValue","newWheelCtrlAndScrollValue","newWheelShiftAndScrollValue","newWheelAltAndScrollValue","mouseWheelActions","TabLanguage","handleLanguageChanged","removeEventListener","onBtn_RefreshLanguageList","onLnk_InstallLanguage","newLangList","loadLanguageList","langFileName","langList","FileName","Metadata","selectEl","options","displayText","LocalName","EnglishName","optionEl","Option","TabEdit","TabViewer","zoomLevels","ZoomLevels","join","handleZoomLevelsChanged","handleZoomLevelsBlur","getZoomLevels","originalLevelsString","newLevelsString","some","Number","isFinite","setCustomValidity","split","map","filter","Boolean","parseFloat","TabToolbar","TabGallery","TabFileAssocs","TabTools","loadToolList","defaultTool","ToolId","ToolName","Executable","Arguments","FILE_MACRO","Hotkeys","IsIntegrated","addEventsForToolDialog","updateToolCommandPreview","tool","getToolDialogFormData","setToolItemToList","originalToolListJson","JSON","stringify","toolList","Tools","getToolListFromDom","tbodyEl","tbodyHtml","btnDeleteHtml","args","chkIntegratedHtml","HOTKEY_SEPARATOR","Edit","trEl","toolId","editTool","toolHotkeys","oldToolId","toolIndex","findIndex","push","handleBtnBrowseToolClickEvent","executable","filePaths","openFilePicker","TabLayout","Settings","loadSelectBoxEnums","configKey","tagName","toLowerCase","inputType","substring","loadSettings","allSettings","getAllSettings","updateInitSettings","exportSettings","newSettings","enumName","enums","enumKeys","selectEls","setAttribute","window","eventHandlers","removeEvent","startListening","chrome","webview","eName","eData","Data","hasHandler","info","querySelector","autoConvertToJson","msgData","postMessage","hasResult","eventName","eventData","initTab","ImageOrderBy","ImageOrderType","ColorProfileOption","AfterEditAppAction","ImageInterpolation","MouseWheelAction","MouseWheelEvent","MouseClickEvent","BackdropStyle","ToolbarItemModelType","setSidebarActiveMenu","loadLanguage","addEvents","addEventsForFooter"],"sourceRoot":""}