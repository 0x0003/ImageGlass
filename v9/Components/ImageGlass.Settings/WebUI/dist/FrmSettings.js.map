{"version":3,"file":"FrmSettings.js","mappings":"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","sources":["webpack://ig-ui/webpack/universalModuleDefinition","webpack://ig-ui/webpack/bootstrap","webpack://ig-ui/webpack/runtime/make namespace object","webpack://ig-ui/./src/FrmSettings/Language.ts","webpack://ig-ui/./src/helpers/index.ts","webpack://ig-ui/./src/helpers/globalHelpers.ts","webpack://ig-ui/./src/FrmSettings/TabAppearance.ts","webpack://ig-ui/./src/FrmSettings/Sidebar.ts","webpack://ig-ui/./src/FrmSettings/TabGeneral.ts","webpack://ig-ui/./src/FrmSettings/TabImage.ts","webpack://ig-ui/./src/FrmSettings/TabSlideshow.ts","webpack://ig-ui/./src/FrmSettings/TabMouse.ts","webpack://ig-ui/./src/FrmSettings/TabKeyboard.ts","webpack://ig-ui/./src/FrmSettings/TabLanguage.ts","webpack://ig-ui/./src/FrmSettings/TabEdit.ts","webpack://ig-ui/./src/FrmSettings/TabViewer.ts","webpack://ig-ui/./src/FrmSettings/TabToolbar.ts","webpack://ig-ui/./src/FrmSettings/TabGallery.ts","webpack://ig-ui/./src/FrmSettings/TabFileAssocs.ts","webpack://ig-ui/./src/FrmSettings/TabTools.ts","webpack://ig-ui/./src/FrmSettings/TabLayout.ts","webpack://ig-ui/./src/FrmSettings/Settings.ts","webpack://ig-ui/./src/FrmSettings.ts","webpack://ig-ui/./src/helpers/webview.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ig-ui\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ig-ui\"] = factory();\n\telse\n\t\troot[\"ig-ui\"] = factory();\n})(this, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\r\nexport default class Language {\r\n  /**\r\n   * Loads language.\r\n   */\r\n  static load() {\r\n    for (const langKey in _pageSettings.lang) {\r\n      if (!Object.prototype.hasOwnProperty.call(_pageSettings.lang, langKey)) {\r\n        continue;\r\n      }\r\n  \r\n      const langValue = _pageSettings.lang[langKey];\r\n  \r\n      queryAll(`[lang-text=\"${langKey}\"]`).forEach(el => {\r\n        el.innerText = langValue;\r\n      });\r\n\r\n      queryAll(`[lang-title=\"${langKey}\"]`).forEach(el => {\r\n        el.title = langValue;\r\n      });\r\n\r\n      queryAll(`[lang-html=\"${langKey}\"]`).forEach(el => {\r\n        let html = langValue;\r\n\r\n        for (let i = 0; i < el.childElementCount; i++) {\r\n          html = html.replaceAll(`{${i}}`, el.children.item(i).outerHTML);\r\n        }\r\n\r\n        el.innerHTML = html;\r\n      });\r\n    }\r\n  }\r\n}\r\n","import Language from '@/FrmSettings/Language';\r\n\r\n\r\n/**\r\n * Pauses the thread for a period\r\n * @param time Duration to pause in millisecond\r\n * @param data Data to return after resuming\r\n * @returns a promise\r\n */\r\nexport const pause = <T>(time: number, data?: T): Promise<T> => new Promise((resolve) => {\r\n  setTimeout(() => resolve(data as T), time);\r\n});\r\n\r\n\r\n/**\r\n * Gets the settings that are changed by user (`_pageSettings.config`) from the input tab.\r\n */\r\nexport const getChangedSettingsFromTab = (tab: string) => {\r\n  const result: Record<string, any> = {};\r\n  const inputEls = queryAll<HTMLInputElement>(`[tab=\"${tab}\"] input[name]`);\r\n  const selectEls = queryAll<HTMLSelectElement>(`[tab=\"${tab}\"] select[name]`);\r\n  const allEls = [...inputEls, ...selectEls];\r\n\r\n  for (const el of allEls) {\r\n    const configName = el.name;\r\n    let configValue: boolean | number | string = '';\r\n    if (el.name.startsWith('_')) continue;\r\n    if (!el.checkValidity()) continue;\r\n\r\n\r\n    // bool value\r\n    if (el.type === 'checkbox') {\r\n      configValue = (el as HTMLInputElement).checked;\r\n    }\r\n    // number value\r\n    else if (el.type === 'number') {\r\n      configValue = +el.value;\r\n    }\r\n    // string value\r\n    else {\r\n      configValue = el.value;\r\n    }\r\n\r\n    if (configValue !== _pageSettings.config[configName]) {\r\n      result[configName] = configValue;\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n\r\n/**\r\n * Escapes HTML characters.\r\n */\r\nexport const escapeHtml = (html: string) => {\r\n  return html\r\n    .replace(/&/g, '&amp;') // &\r\n    .replace(/</g, '&lt;') // <\r\n    .replace(/>/g, '&gt;') // >\r\n    .replace(/\"/g, '&quot;'); // \"\r\n};\r\n\r\n\r\n/**\r\n * Opens modal dialog and return value.\r\n * @param selector Dialog selector.\r\n * @param data The data to pass to the dialog.\r\n */\r\nexport const openModalDialog = async (\r\n  selector: string,\r\n  purpose: 'create' | 'edit',\r\n  data: Record<string, any> = {},\r\n  onOpen?: (el: HTMLDialogElement) => any,\r\n  onSubmit?: (e: SubmitEvent) => any) => {\r\n  let isClosed = false;\r\n  const dialogEl = query<HTMLDialogElement>(selector);\r\n  dialogEl.classList.remove('dialog--create', 'dialog--edit');\r\n  dialogEl.classList.add(`dialog--${purpose}`);\r\n\r\n  // add shaking effect when clicking outside of dialog\r\n  dialogEl.addEventListener('click', async (e) => {\r\n    const el = e.target as HTMLDialogElement;\r\n    const rect = el.getBoundingClientRect();\r\n\r\n    // click on backdrop\r\n    if (rect.left > e.clientX\r\n      || rect.right < e.clientX\r\n      || rect.top > e.clientY\r\n      || rect.bottom < e.clientY) {\r\n      // shake the modal for 500ms\r\n      el.classList.add('ani-shaking');\r\n      await pause(500);\r\n      el.classList.remove('ani-shaking');\r\n    }\r\n  }, false);\r\n\r\n  // on close\r\n  dialogEl.addEventListener('close', () => isClosed = true, false);\r\n\r\n  // on submit\r\n  query<HTMLFormElement>(`${selector} > form`).addEventListener('submit', async (e) => {\r\n    if (onSubmit) await Promise.resolve(onSubmit(e));\r\n  });\r\n\r\n  console.log(data);\r\n  Object.keys(data).forEach(key => {\r\n    const inputEl = query<HTMLInputElement>(`${selector} [name=\"_${key}\"]`);\r\n    if (inputEl) inputEl.value = data[key];\r\n  });\r\n\r\n  // on open\r\n  if (onOpen) await Promise.resolve(onOpen(dialogEl));\r\n\r\n  // open modal dialog\r\n  dialogEl.showModal();\r\n\r\n  while (!isClosed) {\r\n    await pause(100);\r\n  }\r\n\r\n  return dialogEl;\r\n};\r\n\r\n\r\n/**\r\n * Open file picker.\r\n */\r\nexport const openFilePicker = async (options?: {\r\n  multiple?: boolean,\r\n  filter?: string,\r\n}) => {\r\n  const filePaths = await postAsync<string[]>('OpenFilePicker', options || {}, true);\r\n\r\n  return filePaths;\r\n};\r\n\r\n\r\n/**\r\n * Open hotkey picker.\r\n */\r\nexport const openHotkeyPicker = async (): Promise<string | null> => {\r\n  const hotkey = await postAsync<string>('OpenHotkeyPicker');\r\n\r\n  return hotkey;\r\n};\r\n\r\n\r\n/**\r\n * Renders hotkey list\r\n * @param ulSelector CSS selector of the list element\r\n * @param hotkeys Hotkey list to render\r\n */\r\nexport const renderHotkeyList = async (\r\n  ulSelector: string,\r\n  hotkeys: string[],\r\n  onChange?: (action: 'delete' | 'add') => any,\r\n) => {\r\n  const ulEl = query(ulSelector);\r\n  let ulHtml = '';\r\n\r\n  // load list of hotkeys\r\n  for (const key of hotkeys) {\r\n    ulHtml += `\r\n    <li class=\"hotkey-item\">\r\n      <kbd>${key}</kbd>\r\n      <button type=\"button\" class=\"btn--icon\" lang-title=\"_._Delete\" data-action=\"delete\">\r\n        ${_pageSettings.icons.Delete}\r\n      </button>\r\n    </li>`;\r\n  }\r\n\r\n  // load 'Add hotkey' button\r\n  ulHtml += `<li>\r\n    <button type=\"button\" lang-title=\"_._AddHotkey\" data-action=\"add\">[Add hotkey…]</button>\r\n  </li>`;\r\n\r\n  ulEl.innerHTML = ulHtml;\r\n  Language.load();\r\n\r\n  // add event listerner for 'Delete' hotkey\r\n  queryAll<HTMLButtonElement>(`${ulSelector} button[data-action]`).forEach(el => {\r\n    el.addEventListener('click', async () => {\r\n      const action = el.getAttribute('data-action');\r\n      const newHotkeys = queryAll(`${ulSelector} .hotkey-item > kbd`)\r\n        .map(kbdEl => kbdEl.innerText);\r\n\r\n      if (action === 'delete') {\r\n        const hotkeyItemEl = el.closest('.hotkey-item');\r\n        hotkeyItemEl?.remove();\r\n        if (onChange) await Promise.resolve(onChange(action));\r\n      }\r\n      else if (action === 'add') {\r\n        const hotkey = await openHotkeyPicker();\r\n        if (!hotkey) return;\r\n\r\n\r\n        renderHotkeyList(ulSelector, [...newHotkeys, hotkey], onChange);\r\n        if (onChange) await Promise.resolve(onChange(action));\r\n\r\n        // set focus to the 'Add hotkey' button\r\n        query<HTMLButtonElement>(`${ulSelector} button[data-action=\"add\"]`)?.focus();\r\n      }\r\n    }, false);\r\n  });\r\n};\r\n","import { pause } from '.';\r\nimport { WebviewEventHandlerFn } from './webview';\r\n\r\n\r\n/**\r\n * Gets the first matched element with the query selector.\r\n */\r\nexport const query = <T = HTMLElement>(selector: string): T | null => {\r\n  try {\r\n    return document.querySelector(selector) as T;\r\n  }\r\n  catch {}\r\n\r\n  return null;\r\n};\r\n\r\n\r\n/**\r\n * Gets all matched elements with the query selector.\r\n */\r\nexport const queryAll = <T = HTMLElement>(selector: string) => {\r\n  try {\r\n    return Array.from(document.querySelectorAll(selector)) as T[];\r\n  }\r\n  catch {}\r\n\r\n  return [];\r\n};\r\n\r\n\r\n/**\r\n * Add event listerner from backend.\r\n * @param name Event name\r\n * @param handler Function to handle the event\r\n */\r\nexport const on = (name: string, handler: WebviewEventHandlerFn) => {\r\n  _webview.addEvent(name, handler);\r\n};\r\n\r\n\r\n/**\r\n * Send an event to backend.\r\n * @param name Event name\r\n * @param data Data to send to backend, it will be converted to JSON string.\r\n */\r\nexport const post = (name: string, data?: any, autoConvertToJson?: boolean) => {\r\n  const msgData = (autoConvertToJson ?? false) ? JSON.stringify(data) : data;\r\n\r\n  // @ts-ignore\r\n  window.chrome.webview?.postMessage({ name, data: msgData });\r\n};\r\n\r\n\r\n/**\r\n * Send an event to backend and wait for the returned data.\r\n * @param name Event name\r\n * @param data Data to send to backend, it will be converted to JSON string.\r\n */\r\nexport const postAsync = async <T = unknown>(name: string, data?: any, autoConvertToJson?: boolean) => {\r\n  let hasResult = false;\r\n  let result: T = null;\r\n\r\n  on(name, (eventName, eventData) => {\r\n    if (eventName !== name) return;\r\n\r\n    hasResult = true;\r\n    result = eventData;\r\n    _webview.removeEvent(name);\r\n  });\r\n\r\n  const msgData = (autoConvertToJson ?? false) ? JSON.stringify(data) : data;\r\n\r\n  // @ts-ignore\r\n  window.chrome.webview?.postMessage({ name, data: msgData });\r\n\r\n  // wait for the returned data\r\n  while (!hasResult) {\r\n    await pause(100);\r\n  }\r\n\r\n  return result;\r\n};\r\n","import { ITheme } from '@/@types/FrmSettings';\r\nimport { getChangedSettingsFromTab } from '@/helpers';\r\nimport Language from './Language';\r\n\r\nexport default class TabAppearance {\r\n  /**\r\n   * Loads settings for tab Appearance.\r\n   */\r\n  static loadSettings() {\r\n    TabAppearance.loadThemeList();\r\n    TabAppearance.loadThemeListStatus();\r\n    TabAppearance.handleBackgroundColorChanged();\r\n    TabAppearance.handleSlideshowBackgroundColorChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads theme list check status\r\n   */\r\n  static loadThemeListStatus() {\r\n    const darkTheme = query<HTMLInputElement>('[name=\"DarkTheme\"]').value;\r\n    const lightTheme = query<HTMLInputElement>('[name=\"LightTheme\"]').value;\r\n\r\n    const darkEl = query<HTMLInputElement>(`[name=\"_DarkThemeOptions\"][value=\"${darkTheme}\"]`);\r\n    const lightEl = query<HTMLInputElement>(`[name=\"_LightThemeOptions\"][value=\"${lightTheme}\"]`);\r\n    if (darkEl) darkEl.checked = true;\r\n    if (lightEl) lightEl.checked = true;\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Appearance.\r\n   */\r\n  static addEvents() {\r\n    query('#Lnk_ResetBackgroundColor').addEventListener('click', TabAppearance.resetBackgroundColor, false);\r\n    query('#Lnk_ResetSlideshowBackgroundColor').addEventListener('click', TabAppearance.resetSlideshowBackgroundColor, false);\r\n\r\n    query('#Btn_BackgroundColor').addEventListener('click', async () => {\r\n      const colorEL = query<HTMLInputElement>('[name=\"BackgroundColor\"]');\r\n      const colorValue = await postAsync<string>('Btn_BackgroundColor', colorEL.value);\r\n\r\n      if (colorValue) {\r\n        colorEL.value = colorValue;\r\n        TabAppearance.handleBackgroundColorChanged();\r\n      }\r\n    }, false);\r\n    query('#Btn_SlideshowBackgroundColor').addEventListener('click', async () => {\r\n      const colorEL = query<HTMLInputElement>('[name=\"SlideshowBackgroundColor\"]');\r\n      const colorValue = await postAsync<string>('Btn_SlideshowBackgroundColor', colorEL.value);\r\n\r\n      if (colorValue) {\r\n        colorEL.value = colorValue;\r\n        TabAppearance.handleSlideshowBackgroundColorChanged();\r\n      }\r\n    }, false);\r\n\r\n    query('#Btn_InstallTheme').addEventListener('click', async () => {\r\n      const newThemeList = await postAsync<ITheme[]>('Btn_InstallTheme');\r\n      TabAppearance.loadThemeList(newThemeList);\r\n    }, false);\r\n\r\n    query('#Btn_RefreshThemeList').addEventListener('click', async () => {\r\n      const newThemeList = await postAsync<ITheme[]>('Btn_RefreshThemeList');\r\n      TabAppearance.loadThemeList(newThemeList);\r\n    }, false);\r\n\r\n    query('#Btn_OpenThemeFolder').addEventListener('click', () => post('Btn_OpenThemeFolder'), false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('appearance');\r\n\r\n    // DarkTheme\r\n    settings.DarkTheme = query<HTMLInputElement>('[name=\"DarkTheme\"]').value;\r\n    if (settings.DarkTheme === _pageSettings.config.DarkTheme) {\r\n      delete settings.DarkTheme;\r\n    }\r\n\r\n    // LightTheme\r\n    settings.LightTheme = query<HTMLInputElement>('[name=\"LightTheme\"]').value;\r\n    if (settings.LightTheme === _pageSettings.config.LightTheme) {\r\n      delete settings.LightTheme;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads all themes into the list.\r\n   */\r\n  private static loadThemeList(list?: ITheme[]) {\r\n    if (Array.isArray(list) && list.length > 0) {\r\n      _pageSettings.themeList = list;\r\n    }\r\n    const themeList = _pageSettings.themeList || [];\r\n\r\n    const ulEl = query<HTMLTableElement>('#List_ThemeList');\r\n    let ulHtml = '';\r\n\r\n    for (const th of themeList) {\r\n      const liHtml = `\r\n        <li>\r\n          <div class=\"theme-item\">\r\n            <div class=\"theme-preview\">\r\n              <div class=\"theme-preview-img\" title=\"${th.FolderPath}\">\r\n                <img src=\"${th.PreviewImage}\" alt=\"${th.Info.Name}\" onerror=\"this.hidden = true;\" />\r\n                <span class=\"theme-mode ${th.IsDarkMode ? 'theme-dark' : 'theme-light'}\"\r\n                  lang-title=\"FrmSettings.Tab.Appearance.${th.IsDarkMode ? '_DarkTheme' : '_LightTheme'}\">\r\n                  ${th.IsDarkMode ? '🌙' : '☀️'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"theme-info\">\r\n              <div class=\"theme-heading\" title=\"${th.Info.Name} - v${th.Info.Version}\">\r\n                <span class=\"theme-name\">${th.Info.Name}</span>\r\n                <span class=\"theme-version\">${th.Info.Version}</span>\r\n              </div>\r\n              <div class=\"theme-description\" title=\"${th.Info.Description}\">${th.Info.Description}</div>\r\n              <div class=\"theme-author\">\r\n                <span class=\"me-4\" title=\"${th.Info.Author}\">\r\n                  <span lang-text=\"FrmSettings.Tab.Appearance._Author\">[Author]</span>:\r\n                  ${th.Info.Author || '?'}\r\n                </span>\r\n                <span class=\"me-4\" title=\"${th.Info.Website}\">\r\n                  <span lang-text=\"_._Website\">[Website]</span>:\r\n                  ${th.Info.Website || '?'}\r\n                </span>\r\n                <span title=\"${th.Info.Email}\">\r\n                  <span lang-text=\"_._Email\">[Email]</span>:\r\n                  ${th.Info.Email || '?'}\r\n                </span>\r\n              </div>\r\n              <div class=\"theme-actions\">\r\n                <label lang-title=\"FrmSettings.Tab.Appearance._UseThemeForDarkMode\">\r\n                  <input type=\"radio\" name=\"_DarkThemeOptions\" value=\"${th.FolderName}\" />\r\n                  <span>\r\n                    ${_pageSettings.icons.Moon}\r\n                    <span lang-text=\"FrmSettings.Tab.Appearance._DarkTheme\">[Dark]</span> \r\n                  </span>\r\n                </label>\r\n                <label lang-title=\"FrmSettings.Tab.Appearance._UseThemeForLightMode\">\r\n                  <input type=\"radio\" name=\"_LightThemeOptions\" value=\"${th.FolderName}\" />\r\n                  <span>\r\n                    ${_pageSettings.icons.Sun}\r\n                    <span lang-text=\"FrmSettings.Tab.Appearance._LightTheme\">[Light]</span>\r\n                  </span>\r\n                </label>\r\n\r\n                <button type=\"button\" class=\"btn--icon ms-3 px-1\"\r\n                  lang-title=\"_._Delete\"\r\n                  ${_pageSettings.defaultThemeDir === th.FolderPath ? 'style=\"visibility: hidden !important;\"' : ''}\r\n                  data-delete-theme=\"${th.FolderPath}\">\r\n                  ${_pageSettings.icons.Delete}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </li>`;\r\n\r\n      ulHtml += liHtml;\r\n    }\r\n\r\n    ulEl.innerHTML = ulHtml;\r\n    Language.load();\r\n    TabAppearance.loadThemeListStatus();\r\n\r\n    queryAll<HTMLInputElement>('[name=\"_DarkThemeOptions\"]').forEach(el => {\r\n      el.addEventListener('change', (e) => {\r\n        const themeName = (e.target as HTMLInputElement).value;\r\n        query<HTMLInputElement>('[name=\"DarkTheme\"]').value = themeName;\r\n      }, false);\r\n    });\r\n\r\n    queryAll<HTMLInputElement>('[name=\"_LightThemeOptions\"]').forEach(el => {\r\n      el.addEventListener('change', (e) => {\r\n        const themeName = (e.target as HTMLInputElement).value;\r\n        query<HTMLInputElement>('[name=\"LightTheme\"]').value = themeName;\r\n      }, false);\r\n    });\r\n\r\n    queryAll<HTMLButtonElement>('[data-delete-theme]').forEach(el => {\r\n      el.addEventListener('click', async (e) => {\r\n        const themeDir = (e.target as HTMLButtonElement).getAttribute('data-delete-theme');\r\n\r\n        const newThemeList = await postAsync<ITheme[]>('Delete_Theme_Pack', themeDir);\r\n        TabAppearance.loadThemeList(newThemeList);\r\n      }, false);\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Resets the background color to the current theme's background color.\r\n   */\r\n  private static resetBackgroundColor() {\r\n    const isDarkMode = document.documentElement.getAttribute('color-mode') !== 'light';\r\n    const currentThemeName = isDarkMode ? _pageSettings.config.DarkTheme : _pageSettings.config.LightTheme;\r\n    const theme = _pageSettings.themeList.find(i => i.FolderName === currentThemeName);\r\n    if (!theme) return;\r\n\r\n    const colorHex = theme.BgColor || '#00000000';\r\n\r\n    query<HTMLInputElement>('[name=\"BackgroundColor\"]').value = colorHex;\r\n    TabAppearance.handleBackgroundColorChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Reset slideshow background color to black\r\n   */\r\n  private static resetSlideshowBackgroundColor() {\r\n    query<HTMLInputElement>('[name=\"SlideshowBackgroundColor\"]').value = '#000000';\r\n    TabAppearance.handleSlideshowBackgroundColorChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Handles when `BackgroundColor` is changed.\r\n   */\r\n  private static handleBackgroundColorChanged() {\r\n    const colorHex = query<HTMLInputElement>('[name=\"BackgroundColor\"]').value;\r\n    if (!colorHex) return;\r\n\r\n    query<HTMLInputElement>('#Btn_BackgroundColor > .color-display').style.setProperty('--color-picker-value', colorHex);\r\n    query('#Lbl_BackgroundColorValue').innerText = colorHex;\r\n  }\r\n\r\n\r\n  /**\r\n   * Handles when `SlideshowBackgroundColor` is changed.\r\n   */\r\n  private static handleSlideshowBackgroundColorChanged() {\r\n    const colorHex = query<HTMLInputElement>('[name=\"SlideshowBackgroundColor\"]').value;\r\n    if (!colorHex) return;\r\n\r\n    query<HTMLInputElement>('#Btn_SlideshowBackgroundColor > .color-display').style.setProperty('--color-picker-value', colorHex);\r\n    query('#Lbl_SlideshowBackgroundColorValue').innerText = colorHex;\r\n  }\r\n}\r\n","import TabAppearance from './TabAppearance';\r\n\r\nexport default class Sidebar {\r\n  /**\r\n   * Adds click events to sidebar menu.\r\n   */\r\n  static addEvents() {\r\n    // navigation bar event\r\n    const navItems = Array.from(document.querySelectorAll('input[name=\"nav\"]'));\r\n    for (let i = 0; i < navItems.length; i++) {\r\n      const itemEl = navItems[i] as HTMLInputElement;\r\n\r\n      itemEl.addEventListener('change', (e) => {\r\n        const activeTabName = (e.target as HTMLInputElement).value;\r\n        Sidebar.setActiveMenu(activeTabName);\r\n      }, false);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Set the active menu for sidebar\r\n   */\r\n  static setActiveMenu(tabPageName: string) {\r\n    tabPageName ||= 'general';\r\n\r\n    const tabPageEl = query(`.tab-page[tab=\"${tabPageName}\"]`);\r\n    if (!tabPageEl) return;\r\n\r\n    // hide all tabs\r\n    const allTabPages = queryAll('.tab-page');\r\n    allTabPages.forEach(el => el.classList.remove('active'));\r\n\r\n    // show the selected tab\r\n    tabPageEl.classList.add('active');\r\n\r\n    // select the active nav item\r\n    const allNavItems = queryAll('input[type=\"radio\"]');\r\n    allNavItems.forEach((item: HTMLInputElement) => item.checked = false);\r\n    const navItem = query(`input[type=\"radio\"][value=\"${tabPageName}\"]`) as HTMLInputElement;\r\n    if (navItem) navItem.checked = true;\r\n\r\n    if (tabPageName === 'appearance') {\r\n      TabAppearance.loadThemeListStatus();\r\n    }\r\n\r\n    // update backend tab name\r\n    post('Sidebar_Changed', tabPageName);\r\n  }\r\n\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabGeneral {\r\n  private static get isOriginalAutoUpdateEnabled() {\r\n    return _pageSettings.config.AutoUpdate !== '0';\r\n  }\r\n\r\n  /**\r\n   * Loads settings for tab General.\r\n   */\r\n  static loadSettings() {\r\n    query('#Lnk_StartupDir').title = _pageSettings.startUpDir || '(unknown)';\r\n    query('#Lnk_ConfigDir').title = _pageSettings.configDir || '(unknown)';\r\n    query('#Lnk_UserConfigFile').title = _pageSettings.userConfigFilePath || '(unknown)';\r\n\r\n    // AutoUpdate is a string\r\n    query<HTMLInputElement>('[name=\"AutoUpdate\"]').checked = TabGeneral.isOriginalAutoUpdateEnabled;\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab General.\r\n   */\r\n  static addEvents() {\r\n    query('#Lnk_StartupDir').addEventListener('click', () => post('Lnk_StartupDir', _pageSettings.startUpDir), false);\r\n    query('#Lnk_ConfigDir').addEventListener('click', () => post('Lnk_ConfigDir', _pageSettings.configDir), false);\r\n    query('#Lnk_UserConfigFile').addEventListener('click', () => post('Lnk_UserConfigFile', _pageSettings.userConfigFilePath), false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('general');\r\n\r\n    // convert AutoUpdate back to string\r\n    const isNewAutoUpdateEnabled = settings.AutoUpdate === true;\r\n    if (isNewAutoUpdateEnabled !== TabGeneral.isOriginalAutoUpdateEnabled) {\r\n      settings.AutoUpdate = settings.AutoUpdate\r\n        ? new Date().toISOString()\r\n        : '0';\r\n    }\r\n    else {\r\n      delete settings.AutoUpdate;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabImage {\r\n  /**\r\n   * Loads settings for tab Image.\r\n   */\r\n  static loadSettings() {\r\n    const colorProfile = (_pageSettings.config.ColorProfile as string || '');\r\n    if (colorProfile.includes('.')) {\r\n      query<HTMLSelectElement>('[name=\"ColorProfile\"]').value = 'Custom';\r\n      query('#Lnk_CustomColorProfile').innerText = colorProfile;\r\n    }\r\n\r\n    TabImage.handleColorProfileChanged();\r\n    TabImage.handleUseEmbeddedThumbnailOptionsChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Add events for tab Image.\r\n   */\r\n  static addEvents() {\r\n    query('#Btn_BrowseColorProfile').addEventListener('click', async () => {\r\n      const profileFilePath = await postAsync<string>('Btn_BrowseColorProfile');\r\n      query('#Lnk_CustomColorProfile').innerText = profileFilePath;\r\n    }, false);\r\n  \r\n    query('#Lnk_CustomColorProfile').addEventListener('click', () => {\r\n      const profileFilePath = query('#Lnk_CustomColorProfile').innerText.trim();\r\n      post('Lnk_CustomColorProfile', profileFilePath);\r\n    }, false);\r\n  \r\n    query('[name=\"ColorProfile\"]').addEventListener('change', TabImage.handleColorProfileChanged, false);\r\n\r\n    query('[name=\"UseEmbeddedThumbnailRawFormats\"]').addEventListener('input', TabImage.handleUseEmbeddedThumbnailOptionsChanged, false);\r\n    query('[name=\"UseEmbeddedThumbnailOtherFormats\"]').addEventListener('input', TabImage.handleUseEmbeddedThumbnailOptionsChanged, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('image');\r\n\r\n    // ImageBoosterCacheCount\r\n    settings.ImageBoosterCacheCount = +(settings.ImageBoosterCacheCount || 0);\r\n    if (settings.ImageBoosterCacheCount === _pageSettings.config.ImageBoosterCacheCount) {\r\n      delete settings.ImageBoosterCacheCount;\r\n    }\r\n\r\n\r\n    // ColorProfile\r\n    const originalColorProfile = _pageSettings.config.ColorProfile;\r\n    if (settings.ColorProfile === 'Custom') {\r\n      settings.ColorProfile = query('#Lnk_CustomColorProfile').innerText.trim();\r\n    }\r\n    if (!settings.ColorProfile || settings.ColorProfile === originalColorProfile) {\r\n      delete settings.ColorProfile;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Handles when color profile option is changed.\r\n   */\r\n  static handleColorProfileChanged() {\r\n    const selectEl = query<HTMLSelectElement>('[name=\"ColorProfile\"]');\r\n    const useCustomProfile = selectEl.value === 'Custom';\r\n  \r\n    query('#Btn_BrowseColorProfile').hidden = !useCustomProfile;\r\n    query('#Section_CustomColorProfile').hidden = !useCustomProfile;\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle when the embedded thumbnail options are changed.\r\n   */\r\n  static handleUseEmbeddedThumbnailOptionsChanged() {\r\n    const enableForRaw = query<HTMLInputElement>('[name=\"UseEmbeddedThumbnailRawFormats\"]').checked;\r\n    const enableForOthers = query<HTMLInputElement>('[name=\"UseEmbeddedThumbnailOtherFormats\"]').checked;\r\n    const showSizeSection = enableForRaw || enableForOthers;\r\n  \r\n    query('#Section_EmbeddedThumbnailSize').hidden = !showSizeSection;\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabSlideshow {\r\n  /**\r\n   * Loads settings for tab Slideshow.\r\n   */\r\n  static loadSettings() {\r\n    TabSlideshow.handleUseRandomIntervalForSlideshowChanged();\r\n    TabSlideshow.handleSlideshowIntervalsChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Slideshow.\r\n   */\r\n  static addEvents() {\r\n    query('[name=\"UseRandomIntervalForSlideshow\"]').addEventListener('input', TabSlideshow.handleUseRandomIntervalForSlideshowChanged, false);\r\n    query('[name=\"SlideshowInterval\"]').addEventListener('input', TabSlideshow.handleSlideshowIntervalsChanged, false);\r\n    query('[name=\"SlideshowIntervalTo\"]').addEventListener('input', TabSlideshow.handleSlideshowIntervalsChanged, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('slideshow');\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle when slideshow intervals are changed.\r\n   */\r\n  private static handleSlideshowIntervalsChanged() {\r\n    const fromEl = query<HTMLInputElement>('[name=\"SlideshowInterval\"]');\r\n    const toEl = query<HTMLInputElement>('[name=\"SlideshowIntervalTo\"]');\r\n\r\n    fromEl.max = toEl.value;\r\n    toEl.min = fromEl.value;\r\n\r\n    const intervalFrom = +fromEl.value || 5;\r\n    const intervalTo = +toEl.value || 5;\r\n    const intervalFromText = TabSlideshow.toTimeString(intervalFrom);\r\n    const intervalToText = TabSlideshow.toTimeString(intervalTo);\r\n\r\n    const useRandomInterval = query<HTMLInputElement>('[name=\"UseRandomIntervalForSlideshow\"]').checked;\r\n\r\n    if (useRandomInterval) {\r\n      query('#Lbl_SlideshowInterval').innerText = `${intervalFromText} - ${intervalToText}`;\r\n    }\r\n    else {\r\n      query('#Lbl_SlideshowInterval').innerText = intervalFromText;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * handle when `UseRandomIntervalForSlideshow` is changed.\r\n   */\r\n  private static handleUseRandomIntervalForSlideshowChanged() {\r\n    const useRandomInterval = query<HTMLInputElement>('[name=\"UseRandomIntervalForSlideshow\"]').checked;\r\n  \r\n    query('#Lbl_SlideshowIntervalFrom').hidden = !useRandomInterval;\r\n    query('#Section_SlideshowIntervalTo').hidden = !useRandomInterval;\r\n  }\r\n\r\n\r\n  /**\r\n   * Formats total seconds to time format: `mm:ss.fff`.\r\n   */\r\n  private static toTimeString(totalSeconds: number) {\r\n    const dt = new Date(totalSeconds * 1000);\r\n    let minutes = dt.getUTCMinutes().toString();\r\n    let seconds = dt.getUTCSeconds().toString();\r\n    const msSeconds = dt.getUTCMilliseconds().toString();\r\n\r\n    if (minutes.length < 2) minutes = `0${minutes}`;\r\n    if (seconds.length < 2) seconds = `0${seconds}`;\r\n\r\n    return `${minutes}:${seconds}.${msSeconds}`;\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabMouse {\r\n  /**\r\n   * Loads settings for tab Mouse.\r\n   */\r\n  static loadSettings() {\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_Scroll').value = _pageSettings.config.MouseWheelActions?.Scroll || 'DoNothing';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_CtrlAndScroll').value = _pageSettings.config.MouseWheelActions?.CtrlAndScroll || 'DoNothing';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_ShiftAndScroll').value = _pageSettings.config.MouseWheelActions?.ShiftAndScroll || 'DoNothing';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_AltAndScroll').value = _pageSettings.config.MouseWheelActions?.AltAndScroll || 'DoNothing';\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Mouse.\r\n   */\r\n  static addEvents() {\r\n    query('#Btn_ResetMouseWheelAction').addEventListener('click', TabMouse.resetDefaultMouseWheelActions, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('mouse');\r\n\r\n    // MouseWheelActions\r\n    const newWheelScrollValue = query<HTMLSelectElement>('#Cmb_MouseWheel_Scroll').value;\r\n    const newWheelCtrlAndScrollValue = query<HTMLSelectElement>('#Cmb_MouseWheel_CtrlAndScroll').value;\r\n    const newWheelShiftAndScrollValue = query<HTMLSelectElement>('#Cmb_MouseWheel_ShiftAndScroll').value;\r\n    const newWheelAltAndScrollValue = query<HTMLSelectElement>('#Cmb_MouseWheel_AltAndScroll').value;\r\n\r\n    const mouseWheelActions: Record<string, string> = {};\r\n    if (newWheelScrollValue !== _pageSettings.config.MouseWheelActions?.Scroll) {\r\n      mouseWheelActions.Scroll = newWheelScrollValue;\r\n    }\r\n    if (newWheelCtrlAndScrollValue !== _pageSettings.config.MouseWheelActions?.CtrlAndScroll) {\r\n      mouseWheelActions.CtrlAndScroll = newWheelCtrlAndScrollValue;\r\n    }\r\n    if (newWheelShiftAndScrollValue !== _pageSettings.config.MouseWheelActions?.ShiftAndScroll) {\r\n      mouseWheelActions.ShiftAndScroll = newWheelShiftAndScrollValue;\r\n    }\r\n    if (newWheelAltAndScrollValue !== _pageSettings.config.MouseWheelActions?.AltAndScroll) {\r\n      mouseWheelActions.AltAndScroll = newWheelAltAndScrollValue;\r\n    }\r\n\r\n    if (Object.keys(mouseWheelActions).length > 0) {\r\n      settings.MouseWheelActions = mouseWheelActions;\r\n    }\r\n    else {\r\n      delete settings.MouseWheelActions;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Resets the mouse wheel actions to the default settings.\r\n   */\r\n  private static resetDefaultMouseWheelActions() {\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_Scroll').value = 'Zoom';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_CtrlAndScroll').value = 'PanVertically';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_ShiftAndScroll').value = 'PanHorizontally';\r\n    query<HTMLSelectElement>('#Cmb_MouseWheel_AltAndScroll').value = 'BrowseImages';\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabKeyboard {\r\n  /**\r\n   * Loads settings for tab Keyboard.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Keyboard.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('keyboard');\r\n  }\r\n}\r\n","import { ILanguage } from '@/@types/FrmSettings';\r\nimport { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabLanguage {\r\n  /**\r\n   * Loads settings for tab Language.\r\n   */\r\n  static loadSettings() {\r\n    TabLanguage.handleLanguageChanged();\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Language.\r\n   */\r\n  static addEvents() {\r\n    query('#Cmb_LanguageList').removeEventListener('change', TabLanguage.handleLanguageChanged, false);\r\n    query('#Btn_RefreshLanguageList').removeEventListener('click', TabLanguage.onBtn_RefreshLanguageList, false);\r\n    query('#Lnk_InstallLanguage').removeEventListener('click', TabLanguage.onLnk_InstallLanguage, false);\r\n\r\n    query('#Cmb_LanguageList').addEventListener('change', TabLanguage.handleLanguageChanged, false);\r\n    query('#Btn_RefreshLanguageList').addEventListener('click', TabLanguage.onBtn_RefreshLanguageList, false);\r\n    query('#Lnk_InstallLanguage').addEventListener('click', TabLanguage.onLnk_InstallLanguage, false);\r\n  }\r\n\r\n\r\n  private static async onBtn_RefreshLanguageList() {\r\n    const newLangList = await postAsync<ILanguage[]>('Btn_RefreshLanguageList');\r\n    TabLanguage.loadLanguageList(newLangList);\r\n  }\r\n\r\n\r\n  private static async onLnk_InstallLanguage() {\r\n    const newLangList = await postAsync<ILanguage[]>('Lnk_InstallLanguage');\r\n    TabLanguage.loadLanguageList(newLangList);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('language');\r\n  }\r\n\r\n\r\n  /**\r\n   * Handles when language is changed.\r\n   */\r\n  private static handleLanguageChanged() {\r\n    const langFileName = query<HTMLSelectElement>('#Cmb_LanguageList').value;\r\n    const lang = _pageSettings.langList.find(i => i.FileName === langFileName);\r\n    if (!lang) return;\r\n  \r\n    query('#Section_LanguageContributors').innerText = lang.Metadata.Author;\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads language list to select box.\r\n   * @param list If defined, it overrides `_pageSettings.langList`.\r\n   */\r\n  static loadLanguageList(list?: ILanguage[]) {\r\n    const selectEl = query<HTMLSelectElement>('#Cmb_LanguageList');\r\n\r\n    // clear current list\r\n    while (selectEl.options.length) selectEl.remove(0);\r\n\r\n    if (Array.isArray(list) && list.length > 0) {\r\n      _pageSettings.langList = list;\r\n    }\r\n\r\n    _pageSettings.langList.forEach(lang => {\r\n      let displayText = `${lang.Metadata.LocalName} (${lang.Metadata.EnglishName})`;\r\n      if (!lang.FileName || lang.FileName.length === 0) {\r\n        displayText = lang.Metadata.EnglishName;\r\n      }\r\n\r\n      const optionEl = new Option(displayText, lang.FileName);\r\n      selectEl.add(optionEl);\r\n    });\r\n\r\n    selectEl.value = _pageSettings.config.Language;\r\n    TabLanguage.handleLanguageChanged();\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabEdit {\r\n  /**\r\n   * Loads settings for tab Edit.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Edit.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('edit');\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabViewer {\r\n  /**\r\n   * Loads settings for tab Viewer.\r\n   */\r\n  static loadSettings() {\r\n    const zoomLevels = _pageSettings.config.ZoomLevels as number[] || [];\r\n    query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]').value = zoomLevels.join('; ');\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Viewer.\r\n   */\r\n  static addEvents() {\r\n    query('[name=\"ZoomLevels\"]').addEventListener('input', TabViewer.handleZoomLevelsChanged, false);\r\n    query('[name=\"ZoomLevels\"]').addEventListener('blur', TabViewer.handleZoomLevelsBlur, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('viewer');\r\n\r\n    // ZoomLevels\r\n    settings.ZoomLevels = TabViewer.getZoomLevels();\r\n\r\n    if (query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]').checkValidity()) {\r\n      const originalLevelsString = _pageSettings.config.ZoomLevels?.toString();\r\n      const newLevelsString = settings.ZoomLevels?.toString();\r\n\r\n      if (newLevelsString === originalLevelsString) {\r\n        delete settings.ZoomLevels;\r\n      }\r\n    }\r\n    else {\r\n      delete settings.ZoomLevels;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle when ZoomLevels is changed.\r\n   */\r\n  private static handleZoomLevelsChanged() {\r\n    const el = query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]');\r\n    const levels = TabViewer.getZoomLevels();\r\n\r\n    // validate\r\n    if (levels.some(i => !Number.isFinite(i))) {\r\n      el.setCustomValidity('Value contains invalid characters. Only number, semi-colon are allowed.');\r\n    }\r\n    else {\r\n      el.setCustomValidity('');\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle when the ZoomLevels box is blur.\r\n   */\r\n  private static handleZoomLevelsBlur() {\r\n    const el = query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]');\r\n    if (!el.checkValidity()) return;\r\n\r\n    el.value = TabViewer.getZoomLevels().join('; ');\r\n  }\r\n\r\n\r\n  /**\r\n   * Gets zoom levels\r\n   */\r\n  private static getZoomLevels() {\r\n    const el = query<HTMLTextAreaElement>('[name=\"ZoomLevels\"]');\r\n    const levels = el.value.split(';').map(i => i.trim()).filter(Boolean)\r\n      .map(i => parseFloat(i));\r\n\r\n    return levels;\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabToolbar {\r\n  /**\r\n   * Loads settings for tab Toolbar.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Toolbar.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('toolbar');\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabGallery {\r\n  /**\r\n   * Loads settings for tab Gallery.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Gallery.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('gallery');\r\n  }\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabFileAssocs {\r\n  /**\r\n   * Loads settings for tab FileAssocs.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab FileAssocs.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('file_assocs');\r\n  }\r\n}\r\n","import { ITool } from '@/@types/FrmSettings';\r\nimport {\r\n  escapeHtml,\r\n  getChangedSettingsFromTab,\r\n  openFilePicker,\r\n  openModalDialog,\r\n  renderHotkeyList,\r\n} from '@/helpers';\r\nimport Language from './Language';\r\n\r\n\r\nexport default class TabTools {\r\n  private static HOTKEY_SEPARATOR = '#';\r\n\r\n  /**\r\n   * Loads settings for tab Tools.\r\n   */\r\n  static loadSettings() {\r\n    TabTools.loadToolList();\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Tools.\r\n   */\r\n  static addEvents() {\r\n    query('#Btn_AddTool').addEventListener('click', async () => {\r\n      const defaultTool = {\r\n        ToolId: '',\r\n        ToolName: '',\r\n        Executable: '',\r\n        Arguments: _pageSettings.FILE_MACRO,\r\n        Hotkeys: [],\r\n        IsIntegrated: false,\r\n      } as ITool;\r\n\r\n      await openModalDialog('#Dialog_AddOrEditTool', 'create', defaultTool, async () => {\r\n        TabTools.addEventsForToolDialog();\r\n        TabTools.updateToolCommandPreview();\r\n\r\n        await renderHotkeyList('#Dialog_AddOrEditTool .hotkey-list', defaultTool.Hotkeys);\r\n      });\r\n\r\n      const tool = TabTools.getToolDialogFormData();\r\n      TabTools.setToolItemToList(tool.ToolId, tool);\r\n    }, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    const settings = getChangedSettingsFromTab('tools');\r\n    const originalToolListJson = JSON.stringify(_pageSettings.toolList || []);\r\n\r\n    settings.Tools = TabTools.getToolListFromDom();\r\n    const newToolListJson = JSON.stringify(settings.Tools);\r\n\r\n    if (newToolListJson === originalToolListJson) {\r\n      delete settings.Tools;\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads tool list but do not update `_pageSettings.toolList`.\r\n   */\r\n  private static loadToolList(list?: ITool[]) {\r\n    const toolList: ITool[] = list ?? _pageSettings.toolList ?? [];\r\n\r\n    const tbodyEl = query<HTMLTableElement>('#Table_ToolList > tbody');\r\n    let tbodyHtml = '';\r\n    const btnDeleteHtml = `\r\n      <button type=\"button\" class=\"btn--icon px-1 ms-1\" lang-title=\"_._Delete\" data-action=\"delete\">\r\n        ${_pageSettings.icons.Delete}\r\n      </button>\r\n    `;\r\n\r\n    for (const item of toolList) {\r\n      let args = '<i lang-text=\"_._Empty\"></i>';\r\n      if (item.Arguments) {\r\n        args = `<code>${escapeHtml(item.Arguments)}</code>`;\r\n      }\r\n\r\n      const hotkeysHtml = (item.Hotkeys || [])\r\n        .map((key, index) => {\r\n          const margin = index === 0 ? '' : 'ms-1';\r\n          return `<kbd class=\"${margin}\">${key}</kbd>`;\r\n        }).join('');\r\n\r\n      const chkIntegratedHtml = `\r\n        <label class=\"ig-checkbox\">\r\n          <input type=\"checkbox\" disabled ${item.IsIntegrated === true ? 'checked' : ''} />\r\n          <div></div>\r\n        </label>\r\n      `;\r\n\r\n      const trHtml = `\r\n        <tr data-tool-id=\"${item.ToolId}\"\r\n          data-tool-name=\"${item.ToolName}\"\r\n          data-tool-integrated=\"${item.IsIntegrated}\"\r\n          data-tool-executable=\"${item.Executable}\"\r\n          data-tool-arguments=\"${item.Arguments}\"\r\n          data-tool-hotkeys=\"${(item.Hotkeys || []).join(TabTools.HOTKEY_SEPARATOR)}\">\r\n          <td class=\"cell-counter\"></td>\r\n          <td class=\"cell-sticky text-nowrap\">${item.ToolId}</td>\r\n          <td class=\"text-nowrap\">${item.ToolName}</td>\r\n          <td class=\"text-center\">${chkIntegratedHtml}</td>\r\n          <td class=\"text-nowrap\">${hotkeysHtml}</td>\r\n          <td class=\"text-nowrap\">\r\n            <code>${escapeHtml(item.Executable)}</code>\r\n          </td>\r\n          <td class=\"text-nowrap\" style=\"--cell-border-right-color: transparent;\">${args}</td>\r\n          <td class=\"cell-sticky-right text-nowrap\" width=\"1\" style=\"border-left: 0;\">\r\n            <button type=\"button\" class=\"btn--icon px-1\" lang-title=\"_._Edit\" data-action=\"edit\">\r\n              ${_pageSettings.icons.Edit}\r\n            </button>\r\n            ${item.ToolId !== 'Tool_ExifGlass' ? btnDeleteHtml : ''}\r\n          </td>\r\n        </tr>\r\n      `;\r\n\r\n      tbodyHtml += trHtml;\r\n    }\r\n\r\n    tbodyEl.innerHTML = tbodyHtml;\r\n    Language.load();\r\n\r\n    queryAll<HTMLButtonElement>('#Table_ToolList button[data-action]').forEach(el => {\r\n      el.addEventListener('click', async () => {\r\n        const action = el.getAttribute('data-action');\r\n        const trEl = el.closest('tr');\r\n        const toolId = trEl.getAttribute('data-tool-id');\r\n\r\n        if (action === 'delete') {\r\n          trEl.remove();\r\n        }\r\n        else if (action === 'edit') {\r\n          await TabTools.editTool(toolId);\r\n          el.focus();\r\n        }\r\n      }, false);\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Gets tool list from DOM.\r\n   */\r\n  private static getToolListFromDom() {\r\n    const trEls = queryAll<HTMLTableRowElement>('#Table_ToolList > tbody > tr');\r\n    const toolList = trEls.map(el => {\r\n      const toolId = el.getAttribute('data-tool-id') ?? '';\r\n      const toolName = el.getAttribute('data-tool-name') ?? '';\r\n      const toolIntegrated = el.getAttribute('data-tool-integrated') === 'true';\r\n      const toolExecutable = el.getAttribute('data-tool-executable') ?? '';\r\n      const toolArguments = el.getAttribute('data-tool-arguments') ?? '';\r\n\r\n      const hotkeysStr = el.getAttribute('data-tool-hotkeys') ?? '';\r\n      const toolHotkeys = hotkeysStr.split(TabTools.HOTKEY_SEPARATOR).filter(Boolean);\r\n\r\n      return {\r\n        ToolId: toolId,\r\n        ToolName: toolName,\r\n        IsIntegrated: toolIntegrated,\r\n        Executable: toolExecutable,\r\n        Arguments: toolArguments,\r\n        Hotkeys: toolHotkeys,\r\n      } as ITool;\r\n    });\r\n\r\n    return toolList;\r\n  }\r\n\r\n\r\n  /**\r\n   * Open modal dialog to edit the tool.\r\n   * @param toolId Tool id\r\n   */\r\n  private static async editTool(toolId: string) {\r\n    const trEl = query<HTMLTableRowElement>(`#Table_ToolList tr[data-tool-id=\"${toolId}\"]`);\r\n\r\n    const hotkeysStr = trEl.getAttribute('data-tool-hotkeys') || '';\r\n    const toolHotkeys = hotkeysStr.split(TabTools.HOTKEY_SEPARATOR).filter(Boolean);\r\n\r\n    let tool: ITool = {\r\n      ToolId: toolId,\r\n      ToolName: trEl.getAttribute('data-tool-name') || '',\r\n      Executable: trEl.getAttribute('data-tool-executable') || '',\r\n      Arguments: trEl.getAttribute('data-tool-arguments') || '',\r\n      IsIntegrated: trEl.getAttribute('data-tool-integrated') === 'true',\r\n      Hotkeys: toolHotkeys,\r\n    };\r\n\r\n    // open dialog\r\n    await openModalDialog('#Dialog_AddOrEditTool', 'edit', tool, async () => {\r\n      query<HTMLInputElement>('[name=\"_IsIntegrated\"]').checked = tool.IsIntegrated ?? false;\r\n      TabTools.addEventsForToolDialog();\r\n      TabTools.updateToolCommandPreview();\r\n\r\n      await renderHotkeyList('#Dialog_AddOrEditTool .hotkey-list', tool.Hotkeys);\r\n    });\r\n\r\n    tool = TabTools.getToolDialogFormData();\r\n    TabTools.setToolItemToList(toolId, tool);\r\n  }\r\n\r\n\r\n  /**\r\n   * Gets tool data from the modal dialog.\r\n   */\r\n  private static getToolDialogFormData() {\r\n    // get data\r\n    const tool: ITool = {\r\n      ToolId: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_ToolId\"]').value.trim(),\r\n      ToolName: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_ToolName\"]').value.trim(),\r\n      Executable: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_Executable\"]').value.trim(),\r\n      Arguments: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_Arguments\"]').value.trim(),\r\n      Hotkeys: queryAll('#Dialog_AddOrEditTool .hotkey-list > .hotkey-item > kbd').map(el => el.innerText),\r\n      IsIntegrated: query<HTMLInputElement>('#Dialog_AddOrEditTool [name=\"_IsIntegrated\"]').checked,\r\n    };\r\n\r\n    return tool;\r\n  }\r\n\r\n\r\n  /**\r\n   * Sets the tool item to the list.\r\n   * @param oldToolId If not found, the tool will be inserted into the list.\r\n   */\r\n  private static setToolItemToList(oldToolId: string, tool: ITool) {\r\n    if (!tool.ToolId || !tool.ToolName || !tool.Executable) return;\r\n    const toolList = TabTools.getToolListFromDom();\r\n    const toolIndex = toolList.findIndex(i => i.ToolId === oldToolId);\r\n\r\n    // edit\r\n    if (toolIndex !== -1) {\r\n      toolList[toolIndex] = tool;\r\n    }\r\n    // create\r\n    else {\r\n      toolList.push(tool);\r\n    }\r\n\r\n    TabTools.loadToolList(toolList);\r\n  }\r\n\r\n\r\n  private static addEventsForToolDialog() {\r\n    query('[name=\"_Executable\"]').removeEventListener('input', TabTools.updateToolCommandPreview, false);\r\n    query('[name=\"_Executable\"]').addEventListener('input', TabTools.updateToolCommandPreview, false);\r\n\r\n    query('[name=\"_Arguments\"]').removeEventListener('input', TabTools.updateToolCommandPreview, false);\r\n    query('[name=\"_Arguments\"]').addEventListener('input', TabTools.updateToolCommandPreview, false);\r\n\r\n    query('#btnBrowseTool').removeEventListener('click', TabTools.handleBtnBrowseToolClickEvent, false);\r\n    query('#btnBrowseTool').addEventListener('click', TabTools.handleBtnBrowseToolClickEvent, false);\r\n  }\r\n\r\n\r\n  private static updateToolCommandPreview() {\r\n    let executable = query<HTMLInputElement>('[name=\"_Executable\"]').value || '';\r\n    executable = executable.trim();\r\n\r\n    let args = query<HTMLInputElement>('[name=\"_Arguments\"]').value || '';\r\n    args = args.trim().replaceAll('<file>', '\"C:\\\\fake dir\\\\photo.jpg\"');\r\n\r\n    query('#Tool_CommandPreview').innerText = [executable, args].filter(Boolean).join(' ');\r\n  }\r\n\r\n\r\n  private static async handleBtnBrowseToolClickEvent() {\r\n    const filePaths = await openFilePicker() ?? [];\r\n    if (!filePaths.length) return;\r\n\r\n    query<HTMLInputElement>('[name=\"_Executable\"]').value = `\"${filePaths[0]}\"`;\r\n    TabTools.updateToolCommandPreview();\r\n  }\r\n\r\n}\r\n","import { getChangedSettingsFromTab } from '@/helpers';\r\n\r\nexport default class TabLayout {\r\n  /**\r\n   * Loads settings for tab Layout.\r\n   */\r\n  static loadSettings() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for tab Layout.\r\n   */\r\n  static addEvents() {\r\n  }\r\n\r\n\r\n  /**\r\n   * Save settings as JSON object.\r\n   */\r\n  static exportSettings() {\r\n    return getChangedSettingsFromTab('layout');\r\n  }\r\n}\r\n","import TabGeneral from './TabGeneral';\r\nimport TabImage from './TabImage';\r\nimport TabSlideshow from './TabSlideshow';\r\nimport TabMouse from './TabMouse';\r\nimport TabKeyboard from './TabKeyboard';\r\nimport TabLanguage from './TabLanguage';\r\nimport TabEdit from './TabEdit';\r\nimport TabViewer from './TabViewer';\r\nimport TabToolbar from './TabToolbar';\r\nimport TabGallery from './TabGallery';\r\nimport TabFileAssocs from './TabFileAssocs';\r\nimport TabTools from './TabTools';\r\nimport TabAppearance from './TabAppearance';\r\nimport TabLayout from './TabLayout';\r\n\r\nexport default class Settings {\r\n  /**\r\n   * Loads settings.\r\n   */\r\n  static load() {\r\n    Settings.loadSelectBoxEnums();\r\n    TabLanguage.loadLanguageList();\r\n\r\n\r\n    // auto loads settings for String, Number, Boolean\r\n    for (const configKey in _pageSettings.config) {\r\n      if (!Object.prototype.hasOwnProperty.call(_pageSettings.config, configKey)) {\r\n        continue;\r\n      }\r\n\r\n      const configValue = _pageSettings.config[configKey];\r\n\r\n      // only auto load the settings if the value type is supported\r\n      const canAutoSet = typeof configValue === 'string'\r\n        || typeof configValue === 'number'\r\n        || typeof configValue === 'boolean';\r\n      if (!canAutoSet) continue;\r\n\r\n\r\n      // find the html element\r\n      const el = query(`[name=\"${configKey}\"]`);\r\n      if (!el) continue;\r\n\r\n\r\n      // check the tag name and type\r\n      const tagName = el.tagName.toLowerCase();\r\n      if (tagName === 'select') {\r\n        (el as HTMLSelectElement).value = configValue.toString();\r\n      }\r\n      else if (tagName === 'input') {\r\n        const inputType = el.getAttribute('type').toLowerCase();\r\n        const inputEl = el as HTMLInputElement;\r\n\r\n        if (inputType === 'radio' || inputType === 'checkbox') {\r\n          inputEl.checked = Boolean(configValue);\r\n        }\r\n        else if (inputType === 'color') {\r\n          const colorHex = configValue.toString() || '#00000000';\r\n\r\n          // remove alpha\r\n          inputEl.value = colorHex.substring(0, colorHex.length - 2);\r\n        }\r\n        else {\r\n          inputEl.value = configValue.toString();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    // load specific settings\r\n    TabGeneral.loadSettings();\r\n    TabImage.loadSettings();\r\n    TabSlideshow.loadSettings();\r\n    TabEdit.loadSettings();\r\n    TabViewer.loadSettings();\r\n    TabToolbar.loadSettings();\r\n    TabGallery.loadSettings();\r\n    TabLanguage.loadSettings();\r\n    TabMouse.loadSettings();\r\n    TabKeyboard.loadSettings();\r\n    TabFileAssocs.loadSettings();\r\n    TabTools.loadSettings();\r\n    TabLanguage.loadSettings();\r\n    TabAppearance.loadSettings();\r\n  }\r\n\r\n\r\n  /**\r\n   * Adds events for the footer of setting.\r\n   */\r\n  static addEventsForFooter() {\r\n    query('#BtnCancel').addEventListener('click', () => post('BtnCancel'), false);\r\n\r\n    query('#BtnOK').addEventListener('click', () => {\r\n      const allSettings = Settings.getAllSettings();\r\n      Settings.updateInitSettings(allSettings);\r\n\r\n      post('BtnOK', allSettings, true);\r\n    }, false);\r\n\r\n    query('#BtnApply').addEventListener('click', () => {\r\n      const allSettings = Settings.getAllSettings();\r\n      Settings.updateInitSettings(allSettings);\r\n\r\n      post('BtnApply', allSettings, true);\r\n    }, false);\r\n  }\r\n\r\n\r\n  /**\r\n   * Gets all settings as an object.\r\n   */\r\n  static getAllSettings() {\r\n    const settings: Record<string, any> = {\r\n      ...TabGeneral.exportSettings(),\r\n      ...TabImage.exportSettings(),\r\n      ...TabSlideshow.exportSettings(),\r\n      ...TabEdit.exportSettings(),\r\n      ...TabViewer.exportSettings(),\r\n      ...TabToolbar.exportSettings(),\r\n      ...TabGallery.exportSettings(),\r\n      ...TabLayout.exportSettings(),\r\n      ...TabMouse.exportSettings(),\r\n      ...TabKeyboard.exportSettings(),\r\n      ...TabFileAssocs.exportSettings(),\r\n      ...TabTools.exportSettings(),\r\n      ...TabLanguage.exportSettings(),\r\n      ...TabAppearance.exportSettings(),\r\n    };\r\n\r\n    return settings;\r\n  }\r\n\r\n\r\n  /**\r\n   * Updates the `_pageSettings.config`.\r\n   */\r\n  static updateInitSettings(newSettings: Record<string, any>) {\r\n    const settingKeys = Object.keys(newSettings);\r\n\r\n    settingKeys.forEach(key => {\r\n      if (_pageSettings.config.hasOwnProperty(key)) {\r\n        _pageSettings.config[key] = newSettings[key];\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Loads select box items.\r\n   */\r\n  private static loadSelectBoxEnums() {\r\n    // load enums\r\n    for (const enumName in _pageSettings.enums) {\r\n      if (!Object.prototype.hasOwnProperty.call(_pageSettings.enums, enumName)) {\r\n        continue;\r\n      }\r\n\r\n      const enumKeys = _pageSettings.enums[enumName];\r\n      const selectEls = queryAll<HTMLSelectElement>(`select[data-enum=\"${enumName}\"]`);\r\n\r\n      for (const el of selectEls) {\r\n        enumKeys.forEach(key => {\r\n          const optionEl = new Option(`${key}`, key);\r\n          optionEl.setAttribute('lang-text', `_.${enumName}._${key}`);\r\n\r\n          el.add(optionEl);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { Webview } from './helpers/webview';\r\nimport { query, queryAll, on, post, postAsync } from './helpers/globalHelpers';\r\n\r\nimport Sidebar from './FrmSettings/Sidebar';\r\nimport Language from './FrmSettings/Language';\r\nimport Settings from './FrmSettings/Settings';\r\n\r\nimport TabGeneral from './FrmSettings/TabGeneral';\r\nimport TabImage from './FrmSettings/TabImage';\r\nimport TabSlideshow from './FrmSettings/TabSlideshow';\r\nimport TabMouse from './FrmSettings/TabMouse';\r\nimport TabLanguage from './FrmSettings/TabLanguage';\r\nimport TabEdit from './FrmSettings/TabEdit';\r\nimport TabViewer from './FrmSettings/TabViewer';\r\nimport TabToolbar from './FrmSettings/TabToolbar';\r\nimport TabGallery from './FrmSettings/TabGallery';\r\nimport TabAppearance from './FrmSettings/TabAppearance';\r\nimport TabFileAssocs from './FrmSettings/TabFileAssocs';\r\nimport TabTools from './FrmSettings/TabTools';\r\n\r\n\r\n// initialize webview event listeners\r\nwindow._webview = new Webview();\r\n_webview.startListening();\r\n\r\n\r\n// export to global\r\nwindow.query = query;\r\nwindow.queryAll = queryAll;\r\nwindow.on = on;\r\nwindow.post = post;\r\nwindow.postAsync = postAsync;\r\n\r\nif (!window._pageSettings) {\r\n  window._pageSettings = {\r\n    initTab: 'tools',\r\n    config: {},\r\n    lang: {},\r\n    langList: [],\r\n    toolList: [],\r\n    themeList: [],\r\n    enums: {\r\n      ImageOrderBy: [],\r\n      ImageOrderType: [],\r\n      ColorProfileOption: [],\r\n      AfterEditAppAction: [],\r\n      ImageInterpolation: [],\r\n      MouseWheelAction: [],\r\n      MouseWheelEvent: [],\r\n      MouseClickEvent: [],\r\n      BackdropStyle: [],\r\n      ToolbarItemModelType: [],\r\n    },\r\n    icons: {\r\n      Delete: '',\r\n      Edit: '',\r\n      Moon: '',\r\n      Sun: '',\r\n    },\r\n    startUpDir: '',\r\n    configDir: '',\r\n    userConfigFilePath: '',\r\n    defaultThemeDir: '',\r\n    FILE_MACRO: '',\r\n  };\r\n}\r\n_pageSettings.setSidebarActiveMenu = Sidebar.setActiveMenu;\r\n_pageSettings.loadLanguage = Language.load;\r\n_pageSettings.loadSettings = Settings.load;\r\n_pageSettings.loadLanguageList = TabLanguage.loadLanguageList;\r\n\r\n\r\n// sidebar\r\nSidebar.addEvents();\r\n\r\n// load settings\r\nSettings.load();\r\nLanguage.load();\r\n\r\n// add event listeners\r\nSettings.addEventsForFooter();\r\nTabGeneral.addEvents();\r\nTabImage.addEvents();\r\nTabSlideshow.addEvents();\r\nTabEdit.addEvents();\r\nTabViewer.addEvents();\r\nTabToolbar.addEvents();\r\nTabGallery.addEvents();\r\nTabLanguage.addEvents();\r\nTabMouse.addEvents();\r\nTabFileAssocs.addEvents();\r\nTabTools.addEvents();\r\nTabLanguage.addEvents();\r\nTabAppearance.addEvents();\r\n\r\n// load the last open tab\r\nSidebar.setActiveMenu(_pageSettings.initTab);\r\n","\r\nexport type WebviewEventHandlerFn = (name: string, data?: any) => void;\r\n\r\nexport class Webview {\r\n  public eventHandlers: Record<string, WebviewEventHandlerFn> = {};\r\n\r\n  addEvent(name: string, handler: WebviewEventHandlerFn) {\r\n    this.eventHandlers[name] = handler;\r\n  }\r\n\r\n  removeEvent(name: string) {\r\n    delete this.eventHandlers[name];\r\n  }\r\n\r\n  startListening() {\r\n    // @ts-ignore\r\n    window.chrome.webview?.addEventListener('message', ({ data }) => {\r\n      const eName = data?.Name ?? '';\r\n      const eData = data?.Data ?? '';\r\n      const handler = this.eventHandlers[eName];\r\n      const hasHandler = !!handler;\r\n\r\n      console.info(`Received event '${eName}' (handler=${hasHandler}) with data:`, eData);\r\n\r\n      if (!hasHandler) return;\r\n      handler(eName, eData);\r\n    });\r\n  }\r\n}\r\n"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","Symbol","toStringTag","Object","defineProperty","value","Language","static","langKey","_pageSettings","lang","prototype","hasOwnProperty","call","langValue","queryAll","forEach","el","innerText","title","html","i","childElementCount","replaceAll","children","item","outerHTML","innerHTML","pause","time","data","Promise","resolve","setTimeout","getChangedSettingsFromTab","tab","result","allEls","configName","name","configValue","startsWith","checkValidity","type","checked","config","escapeHtml","replace","openModalDialog","async","selector","purpose","onOpen","onSubmit","isClosed","dialogEl","query","classList","remove","add","addEventListener","e","target","rect","getBoundingClientRect","left","clientX","right","top","clientY","bottom","console","log","keys","key","inputEl","showModal","renderHotkeyList","ulSelector","hotkeys","onChange","ulEl","ulHtml","icons","Delete","load","action","getAttribute","newHotkeys","map","kbdEl","hotkeyItemEl","closest","hotkey","postAsync","openHotkeyPicker","focus","on","handler","_webview","addEvent","TabAppearance","loadThemeList","loadThemeListStatus","handleBackgroundColorChanged","handleSlideshowBackgroundColorChanged","darkTheme","lightTheme","darkEl","lightEl","resetBackgroundColor","resetSlideshowBackgroundColor","colorEL","colorValue","newThemeList","post","settings","DarkTheme","LightTheme","list","Array","isArray","length","themeList","th","FolderPath","PreviewImage","Info","Name","IsDarkMode","Version","Description","Author","Website","Email","FolderName","Moon","Sun","defaultThemeDir","themeName","themeDir","currentThemeName","document","documentElement","theme","find","colorHex","BgColor","style","setProperty","Sidebar","navItems","from","querySelectorAll","activeTabName","setActiveMenu","tabPageName","tabPageEl","navItem","TabGeneral","isOriginalAutoUpdateEnabled","AutoUpdate","startUpDir","configDir","userConfigFilePath","Date","toISOString","TabImage","colorProfile","ColorProfile","includes","handleColorProfileChanged","handleUseEmbeddedThumbnailOptionsChanged","profileFilePath","trim","ImageBoosterCacheCount","originalColorProfile","useCustomProfile","hidden","enableForRaw","enableForOthers","showSizeSection","TabSlideshow","handleUseRandomIntervalForSlideshowChanged","handleSlideshowIntervalsChanged","fromEl","toEl","max","min","intervalFrom","intervalTo","intervalFromText","toTimeString","intervalToText","useRandomInterval","totalSeconds","dt","minutes","getUTCMinutes","toString","seconds","getUTCSeconds","msSeconds","getUTCMilliseconds","TabMouse","MouseWheelActions","Scroll","CtrlAndScroll","ShiftAndScroll","AltAndScroll","resetDefaultMouseWheelActions","newWheelScrollValue","newWheelCtrlAndScrollValue","newWheelShiftAndScrollValue","newWheelAltAndScrollValue","mouseWheelActions","TabKeyboard","TabLanguage","handleLanguageChanged","removeEventListener","onBtn_RefreshLanguageList","onLnk_InstallLanguage","newLangList","loadLanguageList","langFileName","langList","FileName","Metadata","selectEl","options","displayText","LocalName","EnglishName","optionEl","Option","TabEdit","TabViewer","zoomLevels","ZoomLevels","join","handleZoomLevelsChanged","handleZoomLevelsBlur","getZoomLevels","originalLevelsString","newLevelsString","some","Number","isFinite","setCustomValidity","split","filter","Boolean","parseFloat","TabToolbar","TabGallery","TabFileAssocs","TabTools","loadToolList","defaultTool","ToolId","ToolName","Executable","Arguments","FILE_MACRO","Hotkeys","IsIntegrated","addEventsForToolDialog","updateToolCommandPreview","tool","getToolDialogFormData","setToolItemToList","originalToolListJson","JSON","stringify","toolList","Tools","getToolListFromDom","tbodyEl","tbodyHtml","btnDeleteHtml","args","hotkeysHtml","index","chkIntegratedHtml","HOTKEY_SEPARATOR","Edit","trEl","toolId","editTool","toolHotkeys","oldToolId","toolIndex","findIndex","push","handleBtnBrowseToolClickEvent","executable","filePaths","openFilePicker","TabLayout","Settings","loadSelectBoxEnums","configKey","tagName","toLowerCase","inputType","substring","loadSettings","allSettings","getAllSettings","updateInitSettings","exportSettings","newSettings","enumName","enums","enumKeys","selectEls","setAttribute","window","eventHandlers","removeEvent","startListening","chrome","webview","eName","eData","Data","hasHandler","info","querySelector","autoConvertToJson","msgData","postMessage","hasResult","eventName","eventData","initTab","ImageOrderBy","ImageOrderType","ColorProfileOption","AfterEditAppAction","ImageInterpolation","MouseWheelAction","MouseWheelEvent","MouseClickEvent","BackdropStyle","ToolbarItemModelType","setSidebarActiveMenu","loadLanguage","addEvents","addEventsForFooter"],"sourceRoot":""}